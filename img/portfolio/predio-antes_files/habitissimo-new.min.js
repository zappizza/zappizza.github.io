function nano(t,e){return t.replace(/\{([\w\.]*)\}/g,function(t,n){for(var i=n.split("."),o=e[i.shift()],s=0,a=i.length;s<a;s++)o=o[i[s]];return void 0!==o&&null!==o?o:""})}function AlbumController($scope,$http,$filter){$scope.data={image_id:void 0,albums:void 0,album:void 0,show_albums:!1,saved_in:!1},$scope.fields={albumName:"",imageDescription:""},$scope.init=function(t,e){$scope.data.image_id=t,Login.pop({source_page:e,source_action:"photo_add_photo_to_album",title:__("\xbfA que es genial esta foto?")+"<small>"+__("Necesitamos que entres a tu cuenta o est\xe9s registrado para poder guardarla")+"</small>",onsuccess:function(){$http({url:Hab.config.api_root+"/me/albums",method:"GET",withCredentials:!0}).success(function(t){$scope.data.albums=t,$scope.checkIfAlreadySaved(),$scope.openPopup()})}})},$scope.checkIfAlreadySaved=function(){_.each($scope.data.albums,function(t){_.contains(t.rel_images,$scope.data.image_id.toString())&&($scope.data.saved_in=t,$filter("filter")($scope.data.albums,{id:t.id})[0].disabled=!0)})},$scope.saveImage=function(){$http({url:Hab.config.api_root+"/me/albums/"+$scope.data.album.id,method:"PUT",withCredentials:!0,data:{image_id:$scope.data.image_id,description:$scope.fields.imageDescription}}).success(function(){$scope.closePopup(),setTimeout(function(){$scope.data.album_not_exists=!1,bootbox.alert(__('Has guardado la foto en <a href="{album_url}">el \xe1lbum <strong>{album}</strong></a>',{album:$scope.data.album.name,album_url:nano(Hab.config.user_albums_show_url_template,{id:$scope.data.album.id})}))},200)}).error(function(){$scope.data.album_not_exists=!0})},$scope.addAlbum=function(){$http({url:Hab.config.api_root+"/me/albums",method:"PUT",withCredentials:!0,data:{name:$scope.fields.albumName}}).success(function(t){$scope.data.album=t,$scope.data.albums.push(t),$scope.data.show_albums=!1,$scope.fields.albumName=""})},$scope.openAlbums=function(){$scope.data.show_albums=!0},$scope.selectAlbum=function(t,$event){if($event.stopImmediatePropagation(),$event.preventDefault(),t.disabled)return!1;$scope.data.album=t,$scope.data.show_albums=!1},$scope.openPopup=function(){$("#album-selector-popup").modal("show")},$scope.closePopup=function(){$("#album-selector-popup").modal("hide")}}function Walkthrough(t,e,n){this.tour=new Tour({name:e,template:n,keyboard:!1,steps:t,isFirstStep:!1,isLastStep:!1,onShown:function(t){var e=t.getStep(t.getCurrentStep());this.handleNextStepButton(t,e),this.handlePrevStepButton(t,e)}.bind(this),onNext:function(t){this.sendTrackEvent(t,"next")}.bind(this),onPrev:function(t){this.sendTrackEvent(t,"back")}.bind(this),onEnd:function(t){this.sendTrackEvent(t,"close")}.bind(this)}),this.start()}if(Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o}),String.prototype.trim||function(){var t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"")}}(),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var s,a,r=[];for(s in o)t.call(o,s)&&r.push(s);if(e)for(a=0;a<i;a++)t.call(o,n[a])&&r.push(n[a]);return r}}()),"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}),Array.prototype.filter||(Array.prototype.filter=function(t,e){"use strict";if("function"!=typeof t||!this)throw new TypeError;var n=this.length>>>0,i=new Array(n),o=this,s=0,a=-1;if(void 0===e)for(;++a!==n;)a in this&&t(o[a],a,o)&&(i[s++]=o[a]);else for(;++a!==n;)a in this&&t.call(e,o[a],a,o)&&(i[s++]=o[a]);return i.length=s,i}),function(){if(window.addEventListener){var t=!0;window.addEventListener("load",function(){setTimeout(function(){t=!1},0)},!1),window.addEventListener("popstate",function(e){t&&"complete"==document.readyState&&(e.preventDefault(),e.stopImmediatePropagation())},!1)}}(),function(t,e){"use strict";e.fn.trackErrors=function(n){if("undefined"==typeof dataLayer||void 0===dataLayer.push)return this;for(var i=e.extend({trackFunction:"dataLayer.push",eventName:"eventga",trackCategory:"FormError",trackAttribute:"data-trackid",errorSelector:".form_error[id]",debug:!1},n),o=function(){i.debug&&console.log(arguments)},s=t,a=i.trackFunction.split("."),r=0;r<a.length;r++){var l=a[r];if(void 0===s[l])return o("TrackFunction is not defined. Aborting"),this;s="function"==typeof s[l]?s[l].bind(s):s[l]}var u=e(this).attr(i.trackAttribute);return u?(this.find(i.errorSelector).each(function(){s({category:i.trackCategory,action:"FormError",label:e(this).data("for")||this.id,event:i.eventName}),o(i.trackCategory,u,this.id,i.eventName)}),this):(o("The attribute "+i.trackAttribute+" was not found on the object given. Aborting."),this)}}(window,jQuery),$(function(){function t(t){var n=$(t.target).data("track-focus-out-event"),i="";!function(t){return t in e}(n)&&n&&(i=n.split("."),trackAnalyticsEvent(i[0],i[1],i[2]),e[n]=!0)}var e={};$("[data-track-show-event]").each(function(){var t=$(this).data("track-show-event");if(t){var e=t.split(".");trackAnalyticsEvent(e[0],e[1],e[2])}}),$("[data-track-focus-out-event]").on("focusout",function(e){var n=$(this);n.is("input, textarea")?n.val()&&t(e):t(e)})}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(),function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});return setTimeout(function(){n||t(i).trigger(t.support.transition.end)},e),this},t(function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=(s=o.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t(s);e&&e.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.button"),s="object"==typeof e&&e;o||i.data("bs.button",o=new n(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",s=i.data();e+="Text",null==s.resetText&&i.data("resetText",i[o]()),setTimeout(t.proxy(function(){i[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),t(n.target).is('input[type="radio"]')||t(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.carousel"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;o||i.data("bs.carousel",o=new n(this,s)),"number"==typeof e?o.to(e):a?o[a]():s.interval&&o.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);if(("prev"==t&&0===n||"next"==t&&n==this.$items.length-1)&&!this.options.wrap)return e;var i=(n+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){if(!this.sliding)return this.slide("next")},n.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},n.prototype.slide=function(e,i){var o=this.$element.find(".item.active"),s=i||this.getItemForDirection(e,o),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var u=s[0],c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:r});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(s)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(r),s.addClass(r),o.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this};var o=function(n){var i,o=t(this),s=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),o.data()),r=o.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),function(t){"use strict";function e(e){var n,i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function n(e){return this.each(function(){var n=t(this),o=n.data("bs.collapse"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||n.data("bs.collapse",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"))&&e.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),e||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[n](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,i){var o=t(i);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=t(this);o.attr("data-target")||i.preventDefault();var s=e(o),a=s.data("bs.collapse")?"toggle":o.data();n.call(s,a)})}(jQuery),function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(i).remove(),t(o).each(function(){var i=t(this),o=e(i),s={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(o[0],n.target)||(o.trigger(n=t.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.6",s.prototype.toggle=function(i){var o=t(this);if(!o.is(".disabled, :disabled")){var s=e(o),a=s.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var r={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",r)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},s.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var s=e(i),a=s.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&s.find(o).trigger("focus"),i.trigger("click");var r=s.find(".dropdown-menu li:not(.disabled):visible a");if(r.length){var l=r.index(n.target);38==n.which&&l>0&&l--,40==n.which&&l<r.length-1&&l++,~l||(l=0),r.eq(l).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),function(t){"use strict";function e(e,i){return this.each(function(){var o=t(this),s=o.data("bs.modal"),a=t.extend({},n.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new n(this,a)),"string"==typeof e?s[e](i):a.show&&s.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var i=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),o=i.attr("href"),s=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(s,a,this)})}(jQuery),function(t){"use strict";var e=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};e.VERSION="3.3.6",e.TRANSITION_DURATION=150,e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},e.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var a=o[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},e.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},e.prototype.show=function(){var n=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var o=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(r);u&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),h=s[0].offsetWidth,d=s[0].offsetHeight;if(u){var p=r,f=this.getPosition(this.$viewport);r="bottom"==r&&c.bottom+d>f.bottom?"top":"top"==r&&c.top-d<f.top?"bottom":"right"==r&&c.right+h>f.width?"left":"left"==r&&c.left-h<f.left?"right":r,s.removeClass(p).addClass(r)}var g=this.getCalculatedOffset(r,c,h,d);this.applyPlacement(g,r);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}},e.prototype.applyPlacement=function(e,n){var i=this.tip(),o=i[0].offsetWidth,s=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),r=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=s&&(e.top=e.top+s-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var h=/top|bottom/.test(n),d=h?2*c.left-o+l:2*c.top-s+u,p=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][p],h)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(n){function i(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),n&&n()}var o=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(e.TRANSITION_DURATION):i(),this.hoverState=null,this},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=i?{top:0,left:0}:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,r,s)},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+i;r<a.top?o.top=a.top-r:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var u=e.left-s,c=e.left+s+n;u<a.left?o.left=a.left-u:c>a.right&&(o.left=a.left+a.width-c)}return o},e.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},e.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},e.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("bs.tooltip"),s="object"==typeof n&&n;!o&&/destroy|hide/.test(n)||(o||i.data("bs.tooltip",o=new e(this,s)),"string"==typeof n&&o[n]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.6",e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),o=i.data("bs.popover"),s="object"==typeof n&&n;!o&&/destroy|hide/.test(n)||(o||i.data("bs.popover",o=new e(this,s)),"string"==typeof n&&o[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),function(t){"use strict";function e(n,i){this.$body=t(document.body),this.$scrollElement=t(t(n).is(document.body)?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),o=i.data("bs.scrollspy"),s="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new e(this,s)),"string"==typeof n&&o[n]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)a!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof e&&o[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=n.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(i);this.activate(e.closest("li"),n),this.activate(r,r.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(e,i,o){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=i.find("> .active"),r=o&&t.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var o=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.affix"),s="object"==typeof e&&e;o||i.data("bs.affix",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.6",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return o<=n&&"top";if("bottom"==this.affixed)return null!=n?!(o+this.unpin<=s.top)&&"bottom":!(o+a<=t-i)&&"bottom";var r=null==this.affixed,l=r?o:s.top;return null!=n&&o<=n?"top":null!=i&&l+(r?a:e)>=t-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),i=this.options.offset,o=i.top,s=i.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof i&&(s=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var r=this.getState(a,e,o,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(jQuery),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?"undefined"==typeof $?module.exports=e(require("jquery")):module.exports=e($):t.bootbox=e(t.jQuery)}(this,function t(e,n){"use strict";function i(t){var e=f[d.locale];return e?e[t]:f.en[t]}function o(t,n,i){t.stopPropagation(),t.preventDefault();e.isFunction(i)&&!1===i.call(n,t)||n.modal("hide")}function s(t,n){var i=0;e.each(t,function(t,e){n(t,e,i++)})}function a(t){var n,i;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error("Please specify a message");return(t=e.extend({},d,t)).buttons||(t.buttons={}),n=t.buttons,i=function(t){if(Object.keys)return Object.keys(t).length;var e,n=0;for(e in t)n++;return n}(n),s(n,function(t,o,s){var a=s===i-1;if(e.isFunction(o)&&(o=n[t]={callback:o}),"object"!==e.type(o))throw new Error("button with key "+t+" must be an object");o.label||(o.label=t),o.className||(o.className=i<=2&&a?"btn-primary":"btn-default")}),t}function r(t,n,i){return e.extend(!0,{},t,function(t,e){var n=t.length,i={};if(n<1||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof t[0]?(i[e[0]]=t[0],i[e[1]]=t[1]):i=t[0],i}(n,i))}function l(t,e,n,i){return c(r({className:"bootbox-"+t,buttons:u.apply(null,e)},i,n),e)}function u(){for(var t={},e=0,n=arguments.length;e<n;e++){var o=arguments[e],s=o.toLowerCase(),a=o.toUpperCase();t[s]={label:i(a)}}return t}function c(t,e){var i={};return s(e,function(t,e){i[e]=!0}),s(t.buttons,function(t){if(i[t]===n)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var h={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},d={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",focus:".btn-primary:first"},p={};p.alert=function(){var t;if((t=l("alert",["ok"],["message","callback"],arguments)).callback&&!e.isFunction(t.callback))throw new Error("alert requires callback property to be a function when provided");return t.buttons.ok.callback=t.onEscape=function(){return!e.isFunction(t.callback)||t.callback.call(this)},p.dialog(t)},p.confirm=function(){var t;if(t=l("confirm",["cancel","confirm"],["message","callback"],arguments),!e.isFunction(t.callback))throw new Error("confirm requires a callback");return t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},p.dialog(t)},p.prompt=function(){var t,i,o,a,l,d,f;if(a=e(h.form),i={className:"bootbox-prompt",buttons:u("cancel","confirm"),value:"",inputType:"text"},t=c(r(i,arguments,["title","callback"]),["cancel","confirm"]),d=t.show===n||t.show,t.message=a,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var n;return n="checkbox"===t.inputType?l.find("input:checked").map(function(){return e(this).val()}).get():l.val(),t.callback.call(this,n)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");if(!h.inputs[t.inputType])throw new Error("invalid prompt type");switch(l=e(h.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":l.val(t.value);break;case"select":var g={};if(f=t.inputOptions||[],!e.isArray(f))throw new Error("Please pass an array of input options");if(!f.length)throw new Error("prompt with select requires options");s(f,function(t,i){var o=l;if(i.value===n||i.text===n)throw new Error("each option needs a `value` and a `text` property");i.group&&(g[i.group]||(g[i.group]=e("<optgroup/>").attr("label",i.group)),o=g[i.group]),o.append("<option value='"+i.value+"'>"+i.text+"</option>")}),s(g,function(t,e){l.append(e)}),l.val(t.value);break;case"checkbox":var m=e.isArray(t.value)?t.value:[t.value];if(!(f=t.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!f[0].value||!f[0].text)throw new Error("each option needs a `value` and a `text` property");l=e("<div/>"),s(f,function(n,i){var o=e(h.inputs[t.inputType]);o.find("input").attr("value",i.value),o.find("label").append(i.text),s(m,function(t,e){e===i.value&&o.find("input").prop("checked",!0)}),l.append(o)})}return t.placeholder&&l.attr("placeholder",t.placeholder),t.pattern&&l.attr("pattern",t.pattern),t.maxlength&&l.attr("maxlength",t.maxlength),a.append(l),a.on("submit",function(t){t.preventDefault(),t.stopPropagation(),o.find(".btn-primary").click()}),(o=p.dialog(t)).off("shown.bs.modal"),o.on("shown.bs.modal",function(){l.focus()}),!0===d&&o.modal("show"),o},p.dialog=function(t){t=a(t);var i=e(h.dialog),r=i.find(".modal-dialog"),l=i.find(".modal-body"),u=t.buttons,c="",d={onEscape:t.onEscape};if(e.fn.modal===n)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(s(u,function(t,e){c+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",d[t]=e.callback}),l.find(".bootbox-body").html(t.message),!0===t.animate&&i.addClass("fade"),t.className&&i.addClass(t.className),"large"===t.size?r.addClass("modal-lg"):"small"===t.size&&r.addClass("modal-sm"),t.title&&l.before(h.header),t.closeButton){var p=e(h.closeButton);t.title?i.find(".modal-header").prepend(p):p.css("margin-top","-2px").prependTo(l)}return t.title&&i.find(".modal-title").html(t.title),c.length&&(l.after(h.footer),i.find(".modal-footer").html(c)),i.one("hide.bs.modal",function(){i.off("escape.close.bb"),i.off("click")}),i.one("hidden.bs.modal",function(t){t.target===this&&i.remove()}),t.focus&&i.one("shown.bs.modal",function(){e(t.focus,i).focus()}),"static"!==t.backdrop&&i.on("click.dismiss.bs.modal",function(t){i.children(".modal-backdrop").length&&(t.currentTarget=i.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&i.trigger("escape.close.bb")}),i.on("escape.close.bb",function(t){d.onEscape&&o(t,i,d.onEscape)}),i.on("click",".modal-footer button",function(t){var n=e(this).data("bb-handler");o(t,i,d[n])}),i.on("click",".bootbox-close-button",function(t){o(t,i,d.onEscape)}),i.on("keyup",function(t){27===t.which&&i.trigger("escape.close.bb")}),e(t.container).append(i),i.modal({backdrop:!!t.backdrop&&"static",keyboard:!1,show:!1}),t.show&&i.modal("show"),i},p.setDefaults=function(){var t={};2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(d,t)},p.hideAll=function(){return e(".bootbox").modal("hide"),p};var f={ar:{OK:"\u0645\u0648\u0627\u0641\u0642",CANCEL:"\u0627\u0644\u063a\u0627\u0621",CONFIRM:"\u062a\u0623\u0643\u064a\u062f"},bg_BG:{OK:"\u041e\u043a",CANCEL:"\u041e\u0442\u043a\u0430\u0437",CONFIRM:"\u041f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u043c"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zru\u0161it",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"\u0395\u03bd\u03c4\u03ac\u03be\u03b5\u03b9",CANCEL:"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7",CONFIRM:"\u0395\u03c0\u03b9\u03b2\u03b5\u03b2\u03b1\u03af\u03c9\u03c3\u03b7"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"\u0642\u0628\u0648\u0644",CANCEL:"\u0644\u063a\u0648",CONFIRM:"\u062a\u0627\u06cc\u06cc\u062f"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"Confirmer"},he:{OK:"\u05d0\u05d9\u05e9\u05d5\u05e8",CANCEL:"\u05d1\u05d9\u05d8\u05d5\u05dc",CONFIRM:"\u05d0\u05d9\u05e9\u05d5\u05e8"},hu:{OK:"OK",CANCEL:"M\xe9gsem",CONFIRM:"Meger\u0151s\xedt"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"\u30ad\u30e3\u30f3\u30bb\u30eb",CONFIRM:"\u78ba\u8a8d"},lt:{OK:"Gerai",CANCEL:"At\u0161aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprin\u0101t"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd\u017a"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"\u041e\u0442\u043c\u0435\u043d\u0430",CONFIRM:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"\u0e15\u0e01\u0e25\u0e07",CANCEL:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",CONFIRM:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19"},tr:{OK:"Tamam",CANCEL:"\u0130ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u786e\u8ba4"},zh_TW:{OK:"OK",CANCEL:"\u53d6\u6d88",CONFIRM:"\u78ba\u8a8d"}};return p.addLocale=function(t,n){return e.each(["OK","CANCEL","CONFIRM"],function(t,e){if(!n[e])throw new Error("Please supply a translation for '"+e+"'")}),f[t]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM},p},p.removeLocale=function(t){return delete f[t],p},p.setLocale=function(t){return p.setDefaults("locale",t)},p.init=function(n){return t(n||e)},p}),function(t){function e(e){this.$element=t(e),this.original_text=this.$element.html().trim(),this.settings=t.extend({},t.fn.trunk8.defaults)}function n(t){var e=document.createElement("DIV");return e.innerHTML=t,void 0!==e.textContent?e.textContent:e.innerText}function i(t){if(n(t)===t)return t.split(/\s/g);for(var e,o,s=[],a=/<([a-z]+)([^<]*)(?:>(.*?(?!<\1>)*)<\/\1>|\s+\/>)(['.?!,]*)|((?:[^<>\s])+['.?!,]*\w?|<br\s?\/?>)/gi,r=a.exec(t);r&&e!==a.lastIndex;)e=a.lastIndex,r[5]?s.push(r[5]):r[1]&&s.push({tag:r[1],attribs:r[2],content:r[3],after:r[4]}),r=a.exec(t);for(o=0;o<s.length;o++)"string"!=typeof s[o]&&s[o].content&&(s[o].content=i(s[o].content));return s}function o(e,n,i){e=e.replace(i,"");var o=function(n,s){var a,r,l,u,c="";for(u=0;u<n.length;u++)a=n[u],l=t.trim(e).split(" ").length,t.trim(e).length&&("string"==typeof a?(/<br\s*\/?>/.test(a)||(1===l&&t.trim(e).length<=a.length?(a=e,"p"!==s&&"div"!==s||(a+=i),e=""):e=e.replace(a,"")),c+=t.trim(a)+(u===n.length-1||l<=1?"":" ")):(r=o(a.content,a.tag),a.after&&(e=e.replace(a.after,"")),r&&(a.after||(a.after=" "),c+="<"+a.tag+a.attribs+">"+r+"</"+a.tag+">"+a.after)));return c},s=o(n);return s.slice(s.length-i.length)===i&&(s+=i),s}function s(){var e,s,a,l,c,h,d=this.data("trunk8"),p=d.settings,f=p.width,g=p.side,m=p.fill,v=p.parseHTML,y=r.getLineHeight(this)*p.lines,b=d.original_text,w=b.length,_="";if(this.html(b),c=this.text(),v&&n(b)!==b&&(h=i(b),w=(b=n(b)).length),f===u.auto){if(this.height()<=y)return;for(e=0,s=w-1;e<=s;)a=e+(s-e>>1),l=r.eatStr(b,g,w-a,m),v&&h&&(l=o(l,h,m)),this.html(l),this.height()>y?s=a-1:(e=a+1,_=_.length>l.length?_:l);this.html(""),this.html(_),p.tooltip&&this.attr("title",c)}else{if(isNaN(f))return void t.error('Invalid width "'+f+'".');a=w-f,l=r.eatStr(b,g,a,m),this.html(l),p.tooltip&&this.attr("title",b)}p.onTruncate()}var a,r,l={center:"center",left:"left",right:"right"},u={auto:"auto"};e.prototype.updateSettings=function(e){this.settings=t.extend(this.settings,e)},a={init:function(n){return this.each(function(){var i=t(this),o=i.data("trunk8");o||i.data("trunk8",o=new e(this)),o.updateSettings(n),s.call(i)})},update:function(e){return this.each(function(){var n=t(this);e&&(n.data("trunk8").original_text=e),s.call(n)})},revert:function(){return this.each(function(){var e=t(this).data("trunk8").original_text;t(this).html(e)})},getSettings:function(){return t(this.get(0)).data("trunk8").settings}},(r={eatStr:function(e,n,i,o){var s,a,u=e.length,c=r.eatStr.generateKey.apply(null,arguments);if(r.eatStr.cache[c])return r.eatStr.cache[c];if("string"==typeof e&&0!==u||t.error('Invalid source string "'+e+'".'),i<0||i>u)t.error('Invalid bite size "'+i+'".');else if(0===i)return e;switch("string"!=typeof(o+"")&&t.error("Fill unable to be converted to a string."),n){case l.right:return r.eatStr.cache[c]=t.trim(e.substr(0,u-i))+o;case l.left:return r.eatStr.cache[c]=o+t.trim(e.substr(i));case l.center:return s=u>>1,a=i>>1,r.eatStr.cache[c]=t.trim(r.eatStr(e.substr(0,u-s),l.right,i-a,""))+o+t.trim(r.eatStr(e.substr(u-s),l.left,a,""));default:t.error('Invalid side "'+n+'".')}},getLineHeight:function(e){var n=t(e).css("float");"none"!==n&&t(e).css("float","none");var i=t(e).css("position");"absolute"===i&&t(e).css("position","static");var o,s=t(e).html();return t(e).html("i").wrap('<div id="line-height-test" />'),o=t("#line-height-test").innerHeight(),t(e).html(s).css({float:n,position:i}).unwrap(),o}}).eatStr.cache={},r.eatStr.generateKey=function(){return Array.prototype.join.call(arguments,"")},t.fn.trunk8=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.trunk8"):a.init.apply(this,arguments)},t.fn.trunk8.defaults={fill:"&hellip;",lines:1,side:l.right,tooltip:!0,width:u.auto,parseHTML:!1,onTruncate:function(){}}}(jQuery),function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,s=Function.prototype,a=i.push,r=i.slice,l=i.concat,u=o.toString,c=o.hasOwnProperty,h=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,_=Object.keys,x=s.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var C=k.each=k.forEach=function(t,e,i){if(null==t)return t;if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,s=t.length;o<s;o++)if(e.call(i,t[o],o,t)===n)return}else for(var a=k.keys(t),o=0,s=a.length;o<s;o++)if(e.call(i,t[a[o]],a[o],t)===n)return;return t};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(C(t,function(t,o,s){i.push(e.call(n,t,o,s))}),i)};var F="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=k.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(C(t,function(t,s,a){o?n=e.call(i,n,t,s,a):(n=t,o=!0)}),!o)throw new TypeError(F);return n},k.reduceRight=k.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=k.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var a=k.keys(t);s=a.length}if(C(t,function(r,l,u){l=a?a[--s]:--s,o?n=e.call(i,n,t[l],l,u):(n=t[l],o=!0)}),!o)throw new TypeError(F);return n},k.find=k.detect=function(t,e,n){var i;return S(t,function(t,o,s){if(e.call(n,t,o,s))return i=t,!0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,o,s){e.call(n,t,o,s)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,i):(C(t,function(t,s,a){if(!(o=o&&e.call(i,t,s,a)))return n}),!!o)};var S=k.some=k.any=function(t,e,i){e||(e=k.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(C(t,function(t,s,a){if(o||(o=e.call(i,t,s,a)))return n}),!!o)};k.contains=k.include=function(t,e){return null!=t&&(y&&t.indexOf===y?-1!=t.indexOf(e):S(t,function(t){return t===e}))},k.invoke=function(t,e){var n=r.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,o=-1/0;return C(t,function(t,s,a){var r=e?e.call(n,t,s,a):t;r>o&&(i=t,o=r)}),i},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,o=1/0;return C(t,function(t,s,a){var r=e?e.call(n,t,s,a):t;r<o&&(i=t,o=r)}),i},k.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=T(e),k.pluck(k.map(t,function(t,i,o){return{value:t,index:i,criteria:e.call(n,t,i,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index}),"value")};var D=function(t){return function(e,n,i){var o={};return n=T(n),C(e,function(s,a){var r=n.call(i,s,a,e);t(o,r,s)}),o}};k.groupBy=D(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=D(function(t,e,n){t[e]=n}),k.countBy=D(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){for(var o=(n=T(n)).call(i,e),s=0,a=t.length;s<a;){var r=s+a>>>1;n.call(i,t[r])<o?s=r+1:a=r}return s},k.toArray=function(t){return t?k.isArray(t)?r.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:e<0?[]:r.call(t,0,e)},k.initial=function(t,e,n){return r.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return r.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var A=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(C(t,function(t){k.isArray(t)||k.isArguments(t)?e?a.apply(n,t):A(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return A(t,e,[])},k.without=function(t){return k.difference(t,r.call(arguments,1))},k.partition=function(t,e){var n=[],i=[];return C(t,function(t){(e(t)?n:i).push(t)}),[n,i]},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var o=n?k.map(t,n,i):t,s=[],a=[];return C(o,function(n,i){(e?i&&a[a.length-1]===n:k.contains(a,n))||(a.push(n),s.push(t[i]))}),s},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=r.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(i,r.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;n<t;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;i<o;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=n<0?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;i<o;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,s=new Array(i);o<i;)s[o++]=t,t+=n;return s};var E=function(){};k.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,r.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=r.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(r.call(arguments)));E.prototype=t.prototype;var o=new E;E.prototype=null;var s=t.apply(o,n.concat(r.call(arguments)));return Object(s)===s?s:o}},k.partial=function(t){var e=r.call(arguments,1);return function(){for(var n=0,i=e.slice(),o=0,s=i.length;o<s;o++)i[o]===k&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},k.bindAll=function(t){var e=r.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=r.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(r.call(arguments,1)))},k.throttle=function(t,e,n){var i,o,s,a=null,r=0;n||(n={});var l=function(){r=!1===n.leading?0:k.now(),a=null,s=t.apply(i,o),i=o=null};return function(){var u=k.now();r||!1!==n.leading||(r=u);var c=e-(u-r);return i=this,o=arguments,c<=0?(clearTimeout(a),a=null,r=u,s=t.apply(i,o),i=o=null):a||!1===n.trailing||(a=setTimeout(l,c)),s}},k.debounce=function(t,e,n){var i,o,s,a,r,l=function(){var u=k.now()-a;u<e?i=setTimeout(l,e-u):(i=null,n||(r=t.apply(s,o),s=o=null))};return function(){s=this,o=arguments,a=k.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(r=t.apply(s,o),s=o=null),r}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},k.keys=function(t){if(!k.isObject(t))return[];if(_)return _(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=t[e[o]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),o=0;o<n;o++)i[o]=[e[o],t[e[o]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,o=n.length;i<o;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(r.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,r.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,r.call(arguments,1));for(var o in t)k.contains(n,o)||(e[o]=t[o]);return e},k.defaults=function(t){return C(r.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var $=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var o=u.call(t);if(o!=u.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;var a=t.constructor,r=e.constructor;if(a!==r&&!(k.isFunction(a)&&a instanceof a&&k.isFunction(r)&&r instanceof r)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==o){if(l=t.length,c=l==e.length)for(;l--&&(c=$(t[l],e[l],n,i)););}else{for(var h in t)if(k.has(t,h)&&(l++,!(c=k.has(e,h)&&$(t[h],e[h],n,i))))break;if(c){for(h in e)if(k.has(e,h)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(t,e){return $(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;o<t;o++)i[o]=e.call(n,o);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var O={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};O.unescape=k.invert(O.escape);var I={escape:new RegExp("["+k.keys(O.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(O.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(I[t],function(e){return O[t][e]})}}),k.result=function(t,e){if(null!=t){var n=t[e];return k.isFunction(n)?n.call(t):n}},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),R.call(this,n.apply(k,t))}})};var M=0;k.uniqueId=function(t){var e=++M+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var o=new RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),s=0,a="__p+='";t.replace(o,function(e,n,i,o,r){return a+=t.slice(s,r).replace(P,function(t){return"\\"+j[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),s=r+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(t){throw t.source=a,t}if(e)return i(e,k);var r=function(t){return i.call(this,t,k)};return r.source="function("+(n.variable||"obj")+"){\n"+a+"}",r},k.chain=function(t){return k(t).chain()};var R=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],R.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return R.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(global,undefined){"use strict";function canUseNextTick(){return"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)}function canUseMessageChannel(){return!!global.MessageChannel}function canUsePostMessage(){if(!global.postMessage||global.importScripts)return!1;var t=!0,e=global.onmessage;return global.onmessage=function(){t=!1},global.postMessage("","*"),global.onmessage=e,t}function canUseReadyStateChange(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")}function installNextTickImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return process.nextTick(function(){tasks.runIfPresent(t)}),t}}function installMessageChannelImplementation(t){var e=new global.MessageChannel;e.port1.onmessage=function(t){var e=t.data;tasks.runIfPresent(e)},t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return e.port2.postMessage(t),t}}function installPostMessageImplementation(t){function e(t){if(t.source===global&&function(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}(t.data,n)){var e=t.data.substring(n.length);tasks.runIfPresent(e)}}var n="com.bn.NobleJS.setImmediate"+Math.random();global.addEventListener?global.addEventListener("message",e,!1):global.attachEvent("onmessage",e),t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return global.postMessage(n+t,"*"),t}}function installReadyStateChangeImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments),e=global.document.createElement("script");return e.onreadystatechange=function(){tasks.runIfPresent(t),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e),t}}function installSetTimeoutImplementation(t){t.setImmediate=function(){var t=tasks.addFromSetImmediateArguments(arguments);return global.setTimeout(function(){tasks.runIfPresent(t)},0),t}}var tasks=function(){function Task(t,e){this.handler=t,this.args=e}Task.prototype.run=function(){if("function"==typeof this.handler)this.handler.apply(undefined,this.args);else{var scriptSource=""+this.handler;eval(scriptSource)}};var nextHandle=1,tasksByHandle={},currentlyRunningATask=!1;return{addFromSetImmediateArguments:function(t){var e=new Task(t[0],Array.prototype.slice.call(t,1)),n=nextHandle++;return tasksByHandle[n]=e,n},runIfPresent:function(t){if(currentlyRunningATask)global.setTimeout(function(){tasks.runIfPresent(t)},0);else{var e=tasksByHandle[t];if(e){currentlyRunningATask=!0;try{e.run()}finally{delete tasksByHandle[t],currentlyRunningATask=!1}}}},remove:function(t){delete tasksByHandle[t]}}}();if(!global.setImmediate){var attachTo="function"==typeof Object.getPrototypeOf&&"setTimeout"in Object.getPrototypeOf(global)?Object.getPrototypeOf(global):global;canUseNextTick()?installNextTickImplementation(attachTo):canUsePostMessage()?installPostMessageImplementation(attachTo):canUseMessageChannel()?installMessageChannelImplementation(attachTo):canUseReadyStateChange()?installReadyStateChangeImplementation(attachTo):installSetTimeoutImplementation(attachTo),attachTo.clearImmediate=tasks.remove}}("object"==typeof global&&global?global:this),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return s.raw?t:encodeURIComponent(t)}function n(t){return s.raw?t:decodeURIComponent(t)}function i(e,n){var i=s.raw?e:function(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{t=decodeURIComponent(t.replace(o," "))}catch(t){return}try{return s.json?JSON.parse(t):t}catch(t){}}(e);return t.isFunction(n)?n(i):i}var o=/\+/g,s=t.cookie=function(o,a,r){if(void 0!==a&&!t.isFunction(a)){if("number"==typeof(r=t.extend({},s.defaults,r)).expires){var l=r.expires,u=r.expires=new Date;u.setDate(u.getDate()+l)}return document.cookie=[e(o),"=",function(t){return e(s.json?JSON.stringify(t):String(t))}(a),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var c=o?void 0:{},h=document.cookie?document.cookie.split("; "):[],d=0,p=h.length;d<p;d++){var f=h[d].split("="),g=n(f.shift()),m=f.join("=");if(o&&o===g){c=i(m,a);break}o||void 0===(m=i(m))||(c[g]=m)}return c};s.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!0)}}),function(t){t.extend(t.fn,{validate:function(e){if(this.length){var n=t.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i;return!n.settings.submitHandler||(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),!1)}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(t(this[0]).is("form"))return this.validate().form();var e=!0,n=t(this[0].form).validate();return this.each(function(){e=e&&n.element(this)}),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i=this[0];if(e){var o=t.data(i.form,"validator").settings,s=o.rules,a=t.validator.staticRules(i);switch(e){case"add":t.extend(a,t.validator.normalizeRule(n)),delete a.messages,s[i.name]=a,n.messages&&(o.messages[i.name]=t.extend(o.messages[i.name],n.messages));break;case"remove":if(!n)return delete s[i.name],a;var r={};return t.each(n.split(/\s/),function(t,e){r[e]=a[e],delete a[e]}),r}}var l=t.validator.normalizeRules(t.extend({},t.validator.classRules(i),t.validator.attributeRules(i),t.validator.dataRules(i),t.validator.staticRules(i)),i);if(l.required){var u=l.required;delete l.required,l=t.extend({required:u},l)}return l}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t,e){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t,e){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){9===e.which&&""===this.elementValue(t)||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t,e){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})});var i=this.settings.rules;t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){e=this.validationTargetFor(this.clean(e)),this.lastElement=e,this.prepareElement(e),this.currentElements=t(e);var n=!1!==this.check(e);return n?delete this.invalid[e.name]:this.invalid[e.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var n in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in n||!e.objectLength(t(this).rules()))&&(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.replace(" ",".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n=t(e).attr("type"),i=t(e).val();return"radio"===n||"checkbox"===n?t("input[name='"+t(e).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i=t(e).rules(),o=!1,s=this.elementValue(e);for(var a in i){var r={method:a,parameters:i[a]};try{if("dependency-mismatch"===(n=t.validator.methods[a].call(this,s,e,r.parameters))){o=!0;continue}if(o=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,r),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",t),t}}if(!o)return this.objectLength(i)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg-"+n.toLowerCase())||e.attributes&&t(e).attr("data-msg-"+n.toLowerCase())},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),o=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):o.test(i)&&(i=t.validator.format(i.replace(o,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var n=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i=this.errorsFor(e);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(n)):(i=t("<"+this.settings.errorElement+">").attr("for",this.idOrName(e)).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,e)),this.toShow=this.toShow.add(i)},errorsFor:function(e){var n=this.idOrName(e);return this.errors().filter(function(){return t(this).attr("for")===n})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t,e){return t},string:function(e,n){return!!t(e,n.form).length},function:function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n={},i=t(e),o=i[0].getAttribute("type");for(var s in t.validator.methods){var a;"required"===s?(""===(a=i.get(0).getAttribute(s))&&(a=!0),a=!!a):a=i.attr(s),/min|max/.test(s)&&(null===o||/number|range|text/.test(o))&&(a=Number(a)),a?n[s]=a:o===s&&"range"!==o&&(n[s]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var n,i,o={},s=t(e);for(n in t.validator.methods)void 0!==(i=s.data("rule-"+n.toLowerCase()))&&(o[n]=i);return o},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,o){if(!1!==o){if(o.param||o.depends){var s=!0;switch(typeof o.depends){case"string":s=!!t(o.depends,n.form).length;break;case"function":s=o.depends.call(n,n)}s?e[i]=void 0===o.param||o.param:delete e[i]}}else delete e[i]}),t.each(e,function(i,o){e[i]=t.isFunction(o)?o(n):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(e.min&&e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),e.minlength&&e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var o=t(n).val();return o&&o.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;for(var n=0,i=0,o=!1,s=(t=t.replace(/\D/g,"")).length-1;s>=0;s--){var a=t.charAt(s);i=parseInt(a,10),o&&(i*=2)>9&&(i-=9),n+=i,o=!o}return n%10==0},minlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i},maxlength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o<=i},rangelength:function(e,n,i){var o=t.isArray(e)?e.length:this.getLength(t.trim(e),n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||t<=n},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,i){var o=t(i);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===o.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var o=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,o.old===e)return o.valid;o.old=e;var s=this;this.startRequest(n);var a={};return a[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:a,success:function(i){s.settings.messages[n.name].remote=o.originalMessage;var a=!0===i||"true"===i;if(a){var r=s.formSubmitted;s.prepareElement(n),s.formSubmitted=r,s.successList.push(n),delete s.invalid[n.name],s.showErrors()}else{var l={},u=i||s.defaultMessage(n,"remote");l[n.name]=o.message=t.isFunction(u)?u(e):u,s.invalid[n.name]=!0,s.showErrors(l)}o.valid=a,s.stopRequest(n,a)}},i)),"pending"}}}),t.format=t.validator.format}(jQuery),function(t){var e={};if(t.ajaxPrefilter)t.ajaxPrefilter(function(t,n,i){var o=t.port;"abort"===t.mode&&(e[o]&&e[o].abort(),e[o]=i)});else{var n=t.ajax;t.ajax=function(i){var o=("mode"in i?i:t.ajaxSettings).mode,s=("port"in i?i:t.ajaxSettings).port;return"abort"===o?(e[s]&&e[s].abort(),e[s]=n.apply(this,arguments),e[s]):n.apply(this,arguments)}}}(jQuery),function(t){t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var o=t(n.target);if(o.is(e))return i.apply(o,arguments)})}})}(jQuery),function(){function t(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'"_+=\/\-]*/g,"")}jQuery.validator.addMethod("maxWords",function(e,n,i){return this.optional(n)||t(e).match(/\b\w+\b/g).length<=i},jQuery.validator.format("Please enter {0} words or less.")),jQuery.validator.addMethod("minWords",function(e,n,i){return this.optional(n)||t(e).match(/\b\w+\b/g).length>=i},jQuery.validator.format("Please enter at least {0} words.")),jQuery.validator.addMethod("rangeWords",function(e,n,i){var o=t(e),s=/\b\w+\b/g;return this.optional(n)||o.match(s).length>=i[0]&&o.match(s).length<=i[1]},jQuery.validator.format("Please enter between {0} and {1} words."))}(),jQuery.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),jQuery.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),jQuery.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),jQuery.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),jQuery.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx"),jQuery.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/\d{5}-\d{4}$|^\d{5}$/.test(t)},"The specified US ZIP Code is invalid"),jQuery.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),jQuery.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;var e,n,i,o,s,a,r=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],u=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],c=0;for(e=0;e<17;e++){if(o=u[e],i=t.slice(e,e+1),8===e&&(a=i),isNaN(i)){for(n=0;n<r.length;n++)if(i.toUpperCase()===r[n]){i=l[n],i*=o,isNaN(a)&&8===n&&(a=r[n]);break}}else i*=o;c+=i}return 10===(s=c%11)&&(s="X"),s===a},"The specified vehicle identification number (VIN) is invalid."),jQuery.validator.addMethod("dateITA",function(t,e){var n=!1;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)){var i=t.split("/"),o=parseInt(i[0],10),s=parseInt(i[1],10),a=parseInt(i[2],10),r=new Date(a,s-1,o);n=r.getFullYear()===a&&r.getMonth()===s-1&&r.getDate()===o}else n=!1;return this.optional(e)||n},"Please enter a correct date"),jQuery.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(t))return!1;var n=t.replace(/ /g,"").toUpperCase(),i={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"}[n.substring(0,2)];if(void 0!==i){if(!new RegExp("^[A-Z]{2}\\d{2}"+i+"$","").test(n))return!1}for(var o,s=n.substring(4,n.length)+n.substring(0,4),a="",r=!0,l=0;l<s.length;l++)"0"!==(o=s.charAt(l))&&(r=!1),r||(a+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(o));for(var u="",c=0;c<a.length;c++){u=(""+u+a.charAt(c))%97}return 1===u},"Please specify a valid IBAN"),jQuery.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},"Please enter a correct date"),jQuery.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),jQuery.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),jQuery.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),jQuery.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;for(var n=t.replace(/ /g,""),i=0,o=n.length,s=0;s<o;s++){i+=(o-s)*n.substring(s,s+1)}return i%11==0},"Please specify a valid bank account number"),jQuery.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),jQuery.validator.addMethod("bankorgiroaccountNL",function(t,e){return this.optional(e)||$.validator.methods.bankaccountNL.call(this,t,e)||$.validator.methods.giroaccountNL.call(this,t,e)},"Please specify a valid bank or giro account number"),jQuery.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),jQuery.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),jQuery.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>9&&t.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)},"Please specify a valid phone number"),jQuery.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),jQuery.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[45789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),jQuery.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[45789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),jQuery.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),jQuery.validator.addMethod("strippedminlength",function(t,e,n){return jQuery(t).text().length>=n},jQuery.validator.format("Please enter at least {0} characters")),jQuery.validator.addMethod("email2",function(t,e,n){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(t)},jQuery.validator.messages.email),jQuery.validator.addMethod("url2",function(t,e,n){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},jQuery.validator.messages.url),jQuery.validator.addMethod("creditcardtypes",function(t,e,n){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var i=0;return n.mastercard&&(i|=1),n.visa&&(i|=2),n.amex&&(i|=4),n.dinersclub&&(i|=8),n.enroute&&(i|=16),n.discover&&(i|=32),n.jcb&&(i|=64),n.unknown&&(i|=128),n.all&&(i=255),1&i&&/^(5[12345])/.test(t)?16===t.length:2&i&&/^(4)/.test(t)?16===t.length:4&i&&/^(3[47])/.test(t)?15===t.length:8&i&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&i&&/^(2(014|149))/.test(t)?15===t.length:32&i&&/^(6011)/.test(t)?16===t.length:64&i&&/^(3)/.test(t)?16===t.length:64&i&&/^(2131|1800)/.test(t)?15===t.length:!!(128&i)},"Please enter a valid credit card number."),jQuery.validator.addMethod("ipv4",function(t,e,n){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),jQuery.validator.addMethod("ipv6",function(t,e,n){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),jQuery.validator.addMethod("pattern",function(t,e,n){return!!this.optional(e)||("string"==typeof n&&(n=new RegExp("^(?:"+n+")$")),n.test(t))},"Invalid format."),jQuery.validator.addMethod("require_from_group",function(t,e,n){var i=this,o=n[1],s=$(o,e.form).filter(function(){return i.elementValue(this)}).length>=n[0];if(!$(e).data("being_validated")){var a=$(o,e.form);a.data("being_validated",!0),a.valid(),a.data("being_validated",!1)}return s},jQuery.format("Please fill at least {0} of these fields.")),jQuery.validator.addMethod("skip_or_fill_minimum",function(t,e,n){var i=this,o=n[0],s=n[1],a=$(s,e.form).filter(function(){return i.elementValue(this)}).length,r=a>=o||0===a;if(!$(e).data("being_validated")){var l=$(s,e.form);l.data("being_validated",!0),l.valid(),l.data("being_validated",!1)}return r},jQuery.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("accept",function(t,e,n){var i,o="string"==typeof n?n.replace(/\s/g,"").replace(/,/g,"|"):"image/*",s=this.optional(e);if(s)return s;if("file"===$(e).attr("type")&&(o=o.replace(/\*/g,".*"),e.files&&e.files.length))for(i=0;i<e.files.length;i++)if(!e.files[i].type.match(new RegExp(".?("+o+")$","i")))return!1;return!0},jQuery.format("Please enter a value with a valid mimetype.")),jQuery.validator.addMethod("extension",function(t,e,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp(".("+n+")$","i"))},jQuery.format("Please enter a value with a valid extension.")),function(t,e,n,i){"use strict";var o=n("html"),s=n(t),a=n(e),r=n.fancybox=function(){r.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),u=null,c=void 0!==e.createTouch,h=function(t){return t&&t.hasOwnProperty&&t instanceof n},d=function(t){return t&&"string"===n.type(t)},p=function(t){return d(t)&&t.indexOf("%")>0},f=function(t){return t&&!(t.style.overflow&&"hidden"===t.style.overflow)&&(t.clientWidth&&t.scrollWidth>t.clientWidth||t.clientHeight&&t.scrollHeight>t.clientHeight)},g=function(t,e){var n=parseInt(t,10)||0;return e&&p(t)&&(n=r.getViewport()[e]/100*n),Math.ceil(n)},m=function(t,e){return g(t,e)+"px"};n.extend(r,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!c,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeChange:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){if(t&&(n.isPlainObject(e)||(e={}),!1!==r.close(!0)))return n.isArray(t)||(t=h(t)?n(t).get():[t]),n.each(t,function(i,o){var s,a,l,u,c,p,f,g={};"object"===n.type(o)&&(o.nodeType&&(o=n(o)),h(o)?(g={href:o.data("fancybox-href")||o.attr("href"),title:o.data("fancybox-title")||o.attr("title"),isDom:!0,element:o},n.metadata&&n.extend(!0,g,o.metadata())):g=o),s=e.href||g.href||(d(o)?o:null),a=void 0!==e.title?e.title:g.title||"",!(u=(l=e.content||g.content)?"html":e.type||g.type)&&g.isDom&&((u=o.data("fancybox-type"))||(u=(c=o.prop("class").match(/fancybox\.(\w+)/))?c[1]:null)),d(s)&&(u||(r.isImage(s)?u="image":r.isSWF(s)?u="swf":"#"===s.charAt(0)?u="inline":d(o)&&(u="html",l=o)),"ajax"===u&&(s=(p=s.split(/\s+/,2)).shift(),f=p.shift())),l||("inline"===u?s?l=n(d(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):g.isDom&&(l=o):"html"===u?l=s:u||s||!g.isDom||(u="inline",l=o)),n.extend(g,{href:s,type:u,content:l,title:a,selector:f}),t[i]=g}),r.opts=n.extend(!0,{},r.defaults,e),void 0!==e.keys&&(r.opts.keys=!!e.keys&&n.extend({},r.defaults.keys,e.keys)),r.group=t,r._start(r.opts.index)},cancel:function(){var t=r.coming;t&&!1!==r.trigger("onCancel")&&(r.hideLoading(),r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),r.coming=null,r.current||r._afterZoomOut(t))},close:function(t){r.cancel(),!1!==r.trigger("beforeClose")&&(r.unbindEvents(),r.isActive&&(r.isOpen&&!0!==t?(r.isOpen=r.isOpened=!1,r.isClosing=!0,n(".fancybox-item, .fancybox-nav").remove(),r.wrap.stop(!0,!0).removeClass("fancybox-opened"),r.transitions[r.current.closeMethod]()):(n(".fancybox-wrap").stop(!0).trigger("onReset").remove(),r._afterZoomOut())))},play:function(t){var e=function(){clearTimeout(r.player.timer)},n=function(){e(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},i=function(){e(),a.unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")};!0===t||!r.player.isActive&&!1!==t?r.current&&(r.current.loop||r.current.index<r.group.length-1)&&(r.player.isActive=!0,a.bind({"onCancel.player beforeClose.player":i,"onUpdate.player":n,"beforeLoad.player":e}),n(),r.trigger("onPlayStart")):i()},next:function(t){var e=r.current;e&&(d(t)||(t=e.direction.next),r.jumpto(e.index+1,t,"next"))},prev:function(t){var e=r.current;e&&(d(t)||(t=e.direction.prev),r.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,n){var i=r.current;i&&(t=g(t),r.direction=e||i.direction[t>=i.index?"next":"prev"],r.router=n||"jumpto",i.loop&&(t<0&&(t=i.group.length+t%i.group.length),t%=i.group.length),void 0!==i.group[t]&&(r.cancel(),r._start(t)))},reposition:function(t,e){var i,o=r.current,s=o?o.wrap:null;s&&(i=r._getPosition(e),t&&"scroll"===t.type?(delete i.position,s.stop(!0,!0).animate(i,200)):(s.css(i),o.pos=n.extend({},o.dim,i)))},update:function(t){var e=t&&t.type,n=!e||"orientationchange"===e;n&&(clearTimeout(u),u=null),r.isOpen&&!u&&(u=setTimeout(function(){var i=r.current;i&&!r.isClosing&&(r.wrap.removeClass("fancybox-tmp"),(n||"load"===e||"resize"===e&&i.autoResize)&&r._setDimension(),"scroll"===e&&i.canShrink||r.reposition(t),r.trigger("onUpdate"),u=null)},n&&!c?0:300))},toggle:function(t){r.isOpen&&(r.current.fitToView="boolean"===n.type(t)?t:!r.current.fitToView,c&&(r.wrap.removeAttr("style").addClass("fancybox-tmp"),r.trigger("onUpdate")),r.update())},hideLoading:function(){a.unbind(".loading"),n("#fancybox-loading").remove()},showLoading:function(){var t,e;r.hideLoading(),t=n('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body"),a.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),r.cancel())}),r.defaults.fixed||(e=r.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x}))},getViewport:function(){var e=r.current&&r.current.locked||!1,n={x:s.scrollLeft(),y:s.scrollTop()};return e?(n.w=e[0].clientWidth,n.h=e[0].clientHeight):(n.w=c&&t.innerWidth?t.innerWidth:s.width(),n.h=c&&t.innerHeight?t.innerHeight:s.height()),n},unbindEvents:function(){r.wrap&&h(r.wrap)&&r.wrap.unbind(".fb"),a.unbind(".fb"),s.unbind(".fb")},bindEvents:function(){var t,e=r.current;e&&(s.bind("orientationchange.fb"+(c?"":" resize.fb")+(e.autoCenter&&!e.locked?" scroll.fb":""),r.update),(t=e.keys)&&a.bind("keydown.fb",function(i){var o=i.which||i.keyCode,s=i.target||i.srcElement;if(27===o&&r.coming)return!1;i.ctrlKey||i.altKey||i.shiftKey||i.metaKey||s&&(s.type||n(s).is("[contenteditable]"))||n.each(t,function(t,s){return e.group.length>1&&void 0!==s[o]?(r[t](s[o]),i.preventDefault(),!1):n.inArray(o,s)>-1?(r[t](),i.preventDefault(),!1):void 0})}),n.fn.mousewheel&&e.mouseWheel&&r.wrap.bind("mousewheel.fb",function(t,i,o,s){for(var a=t.target||null,l=n(a),u=!1;l.length&&!(u||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)u=f(l[0]),l=n(l).parent();0===i||u||r.group.length>1&&!e.canShrink&&(s>0||o>0?r.prev(s>0?"down":"left"):(s<0||o<0)&&r.next(s<0?"up":"right"),t.preventDefault())}))},trigger:function(t,e){var i,o=e||r.coming||r.current;if(o){if(n.isFunction(o[t])&&(i=o[t].apply(o,Array.prototype.slice.call(arguments,1))),!1===i)return!1;o.helpers&&n.each(o.helpers,function(e,i){i&&r.helpers[e]&&n.isFunction(r.helpers[e][t])&&r.helpers[e][t](n.extend(!0,{},r.helpers[e].defaults,i),o)}),a.trigger(t)}},isImage:function(t){return d(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return d(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e,i,o,s,a,l={};if(t=g(t),!(e=r.group[t]||null))return!1;if(l=n.extend(!0,{},r.opts,e),s=l.margin,a=l.padding,"number"===n.type(s)&&(l.margin=[s,s,s,s]),"number"===n.type(a)&&(l.padding=[a,a,a,a]),l.modal&&n.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=r.group,l.index=t,r.coming=l,!1!==r.trigger("beforeLoad")){if(o=l.type,i=l.href,!o)return r.coming=null,!(!r.current||!r.router||"jumpto"===r.router)&&(r.current.index=t,r[r.router](r.direction));if(r.isActive=!0,"image"!==o&&"swf"!==o||(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===o&&(l.aspectRatio=!0),"iframe"===o&&c&&(l.scrolling="scroll"),l.wrap=n(l.tpl.wrap).addClass("fancybox-"+(c?"mobile":"desktop")+" fancybox-type-"+o+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),n.extend(l,{skin:n(".fancybox-skin",l.wrap),outer:n(".fancybox-outer",l.wrap),inner:n(".fancybox-inner",l.wrap)}),n.each(["Top","Right","Bottom","Left"],function(t,e){l.skin.css("padding"+e,m(l.padding[t]))}),r.trigger("onReady"),"inline"===o||"html"===o){if(!l.content||!l.content.length)return r._error("content")}else if(!i)return r._error("href");"image"===o?r._loadImage():"ajax"===o?r._loadAjax():"iframe"===o?r._loadIframe():r._afterLoad()}else r.coming=null},_error:function(t){n.extend(r.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){var t=r.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width/r.opts.pixelRatio,r.coming.height=this.height/r.opts.pixelRatio,r._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,r._error("image")},t.src=r.coming.href,!0!==t.complete&&r.showLoading()},_loadAjax:function(){var t=r.coming;r.showLoading(),r.ajaxLoad=n.ajax(n.extend({},t.ajax,{url:t.href,error:function(t,e){r.coming&&"abort"!==e?r._error("ajax",t):r.hideLoading()},success:function(e,n){"success"===n&&(t.content=e,r._afterLoad())}}))},_loadIframe:function(){var t=r.coming,e=n(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",c?"auto":t.iframe.scrolling).attr("src",t.href);n(t.wrap).bind("onReset",function(){try{n(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(r.showLoading(),e.one("load",function(){n(this).data("ready",1),c||n(this).bind("load.fb",r.update),n(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),r._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||r._afterLoad()},_preloadImages:function(){var t,e,n=r.group,i=r.current,o=n.length,s=i.preload?Math.min(i.preload,o-1):0;for(e=1;e<=s;e+=1)"image"===(t=n[(i.index+e)%o]).type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var t,e,i,o,s,a,l=r.coming,u=r.current,c="fancybox-placeholder";if(r.hideLoading(),l&&!1!==r.isActive){if(!1===r.trigger("afterLoad",l,u))return l.wrap.stop(!0).trigger("onReset").remove(),void(r.coming=null);switch(u&&(r.trigger("beforeChange",u),u.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),r.unbindEvents(),t=l,e=l.content,i=l.type,o=l.scrolling,n.extend(r,{wrap:t.wrap,skin:t.skin,outer:t.outer,inner:t.inner,current:t,previous:u}),s=t.href,i){case"inline":case"ajax":case"html":t.selector?e=n("<div>").html(e).find(t.selector):h(e)&&(e.data(c)||e.data(c,n('<div class="'+c+'"></div>').insertAfter(e).hide()),e=e.show().detach(),t.wrap.bind("onReset",function(){n(this).find(e).length&&e.hide().replaceAll(e.data(c)).data(c,!1)}));break;case"image":e=t.tpl.image.replace("{href}",s);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>',a="",n.each(t.swf,function(t,n){e+='<param name="'+t+'" value="'+n+'"></param>',a+=" "+t+'="'+n+'"'}),e+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+a+"></embed></object>"}h(e)&&e.parent().is(t.inner)||t.inner.append(e),r.trigger("beforeShow"),t.inner.css("overflow","yes"===o?"scroll":"no"===o?"hidden":o),r._setDimension(),r.reposition(),r.isOpen=!1,r.coming=null,r.bindEvents(),r.isOpened?u.prevMethod&&r.transitions[u.prevMethod]():n(".fancybox-wrap").not(t.wrap).stop(!0).trigger("onReset").remove(),r.transitions[r.isOpened?t.nextMethod:t.openMethod](),r._preloadImages()}},_setDimension:function(){var t,e,i,o,s,a,l,u,c,h,d,f,v,y,b,w=r.getViewport(),_=0,x=!1,k=!1,C=r.wrap,F=r.skin,S=r.inner,T=r.current,D=T.width,A=T.height,E=T.minWidth,$=T.minHeight,O=T.maxWidth,I=T.maxHeight,M=T.scrolling,N=T.scrollOutside?T.scrollbarWidth:0,j=T.margin,P=g(j[1]+j[3]),R=g(j[0]+j[2]);if(C.add(F).add(S).width("auto").height("auto").removeClass("fancybox-tmp"),t=g(F.outerWidth(!0)-F.width()),e=g(F.outerHeight(!0)-F.height()),i=P+t,o=R+e,s=p(D)?(w.w-i)*g(D)/100:D,a=p(A)?(w.h-o)*g(A)/100:A,"iframe"===T.type){if(y=T.content,T.autoHeight&&1===y.data("ready"))try{y[0].contentWindow.document.location&&(S.width(s).height(9999),b=y.contents().find("body"),N&&b.css("overflow-x","hidden"),a=b.outerHeight(!0))}catch(t){}}else(T.autoWidth||T.autoHeight)&&(S.addClass("fancybox-tmp"),T.autoWidth||S.width(s),T.autoHeight||S.height(a),T.autoWidth&&(s=S.width()),T.autoHeight&&(a=S.height()),S.removeClass("fancybox-tmp"));if(D=g(s),A=g(a),c=s/a,E=g(p(E)?g(E,"w")-i:E),O=g(p(O)?g(O,"w")-i:O),$=g(p($)?g($,"h")-o:$),I=g(p(I)?g(I,"h")-o:I),l=O,u=I,T.fitToView&&(O=Math.min(w.w-i,O),I=Math.min(w.h-o,I)),f=w.w-P,v=w.h-R,T.aspectRatio?(D>O&&(A=g((D=O)/c)),A>I&&(D=g((A=I)*c)),D<E&&(A=g((D=E)/c)),A<$&&(D=g((A=$)*c))):(D=Math.max(E,Math.min(D,O)),T.autoHeight&&"iframe"!==T.type&&(S.width(D),A=S.height()),A=Math.max($,Math.min(A,I))),T.fitToView)if(S.width(D).height(A),C.width(D+t),h=C.width(),d=C.height(),T.aspectRatio)for(;(h>f||d>v)&&D>E&&A>$&&!(_++>19);)A=Math.max($,Math.min(I,A-10)),(D=g(A*c))<E&&(A=g((D=E)/c)),D>O&&(A=g((D=O)/c)),S.width(D).height(A),C.width(D+t),h=C.width(),d=C.height();else D=Math.max(E,Math.min(D,D-(h-f))),A=Math.max($,Math.min(A,A-(d-v)));N&&"auto"===M&&A<a&&D+t+N<f&&(D+=N),S.width(D).height(A),C.width(D+t),h=C.width(),d=C.height(),x=(h>f||d>v)&&D>E&&A>$,k=T.aspectRatio?D<l&&A<u&&D<s&&A<a:(D<l||A<u)&&(D<s||A<a),n.extend(T,{dim:{width:m(h),height:m(d)},origWidth:s,origHeight:a,canShrink:x,canExpand:k,wPadding:t,hPadding:e,wrapSpace:d-F.outerHeight(!0),skinSpace:F.height()-A}),!y&&T.autoHeight&&A>$&&A<I&&!k&&S.height("auto")},_getPosition:function(t){var e=r.current,n=r.getViewport(),i=e.margin,o=r.wrap.width()+i[1]+i[3],s=r.wrap.height()+i[0]+i[2],a={position:"absolute",top:i[0],left:i[3]};return e.autoCenter&&e.fixed&&!t&&s<=n.h&&o<=n.w?a.position="fixed":e.locked||(a.top+=n.y,a.left+=n.x),a.top=m(Math.max(a.top,a.top+(n.h-s)*e.topRatio)),a.left=m(Math.max(a.left,a.left+(n.w-o)*e.leftRatio)),a},_afterZoomIn:function(){var t=r.current;t&&(r.isOpen=r.isOpened=!0,r.wrap.css("overflow","visible").addClass("fancybox-opened"),r.update(),(t.closeClick||t.nextClick&&r.group.length>1)&&r.inner.css("cursor","pointer").bind("click.fb",function(e){n(e.target).is("a")||n(e.target).parent().is("a")||(e.preventDefault(),r[t.closeClick?"close":"next"]())}),t.closeBtn&&n(t.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(t){t.preventDefault(),r.close()}),t.arrows&&r.group.length>1&&((t.loop||t.index>0)&&n(t.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev),(t.loop||t.index<r.group.length-1)&&n(t.tpl.next).appendTo(r.outer).bind("click.fb",r.next)),r.trigger("afterShow"),t.loop||t.index!==t.group.length-1?r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play()):r.play(!1))},_afterZoomOut:function(t){t=t||r.current,n(".fancybox-wrap").trigger("onReset").remove(),n.extend(r,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),r.trigger("afterClose",t)}}),r.transitions={getOrigPosition:function(){var t=r.current,e=t.element,n=t.orig,i={},o=50,s=50,a=t.hPadding,l=t.wPadding,u=r.getViewport();return!n&&t.isDom&&e.is(":visible")&&((n=e.find("img:first")).length||(n=e)),h(n)?(i=n.offset(),n.is("img")&&(o=n.outerWidth(),s=n.outerHeight())):(i.top=u.y+(u.h-s)*t.topRatio,i.left=u.x+(u.w-o)*t.leftRatio),("fixed"===r.wrap.css("position")||t.locked)&&(i.top-=u.y,i.left-=u.x),i={top:m(i.top-a*t.topRatio),left:m(i.left-l*t.leftRatio),width:m(o+l),height:m(s+a)}},step:function(t,e){var n,i,o=e.prop,s=r.current,a=s.wrapSpace,l=s.skinSpace;"width"!==o&&"height"!==o||(n=e.end===e.start?1:(t-e.start)/(e.end-e.start),r.isClosing&&(n=1-n),i=t-("width"===o?s.wPadding:s.hPadding),r.skin[o](g("width"===o?i:i-a*n)),r.inner[o](g("width"===o?i:i-a*n-l*n)))},zoomIn:function(){var t=r.current,e=t.pos,i=t.openEffect,o="elastic"===i,s=n.extend({opacity:1},e);delete s.position,o?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===i&&(e.opacity=.1),r.wrap.css(e).animate(s,{duration:"none"===i?0:t.openSpeed,easing:t.openEasing,step:o?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var t=r.current,e=t.closeEffect,n="elastic"===e,i={opacity:.1};n&&(i=this.getOrigPosition(),t.closeOpacity&&(i.opacity=.1)),r.wrap.animate(i,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:n?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var t,e=r.current,n=e.nextEffect,i=e.pos,o={opacity:1},s=r.direction;i.opacity=.1,"elastic"===n&&(t="down"===s||"up"===s?"top":"left","down"===s||"right"===s?(i[t]=m(g(i[t])-200),o[t]="+=200px"):(i[t]=m(g(i[t])+200),o[t]="-=200px")),"none"===n?r._afterZoomIn():r.wrap.css(i).animate(o,{duration:e.nextSpeed,easing:e.nextEasing,complete:r._afterZoomIn})},changeOut:function(){var t=r.previous,e=t.prevEffect,i={opacity:.1},o=r.direction;"elastic"===e&&(i["down"===o||"up"===o?"top":"left"]=("up"===o||"left"===o?"-":"+")+"=200px"),t.wrap.animate(i,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){n(this).trigger("onReset").remove()}})}},r.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!c,fixed:!0},overlay:null,fixed:!1,el:n("html"),create:function(t){t=n.extend({},this.defaults,t),this.overlay&&this.close(),this.overlay=n('<div class="fancybox-overlay"></div>').appendTo(r.coming?r.coming.parent:t.parent),this.fixed=!1,t.fixed&&r.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=n.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(s.bind("resize.overlay",n.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){if(n(t.target).hasClass("fancybox-overlay"))return r.isActive?r.close():e.close(),!1}),this.overlay.css(t.css).show()},close:function(){var t,e;s.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(n(".fancybox-margin").removeClass("fancybox-margin"),t=s.scrollTop(),e=s.scrollLeft(),this.el.removeClass("fancybox-lock"),s.scrollTop(t).scrollLeft(e)),n(".fancybox-overlay").remove().hide(),n.extend(this,{overlay:null,fixed:!1})},update:function(){var t,n="100%";this.overlay.width(n).height("100%"),l?(t=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),a.width()>t&&(n=a.width())):a.width()>s.width()&&(n=a.width()),this.overlay.width(n).height(a.height())},onReady:function(t,e){var i=this.overlay;n(".fancybox-overlay").stop(!0,!0),i||this.create(t),t.locked&&this.fixed&&e.fixed&&(i||(this.margin=a.height()>s.height()&&n("html").css("margin-right").replace("px","")),e.locked=this.overlay.append(e.wrap),e.fixed=!1),!0===t.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){var i,o;e.locked&&(!1!==this.margin&&(n("*").filter(function(){return"fixed"===n(this).css("position")&&!n(this).hasClass("fancybox-overlay")&&!n(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),i=s.scrollTop(),o=s.scrollLeft(),this.el.addClass("fancybox-lock"),s.scrollTop(i).scrollLeft(o)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!r.coming&&this.overlay.fadeOut(t.speedOut,n.proxy(this.close,this))}},r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e,i,o=r.current,s=o.title,a=t.type;if(n.isFunction(s)&&(s=s.call(o.element,o)),d(s)&&""!==n.trim(s)){switch(e=n('<div class="fancybox-title fancybox-title-'+a+'-wrap">'+s+"</div>"),a){case"inside":i=r.skin;break;case"outside":i=r.wrap;break;case"over":i=r.inner;break;default:i=r.skin,e.appendTo("body"),l&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(g(e.css("margin-bottom")))}e["top"===t.position?"prependTo":"appendTo"](i)}}},n.fn.fancybox=function(t){var e,i=n(this),o=this.selector||"",s=function(s){var a,l,u=n(this).blur(),c=e;s.ctrlKey||s.altKey||s.shiftKey||s.metaKey||u.is(".fancybox-wrap")||(a=t.groupAttr||"data-fancybox-group",(l=u.attr(a))||(a="rel",l=u.get(0)[a]),l&&""!==l&&"nofollow"!==l&&(c=(u=(u=o.length?n(o):i).filter("["+a+'="'+l+'"]')).index(this)),t.index=c,!1!==r.open(u,t)&&s.preventDefault())};return t=t||{},e=t.index||0,o&&!1!==t.live?a.undelegate(o,"click.fb-start").delegate(o+":not('.fancybox-item, .fancybox-nav')","click.fb-start",s):i.unbind("click.fb-start").bind("click.fb-start",s),this.filter("[data-fancybox-start=1]").trigger("click"),this},a.ready(function(){var e,i;void 0===n.scrollbarWidth&&(n.scrollbarWidth=function(){var t=n('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),i=e.innerWidth()-e.height(99).innerWidth();return t.remove(),i}),void 0===n.support.fixedPosition&&(n.support.fixedPosition=function(){var t=n('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop;return t.remove(),e}()),n.extend(r.defaults,{scrollbarWidth:n.scrollbarWidth(),fixed:n.support.fixedPosition,parent:n("body")}),e=n(t).width(),o.addClass("fancybox-lock-test"),i=n(t).width(),o.removeClass("fancybox-lock-test"),n("<style type='text/css'>.fancybox-margin{margin-right:"+(i-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){var e=function(e,n,i){var o={invalid:[],getCaret:function(){try{var t,n=0,i=e.get(0),s=document.selection,a=i.selectionStart;return s&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=s.createRange()).moveStart("character",-o.val().length),n=t.text.length):(a||"0"===a)&&(n=a),n}catch(t){}},setCaret:function(t){try{if(e.is(":focus")){var n,i=e.get(0);i.setSelectionRange?(i.focus(),i.setSelectionRange(t,t)):((n=i.createTextRange()).collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select())}}catch(t){}},events:function(){e.on("keydown.mask",function(t){e.data("mask-keycode",t.keyCode||t.which)}).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",o.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){r===o.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){r=o.val()}).on("focus.mask",function(e){!0===i.selectOnFocus&&t(e.target).select()}).on("focusout.mask",function(){i.clearIfNotMatch&&!s.test(o.val())&&o.val("")})},getRegexMask:function(){for(var t,e,i,o,s=[],r=0;r<n.length;r++)(t=a.translation[n.charAt(r)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),i=t.optional,(t=t.recursive)?(s.push(n.charAt(r)),o={digit:n.charAt(r),pattern:e}):s.push(i||t?e+"?":e)):s.push(n.charAt(r).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return s=s.join(""),o&&(s=s.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(s)},destroyEvents:function(){e.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var n=e.is("input")?"val":"text";return 0<arguments.length?(e[n]()!==t&&e[n](t),n=e):n=e[n](),n},getMCharsBeforeCount:function(t,e){for(var i=0,o=0,s=n.length;o<s&&o<t;o++)a.translation[n.charAt(o)]||(t=e?t+1:t,i++);return i},caretPos:function(t,e,i,s){return a.translation[n.charAt(Math.min(t-1,n.length-1))]?Math.min(t+i-e-s,i):o.caretPos(t+1,e,i,s)},behaviour:function(n){n=n||window.event,o.invalid=[];var i=e.data("mask-keycode");if(-1===t.inArray(i,a.byPassKeys)){var s=o.getCaret(),r=o.val().length,l=o.getMasked(),u=l.length,c=o.getMCharsBeforeCount(u-1)-o.getMCharsBeforeCount(r-1),h=s<r;return o.val(l),h&&(8!==i&&46!==i&&(s=o.caretPos(s,r,u,c)),o.setCaret(s)),o.callbacks(n)}},getMasked:function(t,e){var s,r,l=[],u=void 0===e?o.val():e+"",c=0,h=n.length,d=0,p=u.length,f=1,g="push",m=-1;for(i.reverse?(g="unshift",f=-1,s=0,c=h-1,d=p-1,r=function(){return-1<c&&-1<d}):(s=h-1,r=function(){return c<h&&d<p});r();){var v=n.charAt(c),y=u.charAt(d),b=a.translation[v];b?(y.match(b.pattern)?(l[g](y),b.recursive&&(-1===m?m=c:c===s&&(c=m-f),s===m&&(c-=f)),c+=f):b.optional?(c+=f,d-=f):b.fallback?(l[g](b.fallback),c+=f,d-=f):o.invalid.push({p:d,v:y,e:b.pattern}),d+=f):(t||l[g](v),y===v&&(d+=f),c+=f)}return u=n.charAt(s),h!==p+1||a.translation[u]||l.push(u),l.join("")},callbacks:function(t){var s=o.val(),a=s!==r,l=[s,t,e,i],u=function(t,e,n){"function"==typeof i[t]&&e&&i[t].apply(this,n)};u("onChange",!0===a,l),u("onKeyPress",!0===a,l),u("onComplete",s.length===n.length,l),u("onInvalid",0<o.invalid.length,[s,t,e,o.invalid,i])}};e=t(e);var s,a=this,r=o.val();n="function"==typeof n?n(o.val(),void 0,e,i):n,a.mask=n,a.options=i,a.remove=function(){var t=o.getCaret();return o.destroyEvents(),o.val(a.getCleanVal()),o.setCaret(t-o.getMCharsBeforeCount(t)),e},a.getCleanVal=function(){return o.getMasked(!0)},a.getMaskedVal=function(t){return o.getMasked(!1,t)},a.init=function(n){n=n||!1,i=i||{},a.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,a.byPassKeys=t.jMaskGlobals.byPassKeys,a.translation=t.extend({},t.jMaskGlobals.translation,i.translation),a=t.extend(!0,{},a,i),s=o.getRegexMask(),!1===n?(i.placeholder&&e.attr("placeholder",i.placeholder),e.data("mask")&&e.attr("autocomplete","off"),o.destroyEvents(),o.events(),n=o.getCaret(),o.val(o.getMasked()),o.setCaret(n+o.getMCharsBeforeCount(n,!0))):(o.events(),o.val(o.getMasked()))},a.init(!e.is("input"))};t.maskWatchers={};var n=function(){var n=t(this),o={},s=n.attr("data-mask");if(n.attr("data-mask-reverse")&&(o.reverse=!0),n.attr("data-mask-clearifnotmatch")&&(o.clearIfNotMatch=!0),"true"===n.attr("data-mask-selectonfocus")&&(o.selectOnFocus=!0),i(n,s,o))return n.data("mask",new e(this,s,o))},i=function(e,n,i){i=i||{};var o=t(e).data("mask"),s=JSON.stringify;e=t(e).val()||t(e).text();try{return"function"==typeof n&&(n=n(e)),"object"!=typeof o||s(o.options)!==s(i)||o.mask!==n}catch(t){}};t.fn.mask=function(n,o){o=o||{};var s=this.selector,a=(r=t.jMaskGlobals).watchInterval,r=o.watchInputs||r.watchInputs,l=function(){if(i(this,n,o))return t(this).data("mask",new e(this,n,o))};return t(this).each(l),s&&""!==s&&r&&(clearInterval(t.maskWatchers[s]),t.maskWatchers[s]=setInterval(function(){t(document).find(s).each(l)},a)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){((e=e||t.jMaskGlobals.maskElements)instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(n)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:function(t){var e,n=document.createElement("div");return t="on"+t,(e=t in n)||(n.setAttribute(t,"return;"),e="function"==typeof n[t]),e}("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},(o=t.jMaskGlobals=t.extend(!0,{},o,t.jMaskGlobals)).dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},o.watchInterval)}),function(t){"use strict";var e;e=t.fn.on?function(e,n,i){t("body").on(n,e,i)}:t.fn.delegate?function(e,n,i){t("body").delegate(e,n,i)}:t.fn.live?function(e,n,i){t(e).live(n,i)}:function(e,n,i){t(e).bind(n,i)},t.fn.example=function(n,i){var o=t.isFunction(n),s=t.extend({},i,{example:n});return this.each(function(){var n,i=t(this);n=t.metadata?t.extend({},t.fn.example.defaults,i.metadata(),s):t.extend({},t.fn.example.defaults,s),t.fn.example.boundClassNames[n.className]||(t(window).bind("unload.example",function(){t("."+n.className).val("").removeClass(n.className)}),e("form","submit.example example:resetForm",function(){t(this).find("."+n.className).val("").removeClass(n.className)}),t.fn.example.boundClassNames[n.className]=!0),i.val()!==this.defaultValue&&(o||i.val()===n.example)&&i.val(this.defaultValue),""===i.val()&&!i.is(":focus")&&i.addClass(n.className).val(o?n.example.call(this):n.example),i.bind("focus.example",function(){t(this).is("."+n.className)&&t(this).val("").removeClass(n.className)}).bind("change.example",function(){t(this).is("."+n.className)&&t(this).removeClass(n.className)}).bind("blur.example",function(){""===t(this).val()&&t(this).addClass(n.className).val(o?n.example.call(this):n.example)})})},t.fn.example.defaults={className:"example"},t.fn.example.boundClassNames=[]}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(t.jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){t.each(e,function(t,e){return n(e,t)})},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,o){if(!(i=n.call(null,o,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,o){if(i=n.call(null,o,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){return t.isFunction(e)?e:function(){return String(e)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,o;return function(){var s,a,r=this,l=arguments;return s=function(){i=null,n||(o=t.apply(r,l))},a=n&&!i,clearTimeout(i),i=setTimeout(s,e),a&&(o=t.apply(r,l)),o}},throttle:function(t,e){var n,i,o,s,a,r;return a=0,r=function(){a=new Date,o=null,s=t.apply(n,i)},function(){var l=new Date,u=e-(l-a);return n=this,i=arguments,u<=0?(clearTimeout(o),o=null,a=l,s=t.apply(n,i)):o||(o=setTimeout(r,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},guid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+t()+t(!0)+t(!0)+t()},noop:function(){}}}(),n="1.1.1",i=function(){"use strict";function t(t){return(t=e.toStr(t))?t.split(/\s+/):[]}function n(t){return(t=e.toStr(t))?t.split(/\W+/):[]}function i(t){t=e.toStr(t);var n=[],i="";return e.each(t.split(""),function(t){t.match(/\s+/)?i="":(n.push(i+t),i+=t)}),n}function o(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var o=[];return e.each(n,function(n){o=o.concat(t(e.toStr(i[n])))}),o}}}return{nonword:n,whitespace:t,ngram:i,obj:{nonword:o(n),whitespace:o(t),ngram:o(i)}}}(),o=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new function(t,e){this.key=t,this.val=e,this.prev=this.next=null}(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){"use strict";function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||a,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function o(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}var a;try{(a=window.localStorage).setItem("~~~","!"),a.removeItem("~~~")}catch(t){a=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,n,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),o(i()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),o(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=function(t){var e,n,i=[],o=a.length;for(e=0;e<o;e++)(n=a.key(e)).match(t)&&i.push(n.replace(t,""));return i}(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=s(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&i()>n)}}),n}(),a=function(){"use strict";function n(t){t=t||{},this.maxPendingRequests=t.maxPendingRequests||6,this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new o(0):a}var i=0,s={},a=new o(10);return n.setMaxPendingRequests=function(t){this.maxPendingRequests=t},n.resetCache=function(){a.reset()},e.mixin(n.prototype,{_fingerprint:function(e){return(e=e||{}).url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),l._cache.set(a,t)}function o(){e(!0)}var a,r,l=this;a=this._fingerprint(t),this.cancelled||a!==this.lastReq||((r=s[a])?r.done(n).fail(o):i<this.maxPendingRequests?(i++,s[a]=this._send(t).done(n).fail(o).always(function(){i--,delete s[a],l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var o,s;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(o=this._cache.get(s))?i(null,o):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),r=window.SearchIndex=function(){"use strict";function n(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.matchAnyQueryToken=n.matchAnyQueryToken,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function o(){var t={};return t[a]=[],t[s]={},t}var s="c",a="i";return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,l;n.datums[r=n.identify(t)]=t,l=i(n.datumTokenizer(t)),e.each(l,function(t){var e,i,l;for(e=n.trie,i=t.split("");l=i.shift();)(e=e[s][l]||(e[s][l]=o()))[a].push(r)})})},get:function(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function(t){var n,o,r=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,l;if(o&&0===o.length&&!r.matchAnyQueryToken)return!1;for(e=r.trie,n=t.split("");e&&(i=n.shift());)e=e[s][i];if(e&&0===n.length)l=e[a].slice(0),o=o?function(t,e){var n=0,i=0,o=[];t=t.sort(),e=e.sort();for(var s=t.length,a=e.length;n<s&&i<a;)t[n]<e[i]?n++:t[n]>e[i]?i++:(o.push(t[n]),n++,i++);return o}(o,l):l;else if(!r.matchAnyQueryToken)return o=[],!1}),o?e.map(function(t){for(var e={},n=[],i=0,o=t.length;i<o;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}(o),function(t){return r.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){var e,n=this;t&&(e=this.prepare(this._settings()),this.transport(e).fail(function(){t(!0)}).done(function(e){t(null,n.transform(e))}))},clear:function(){return this.storage.clear(),this}}),t}(),u=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.indexResponse=t.indexResponse,this.transport=new a({cache:t.cache,limiter:t.limiter,transport:t.transport,maxPendingRequests:t.maxPendingRequests})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){var n,i=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,function(t,n){e(t?[]:i.transform(n))})},cancelLastRequest:function(){this.transport.cancel()}}),t}(),c=function(){"use strict";function i(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,!(n=e.mixin(i,n)).url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=function(t){var e,n,i;if(e=t.prepare,n=t.replace,i=t.wildcard,e)return e;e=n?function(t,e){return e.url=n(e.url,t),e}:t.wildcard?function(t,e){return e.url=e.url.replace(i,encodeURIComponent(t)),e}:function(t,e){return e};return e}(n),n.limiter=function(t){var n,i,o;n=t.limiter,i=t.rateLimitBy,o=t.rateLimitWait,n||(n=/^throttle$/i.test(i)?function(t){return function(n){return e.throttle(n,t)}}(o):function(t){return function(n){return e.debounce(n,t)}}(o));return n}(n),n.transport=n.transport?o(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function o(n){return function(i){var o=t.Deferred();return n(i,function(t){e.defer(function(){o.resolve(t)})},function(t){e.defer(function(){o.reject(t)})}),o}}return function(s){var a,r;return a={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,matchAnyQueryToken:!1,sufficient:5,indexRemote:!1,sorter:null,local:[],prefetch:null,remote:null},!(s=e.mixin(a,s||{})).datumTokenizer&&t.error("datumTokenizer is required"),!s.queryTokenizer&&t.error("queryTokenizer is required"),r=s.sorter,s.sorter=r?function(t){return t.sort(r)}:e.identity,s.local=e.isFunction(s.local)?s.local():s.local,s.prefetch=function(i){var s;return i?(s={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,!(i=e.mixin(s,i)).url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?o(i.transport):t.ajax,i):null}(s.prefetch),s.remote=i(s.remote),s}}();return function(){"use strict";function n(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.indexRemote=t.indexRemote,this.local=t.local,this.remote=t.remote?new u(t.remote):null,this.prefetch=t.prefetch?new l(t.prefetch):null,this.index=new r({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}var o;return o=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=o),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function(){var t=this;return this.remote?function(e,n,i){return t.search(e,n,i)}:function(e,n){return t.search(e,n)}},_loadPrefetch:function(){var e,n,i=this;return e=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),e.resolve()):this.prefetch.fromNetwork(function(t,n){if(t)return e.reject();i.add(n),i.prefetch.store(i.index.serialize()),e.resolve()}):e.resolve(),e.promise()},_initialize:function(){var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){t.add(t.local)}),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){var o,s=this;return n=n||e.noop,i=i||e.noop,o=this.sorter(this.index.search(t)),n(this.remote?o.slice():o),this.remote&&o.length<this.sufficient?this.remote.get(t,function(t){var n=[];e.each(t,function(t){!e.some(o,function(e){return s.identify(t)===s.identify(e)})&&n.push(t)}),s.indexRemote&&s.add(n),i(n)}):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return a.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}()}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){t.each(e,function(t,e){return n(e,t)})},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,o){if(!(i=n.call(null,o,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,o){if(i=n.call(null,o,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){return t.isFunction(e)?e:function(){return String(e)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,o;return function(){var s,a,r=this,l=arguments;return s=function(){i=null,n||(o=t.apply(r,l))},a=n&&!i,clearTimeout(i),i=setTimeout(s,e),a&&(o=t.apply(r,l)),o}},throttle:function(t,e){var n,i,o,s,a,r;return a=0,r=function(){a=new Date,o=null,s=t.apply(n,i)},function(){var l=new Date,u=e-(l-a);return n=this,i=arguments,u<=0?(clearTimeout(o),o=null,a=l,s=t.apply(n,i)):o||(o=setTimeout(r,u)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},guid:function(){function t(t){var e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e}return"tt-"+t()+t(!0)+t(!0)+t()},noop:function(){}}}(),n=function(){"use strict";var t={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(n){var i,o;return o=e.mixin({},t,n),i={css:function(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}(),classes:o,html:function(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div role="listbox" class="'+t.menu+'"></div>'}}(o),selectors:function(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}(o)},{css:i.css,html:i.html,classes:i.classes,selectors:i.selectors,mixin:function(t){e.mixin(t,i)}}}}(),i=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i;return"typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var i=t.Event("typeahead:"+e);return this.$el.trigger.call(this.$el,i,n||[]),i},before:function(t){var e;return e=[].slice.call(arguments,1),this._trigger("before"+t,e).isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=i[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),o=function(){"use strict";function t(t,e,i,o){var s;if(!i)return this;for(e=e.split(n),i=o?function(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}(i,o):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(t,e,n){return function(){for(var i,o=0,s=t.length;!i&&o<s;o+=1)i=!1===t[o].apply(e,n);return!i}}var n=/\s+/,i=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)};return{onSync:function(e,n,i){return t.call(this,"sync",e,n,i)},onAsync:function(e,n,i){return t.call(this,"async",e,n,i)},off:function(t){var e;if(!this._callbacks)return this;for(t=t.split(n);e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var o,s,a,r,l;if(!this._callbacks)return this;for(t=t.split(n),a=[].slice.call(arguments,1);(o=t.shift())&&(s=this._callbacks[o]);)r=e(s.sync,this,[o].concat(a)),l=e(s.async,this,[o].concat(a)),r()&&i(l);return this}}}(),s=function(t){"use strict";function n(t){return o[t.toUpperCase()]||t}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1,diacriticInsensitive:!1},o={A:"[Aa\xaa\xc0-\xc5\xe0-\xe5\u0100-\u0105\u01cd\u01ce\u0200-\u0203\u0226\u0227\u1d2c\u1d43\u1e00\u1e01\u1e9a\u1ea0-\u1ea3\u2090\u2100\u2101\u213b\u249c\u24b6\u24d0\u3371-\u3374\u3380-\u3384\u3388\u3389\u33a9-\u33af\u33c2\u33ca\u33df\u33ff\uff21\uff41]",B:"[Bb\u1d2e\u1d47\u1e02-\u1e07\u212c\u249d\u24b7\u24d1\u3374\u3385-\u3387\u33c3\u33c8\u33d4\u33dd\uff22\uff42]",C:"[Cc\xc7\xe7\u0106-\u010d\u1d9c\u2100\u2102\u2103\u2105\u2106\u212d\u216d\u217d\u249e\u24b8\u24d2\u3376\u3388\u3389\u339d\u33a0\u33a4\u33c4-\u33c7\uff23\uff43]",D:"[Dd\u010e\u010f\u01c4-\u01c6\u01f1-\u01f3\u1d30\u1d48\u1e0a-\u1e13\u2145\u2146\u216e\u217e\u249f\u24b9\u24d3\u32cf\u3372\u3377-\u3379\u3397\u33ad-\u33af\u33c5\u33c8\uff24\uff44]",E:"[Ee\xc8-\xcb\xe8-\xeb\u0112-\u011b\u0204-\u0207\u0228\u0229\u1d31\u1d49\u1e18-\u1e1b\u1eb8-\u1ebd\u2091\u2121\u212f\u2130\u2147\u24a0\u24ba\u24d4\u3250\u32cd\u32ce\uff25\uff45]",F:"[Ff\u1da0\u1e1e\u1e1f\u2109\u2131\u213b\u24a1\u24bb\u24d5\u338a-\u338c\u3399\ufb00-\ufb04\uff26\uff46]",G:"[Gg\u011c-\u0123\u01e6\u01e7\u01f4\u01f5\u1d33\u1d4d\u1e20\u1e21\u210a\u24a2\u24bc\u24d6\u32cc\u32cd\u3387\u338d-\u338f\u3393\u33ac\u33c6\u33c9\u33d2\u33ff\uff27\uff47]",H:"[Hh\u0124\u0125\u021e\u021f\u02b0\u1d34\u1e22-\u1e2b\u1e96\u210b-\u210e\u24a3\u24bd\u24d7\u32cc\u3371\u3390-\u3394\u33ca\u33cb\u33d7\uff28\uff48]",I:"[Ii\xcc-\xcf\xec-\xef\u0128-\u0130\u0132\u0133\u01cf\u01d0\u0208-\u020b\u1d35\u1d62\u1e2c\u1e2d\u1ec8-\u1ecb\u2071\u2110\u2111\u2139\u2148\u2160-\u2163\u2165-\u2168\u216a\u216b\u2170-\u2173\u2175-\u2178\u217a\u217b\u24a4\u24be\u24d8\u337a\u33cc\u33d5\ufb01\ufb03\uff29\uff49]",J:"[Jj\u0132-\u0135\u01c7-\u01cc\u01f0\u02b2\u1d36\u2149\u24a5\u24bf\u24d9\u2c7c\uff2a\uff4a]",K:"[Kk\u0136\u0137\u01e8\u01e9\u1d37\u1d4f\u1e30-\u1e35\u212a\u24a6\u24c0\u24da\u3384\u3385\u3389\u338f\u3391\u3398\u339e\u33a2\u33a6\u33aa\u33b8\u33be\u33c0\u33c6\u33cd-\u33cf\uff2b\uff4b]",L:"[Ll\u0139-\u0140\u01c7-\u01c9\u02e1\u1d38\u1e36\u1e37\u1e3a-\u1e3d\u2112\u2113\u2121\u216c\u217c\u24a7\u24c1\u24db\u32cf\u3388\u3389\u33d0-\u33d3\u33d5\u33d6\u33ff\ufb02\ufb04\uff2c\uff4c]",M:"[Mm\u1d39\u1d50\u1e3e-\u1e43\u2120\u2122\u2133\u216f\u217f\u24a8\u24c2\u24dc\u3377-\u3379\u3383\u3386\u338e\u3392\u3396\u3399-\u33a8\u33ab\u33b3\u33b7\u33b9\u33bd\u33bf\u33c1\u33c2\u33ce\u33d0\u33d4-\u33d6\u33d8\u33d9\u33de\u33df\uff2d\uff4d]",N:"[Nn\xd1\xf1\u0143-\u0149\u01ca-\u01cc\u01f8\u01f9\u1d3a\u1e44-\u1e4b\u207f\u2115\u2116\u24a9\u24c3\u24dd\u3381\u338b\u339a\u33b1\u33b5\u33bb\u33cc\u33d1\uff2e\uff4e]",O:"[Oo\xba\xd2-\xd6\xf2-\xf6\u014c-\u0151\u01a0\u01a1\u01d1\u01d2\u01ea\u01eb\u020c-\u020f\u022e\u022f\u1d3c\u1d52\u1ecc-\u1ecf\u2092\u2105\u2116\u2134\u24aa\u24c4\u24de\u3375\u33c7\u33d2\u33d6\uff2f\uff4f]",P:"[Pp\u1d3e\u1d56\u1e54-\u1e57\u2119\u24ab\u24c5\u24df\u3250\u3371\u3376\u3380\u338a\u33a9-\u33ac\u33b0\u33b4\u33ba\u33cb\u33d7-\u33da\uff30\uff50]",Q:"[Qq\u211a\u24ac\u24c6\u24e0\u33c3\uff31\uff51]",R:"[Rr\u0154-\u0159\u0210-\u0213\u02b3\u1d3f\u1d63\u1e58-\u1e5b\u1e5e\u1e5f\u20a8\u211b-\u211d\u24ad\u24c7\u24e1\u32cd\u3374\u33ad-\u33af\u33da\u33db\uff32\uff52]",S:"[Ss\u015a-\u0161\u017f\u0218\u0219\u02e2\u1e60-\u1e63\u20a8\u2101\u2120\u24ae\u24c8\u24e2\u33a7\u33a8\u33ae-\u33b3\u33db\u33dc\ufb06\uff33\uff53]",T:"[Tt\u0162-\u0165\u021a\u021b\u1d40\u1d57\u1e6a-\u1e71\u1e97\u2121\u2122\u24af\u24c9\u24e3\u3250\u32cf\u3394\u33cf\ufb05\ufb06\uff34\uff54]",U:"[Uu\xd9-\xdc\xf9-\xfc\u0168-\u0173\u01af\u01b0\u01d3\u01d4\u0214-\u0217\u1d41\u1d58\u1d64\u1e72-\u1e77\u1ee4-\u1ee7\u2106\u24b0\u24ca\u24e4\u3373\u337a\uff35\uff55]",V:"[Vv\u1d5b\u1d65\u1e7c-\u1e7f\u2163-\u2167\u2173-\u2177\u24b1\u24cb\u24e5\u2c7d\u32ce\u3375\u33b4-\u33b9\u33dc\u33de\uff36\uff56]",W:"[Ww\u0174\u0175\u02b7\u1d42\u1e80-\u1e89\u1e98\u24b2\u24cc\u24e6\u33ba-\u33bf\u33dd\uff37\uff57]",X:"[Xx\u02e3\u1e8a-\u1e8d\u2093\u213b\u2168-\u216b\u2178-\u217b\u24b3\u24cd\u24e7\u33d3\uff38\uff58]",Y:"[Yy\xdd\xfd\xff\u0176-\u0178\u0232\u0233\u02b8\u1e8e\u1e8f\u1e99\u1ef2-\u1ef9\u24b4\u24ce\u24e8\u33c9\uff39\uff59]",Z:"[Zz\u0179-\u017e\u01f1-\u01f3\u1dbb\u1e90-\u1e95\u2124\u2128\u24b5\u24cf\u24e9\u3390-\u3394\uff3a\uff5a]"};return function(o){function s(t,e){for(var n,i=0;i<t.childNodes.length;i++)3===(n=t.childNodes[i]).nodeType?i+=e(n)?1:0:s(n,e)}var a;(o=e.mixin({},i,o)).node&&o.pattern&&(o.pattern=e.isArray(o.pattern)?o.pattern:[o.pattern],a=function(t,i,o,s){for(var a,r=[],l=0,u=t.length;l<u;l++){var c=e.escapeRegExChars(t[l]);s&&(c=c.replace(/\S/g,n)),r.push(c)}return a=o?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",i?new RegExp(a):new RegExp(a,"i")}(o.pattern,o.caseSensitive,o.wordsOnly,o.diacriticInsensitive),s(o.node,function(e){var n,i,s;return(n=a.exec(e.data))&&(s=t.createElement(o.tagName),o.className&&(s.className=o.className),(i=e.splitText(n.index)).splitText(n[0].length),s.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(s,i)),!!n}))}}(window.document),a=function(){"use strict";function n(n,i){(n=n||{}).input||t.error("input is missing"),i.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.$input.attr({"aria-activedescendant":"","aria-owns":this.$input.attr("id")+"_listbox",role:"combobox","aria-readonly":"true","aria-autocomplete":"list"}),t(i.menu).attr("id",this.$input.attr("id")+"_listbox"),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=function(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),this.onSync("cursorchange",this._updateDescendent)}function i(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!i(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!i(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,o;o=!!(i=function(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}(t,this.query))&&this.query.length!==t.length,this.query=t,e||i?!e&&o&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},_updateDescendent:function(t,e){this.$input.attr("aria-activedescendant",e)},bind:function(){var t,n,i,o,a=this;return t=e.bind(this._onBlur,this),n=e.bind(this._onFocus,this),i=e.bind(this._onKeydown,this),o=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s[t.which||t.keyCode]||e.defer(e.bind(a._onInput,a,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),!(""!==t&&n&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||((i=document.selection.createRange()).moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),r=function(){"use strict";function n(n,i){(n=n||{}).templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!function(t){return/^[_a-zA-Z0-9-]+$/.test(t)}(n.name)&&t.error("invalid dataset name: "+n.name),i.mixin(this),this.highlight=!!n.highlight,this.name=e.toStr(n.name||a()),this.limit=n.limit||5,this.displayFn=function(t){return t=t||e.stringify,e.isFunction(t)?t:function(e){return e[t]}}(n.display||n.displayKey),this.templates=function(n,i){return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||function(n){return t('<div role="option">').attr("id",e.guid()).text(i(n))}}}(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).attr("role","presentation").addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}var i,a;return i={dataset:"tt-selectable-dataset",val:"tt-selectable-display",obj:"tt-selectable-object"},a=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(i.obj)?{dataset:n.data(i.dataset)||"",val:n.data(i.val)||"",obj:n.data(i.obj)||null}:null},e.mixin(n.prototype,o,{_overwrite:function(t,e){(e=e||[]).length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",e,!1,this.name)},_append:function(t,e){(e=e||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",e,!0,this.name)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;i=(n=this._getSuggestionsFragment(t,e)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,o){var a,r=this;return a=document.createDocumentFragment(),e.each(o,function(e){var o,s;s=r._injectQuery(n,e),o=t(r.templates.suggestion(s)).data(i.dataset,r.name).data(i.obj,e).data(i.val,r.displayFn(e)).addClass(r.classes.suggestion+" "+r.classes.selectable),a.appendChild(o[0])}),this.highlight&&s({className:this.classes.highlight,node:a,pattern:n}),t(a)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){function n(t){s||(s=!0,t=(t||[]).slice(0,i.limit),a=t.length,i._overwrite(e,t),a<i.limit&&i.async&&i.trigger("asyncRequested",e,i.name))}var i=this,o=!1,s=!1,a=0;this.cancel(),this.cancel=function(){o=!0,i.cancel=t.noop,i.async&&i.trigger("asyncCanceled",e,i.name)},this.source(e,n,function(n){if(n=n||[],!o&&a<i.limit){i.cancel=t.noop;var s=Math.abs(a-i.limit);a+=s,i._append(e,n.slice(0,s)),i.async&&i.trigger("asyncReceived",e,i.name)}}),!s&&n([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),n}(),l=function(){"use strict";function n(n,i){var o=this;(n=n||{}).node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,function(e){var n=o.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(o.$node),new r(e,i)})}return e.mixin(n.prototype,o,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return e.every(this.datasets,e.bind(function(t){var e=t.isEmpty();return this.$node.attr("aria-expanded",!e),e},this))},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,o;n=(e=t.position().top)+t.outerHeight(!0),i=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):o<n&&this.$node.scrollTop(i+(n-o))},bind:function(){var n,i=this;return n=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,n),this.$node.on("mouseover",this.selectors.selectable,function(){i.setCursor(t(this))}),this.$node.on("mouseleave",function(){i._removeCursor()}),e.each(this.datasets,function(t){t.onSync("asyncRequested",i._propagate,i).onSync("asyncCanceled",i._propagate,i).onSync("asyncReceived",i._propagate,i).onSync("rendered",i._onRendered,i).onSync("cleared",i._onCleared,i)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.scrollTop(0),this.$node.addClass(this.classes.open)},close:function(){this.$node.attr("aria-expanded",!1),this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i,o;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,o=i+t,o=(o+1)%(e.length+1)-1,-1===(o=o<-1?e.length-1:o)?null:e.eq(o)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?r.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,function(e){e.update(t)})),n},empty:function(){e.each(this.datasets,function(t){t.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,function(t){t.destroy()})}}),n}(),u=function(){"use strict";function n(n){this.$el=t("<span></span>",{role:"status","aria-live":"polite"}).css({position:"absolute",padding:"0",border:"0",height:"1px",width:"1px","margin-bottom":"-1px","margin-right":"-1px",overflow:"hidden",clip:"rect(0 0 0 0)","white-space":"nowrap"}),n.$input.after(this.$el),e.each(n.menu.datasets,e.bind(function(t){t.onSync&&(t.onSync("rendered",e.bind(this.update,this)),t.onSync("cleared",e.bind(this.cleared,this)))},this))}return e.mixin(n.prototype,{update:function(t,e){var n,i=e.length;n=1===i?{result:"result",is:"is"}:{result:"results",is:"are"},this.$el.text(i+" "+n.result+" "+n.is+" available, use up and down arrow keys to navigate.")},cleared:function(){this.$el.text("")}}),n}(),c=function(){"use strict";function t(){l.apply(this,[].slice.call(arguments,0))}var n=l.prototype;return e.mixin(t.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),h=function(){"use strict";function n(n,o){var s,a,r,l,u,c,h,d,p,f,g;(n=n||{}).input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),o.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),a=i(this,"deactivate","_onBlurred"),r=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),u=i(this,"isActive","_onEscKeyed"),c=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),d=i(this,"isActive","isOpen","_onLeftKeyed"),p=i(this,"isActive","isOpen","_onRightKeyed"),f=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",a,this).onSync("enterKeyed",r,this).onSync("tabKeyed",l,this).onSync("escKeyed",u,this).onSync("upKeyed",c,this).onSync("downKeyed",h,this).onSync("leftKeyed",d,this).onSync("rightKeyed",p,this).onSync("queryChanged",f,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var o,s,a;o=document.activeElement,s=i.is(o),a=i.has(o).length>0,e.isMsie()&&(s||a)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",e,n,i)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&(e.preventDefault(),e.stopPropagation())},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getActiveSelectable()||this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return(t=e.isString(t)?t:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var t,n,i,o,s,r;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(o=a.normalizeQuery(i),s=e.escapeRegExChars(o),(r=new RegExp("^(?:"+s+")(.+$)","i").exec(n.val))&&this.input.setHint(i+r[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj,e.dataset))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj,e.dataset),this.close(),!0)},autocomplete:function(t){var e,n;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),!(!(n&&e!==n.val)||this.eventBus.before("autocomplete",n.obj,n.dataset))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj,n.dataset),!0)},moveCursor:function(t){var e,n,i,o,s,a;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),o=i?i.obj:null,s=i?i.dataset:null,a=n?n.attr("id"):null,this.input.trigger("cursorchange",a),!(this._minLengthMet()&&this.menu.update(e))&&!this.eventBus.before("cursorchange",o,s)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o,s),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function o(e,n){e.each(function(){var e,i=t(this);(e=i.data(d.typeahead))&&n(e,i)})}function s(n){var i,o;return i=e.isJQuery(n)||e.isElement(n),(o=i?t(n).first():[]).length?o:null}var r,d,p;r=t.fn.typeahead,d={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},p={initialize:function(o,r){var p;return r=e.isArray(r)?r:[].slice.call(arguments,1),o=o||{},p=n(o.classNames),this.each(function(){var n,f,g,m,v,y,b,w,_,x,k;e.each(r,function(t){t.highlight=!!o.highlight}),n=t(this),f=t(p.html.wrapper),g=s(o.hint),m=s(o.menu),v=!1!==o.hint&&!g,y=!1!==o.menu&&!m,v&&(g=function(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({spellcheck:"false",tabindex:-1})}(n,p)),y&&(m=t(p.html.menu).css(p.css.menu)),g&&g.val(""),n=function(t,e){t.data(d.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}(n,p),(v||y)&&(f.css(p.css.wrapper),n.css(v?p.css.input:p.css.inputWithNoHint),n.wrap(f).parent().prepend(v?g:null).append(y?m:null)),k=y?c:l,b=new i({el:n}),w=new a({hint:g,input:n},p),_=new k({node:m,datasets:r},p),new u({$input:n,menu:_}),x=new h({input:w,menu:_,eventBus:b,minLength:o.minLength},p),n.data(d.www,p),n.data(d.typeahead,x)})},isEnabled:function(){var t;return o(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return o(this,function(t){t.enable()}),this},disable:function(){return o(this,function(t){t.disable()}),this},isActive:function(){var t;return o(this.first(),function(e){t=e.isActive()}),t},activate:function(){return o(this,function(t){t.activate()}),this},deactivate:function(){return o(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return o(this.first(),function(e){t=e.isOpen()}),t},open:function(){return o(this,function(t){t.open()}),this},close:function(){return o(this,function(t){t.close()}),this},select:function(e){var n=!1,i=t(e);return o(this.first(),function(t){n=t.select(i)}),n},autocomplete:function(e){var n=!1,i=t(e);return o(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function(t){var e=!1;return o(this.first(),function(n){e=n.moveCursor(t)}),e},val:function(t){var n;return arguments.length?(o(this,function(n){n.setVal(e.toStr(t))}),this):(o(this.first(),function(t){n=t.getVal()}),n)},destroy:function(){return o(this,function(t,n){!function(t){var n,i;n=t.data(d.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(d.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(d.typeahead).removeData(d.www).removeData(d.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}(n),t.destroy()}),this}},t.fn.typeahead=function(t){return p[t]?p[t].apply(this,[].slice.call(arguments,1)):p.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=r,this}}()}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function o(t){return function(){return this[t].apply(this,arguments)}}var s=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(this[n].valueOf()===e)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new s;return t.replace(this),t}};return function(){var n=[];return n.push.apply(n,arguments),t.extend(n,e),n}}(),a=function(e,n){t(e).data("datepicker",this),this._process_options(n),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(p.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};a.prototype={constructor:a,_resolveViewName:function(t,n){return 0===t||"days"===t||"month"===t?0:1===t||"months"===t||"year"===t?1:2===t||"years"===t||"decade"===t?2:3===t||"decades"===t||"century"===t?3:4===t||"centuries"===t||"millennium"===t?4:n!==e&&n},_check_template:function(n){try{if(n===e||""===n)return!1;if((n.match(/[<>]/g)||[]).length<=0)return!0;return t(n).length>0}catch(t){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var o=this.o=t.extend({},this._o),s=o.language;d[s]||(s=s.split("-")[0],d[s]||(s=c.language)),o.language=s,o.startView=this._resolveViewName(o.startView,0),o.minViewMode=this._resolveViewName(o.minViewMode,0),o.maxViewMode=this._resolveViewName(o.maxViewMode,4),o.startView=Math.min(o.startView,o.maxViewMode),o.startView=Math.max(o.startView,o.minViewMode),!0!==o.multidate&&(o.multidate=Number(o.multidate)||!1,!1!==o.multidate&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var a=p.parseFormat(o.format);o.startDate!==-1/0&&(o.startDate?o.startDate instanceof Date?o.startDate=this._local_to_utc(this._zero_time(o.startDate)):o.startDate=p.parseDate(o.startDate,a,o.language,o.assumeNearbyYear):o.startDate=-1/0),o.endDate!==1/0&&(o.endDate?o.endDate instanceof Date?o.endDate=this._local_to_utc(this._zero_time(o.endDate)):o.endDate=p.parseDate(o.endDate,a,o.language,o.assumeNearbyYear):o.endDate=1/0),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],t.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=t.map(o.daysOfWeekDisabled,function(t){return parseInt(t,10)}),o.daysOfWeekHighlighted=o.daysOfWeekHighlighted||[],t.isArray(o.daysOfWeekHighlighted)||(o.daysOfWeekHighlighted=o.daysOfWeekHighlighted.split(/[,\s]*/)),o.daysOfWeekHighlighted=t.map(o.daysOfWeekHighlighted,function(t){return parseInt(t,10)}),o.datesDisabled=o.datesDisabled||[],t.isArray(o.datesDisabled)||(o.datesDisabled=[o.datesDisabled]),o.datesDisabled=t.map(o.datesDisabled,function(t){return p.parseDate(t,a,o.language,o.assumeNearbyYear)});var r=String(o.orientation).toLowerCase().split(/\s+/g),l=o.orientation.toLowerCase();if(r=t.grep(r,function(t){return/^auto|left|right|top|bottom$/.test(t)}),o.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===r.length)switch(r[0]){case"top":case"bottom":o.orientation.y=r[0];break;case"left":case"right":o.orientation.x=r[0]}else l=t.grep(r,function(t){return/^left|right$/.test(t)}),o.orientation.x=l[0]||"auto",l=t.grep(r,function(t){return/^top|bottom$/.test(t)}),o.orientation.y=l[0]||"auto";else;if(o.defaultViewDate){var u=o.defaultViewDate.year||(new Date).getFullYear(),h=o.defaultViewDate.month||0,f=o.defaultViewDate.day||1;o.defaultViewDate=n(u,h,f)}else o.defaultViewDate=i()},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var n,i,o,s=0;s<t.length;s++)n=t[s][0],2===t[s].length?(i=e,o=t[s][1]):3===t[s].length&&(i=t[s][1],o=t[s][2]),n.on(o,i)},_unapplyEvents:function(t){for(var n,i,o,s=0;s<t.length;s++)n=t[s][0],2===t[s].length?(o=e,i=t[s][1]):3===t[s].length&&(o=t[s][1],i=t[s][2]),n.off(i,o)},_buildEvents:function(){var e={keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.hasInput?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy(function(t){this.update(t.date)},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:e,date:o,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return p.formatDate(n,e,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return void 0!==t?new Date(t):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return p.formatDate(t,n,i)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){this._process_options({datesDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=t(this.o.container),o=i.width(),s="body"===this.o.container?t(document).scrollTop():i.scrollTop(),a=i.offset(),r=[];this.element.parents().each(function(){var e=t(this).css("z-index");"auto"!==e&&0!==e&&r.push(parseInt(e))});var l=Math.max.apply(Math,r)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),d=u.left-a.left,p=u.top-a.top;"body"!==this.o.container&&(p+=s),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(d-=e-h)):u.left<0?(this.picker.addClass("datepicker-orient-left"),d-=u.left-10):d+e>o?(this.picker.addClass("datepicker-orient-right"),d+=h-e):this.picker.addClass("datepicker-orient-left");var f=this.o.orientation.y;if("auto"===f&&(f=-s+p-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+f),"top"===f?p-=n+parseInt(this.picker.css("padding-top")):p+=c,this.o.rtl){var g=o-(d+h);this.picker.css({top:p,right:g,zIndex:l})}else this.picker.css({top:p,left:d,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)},this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy(function(t){return p.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=t.grep(n,t.proxy(function(t){return!this.dateWithinRange(t)||!t},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,i?this.setValue():n.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(t,e){return parseInt(e)+1}),n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',t.inArray(e,this.o.daysOfWeekDisabled)>-1&&(n+=" disabled"),n+='">'+d[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",n=0;n<12;){e+='<span class="month'+(t&&t.getMonth()===n?" focused":"")+'">'+d[this.o.language].monthsShort[n++]+"</span>"}this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var n=[],i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=new Date;return e.getUTCFullYear()<i||e.getUTCFullYear()===i&&e.getUTCMonth()<o?n.push("old"):(e.getUTCFullYear()>i||e.getUTCFullYear()===i&&e.getUTCMonth()>o)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===s.getFullYear()&&e.getUTCMonth()===s.getMonth()&&e.getUTCDate()===s.getDate()&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,o,s,a,r,l,u){var c,h,d,p,f,g,m,v,y,b,w;for(c="",h=this.picker.find(n),d=parseInt(a/o,10)*o,f=parseInt(r/s,10)*s,g=parseInt(l/s,10)*s,p=t.map(this.dates,function(t){return parseInt(t.getUTCFullYear()/s,10)*s}),h.find(".datepicker-switch").text(d+"-"+(d+9*s)),m=d-s,v=-1;v<11;v+=1)y=[i],b=null,-1===v?y.push("old"):10===v&&y.push("new"),-1!==t.inArray(m,p)&&y.push("active"),(m<f||m>g)&&y.push("disabled"),m===this.viewDate.getFullYear()&&y.push("focused"),u!==t.noop&&((w=u(new Date(m,0,1)))===e?w={}:"boolean"==typeof w?w={enabled:w}:"string"==typeof w&&(w={classes:w}),!1===w.enabled&&y.push("disabled"),w.classes&&(y=y.concat(w.classes.split(/\s+/))),w.tooltip&&(b=w.tooltip)),c+='<span class="'+y.join(" ")+'"'+(b?' title="'+b+'"':"")+">"+m+"</span>",m+=s;h.find("td").html(c)},fill:function(){var i,o,s=new Date(this.viewDate),a=s.getUTCFullYear(),r=s.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,u=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,f=d[this.o.language].today||d.en.today||"",g=d[this.o.language].clear||d.en.clear||"",m=d[this.o.language].titleFormat||d.en.titleFormat;if(!isNaN(a)&&!isNaN(r)){this.picker.find(".datepicker-days .datepicker-switch").text(p.formatDate(s,m,this.o.language)),this.picker.find("tfoot .today").text(f).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(g).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var v=n(a,r-1,28),y=p.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(y),v.setUTCDate(y-(v.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(v);v.getUTCFullYear()<100&&b.setUTCFullYear(v.getUTCFullYear()),b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var w,_=[];v.valueOf()<b;){if(v.getUTCDay()===this.o.weekStart&&(_.push("<tr>"),this.o.calendarWeeks)){var x=new Date(+v+(this.o.weekStart-v.getUTCDay()-7)%7*864e5),k=new Date(Number(x)+(11-x.getUTCDay())%7*864e5),C=new Date(Number(C=n(k.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),F=(k-C)/864e5/7+1;_.push('<td class="cw">'+F+"</td>")}(w=this.getClassNames(v)).push("day"),this.o.beforeShowDay!==t.noop&&((o=this.o.beforeShowDay(this._utc_to_local(v)))===e?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1===o.enabled&&w.push("disabled"),o.classes&&(w=w.concat(o.classes.split(/\s+/))),o.tooltip&&(i=o.tooltip)),w=t.isFunction(t.uniqueSort)?t.uniqueSort(w):t.unique(w),_.push('<td class="'+w.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+v.getUTCDate()+"</td>"),i=null,v.getUTCDay()===this.o.weekEnd&&_.push("</tr>"),v.setUTCDate(v.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(_.join(""));var S=d[this.o.language].monthsTitle||d.en.monthsTitle||"Months",T=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?S:a).end().find("span").removeClass("active");if(t.each(this.dates,function(t,e){e.getUTCFullYear()===a&&T.eq(e.getUTCMonth()).addClass("active")}),(a<l||a>c)&&T.addClass("disabled"),a===l&&T.slice(0,u).addClass("disabled"),a===c&&T.slice(h+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var D=this;t.each(T,function(n,i){var o=new Date(a,n,1),s=D.o.beforeShowMonth(o);s===e?s={}:"boolean"==typeof s?s={enabled:s}:"string"==typeof s&&(s={classes:s}),!1!==s.enabled||t(i).hasClass("disabled")||t(i).addClass("disabled"),s.classes&&t(i).addClass(s.classes),s.tooltip&&t(i).prop("title",s.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,a,l,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,a,l,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,a,l,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(e){e.preventDefault(),e.stopPropagation();var o,s,a,r,l,u,c;(o=t(e.target)).hasClass("datepicker-switch")&&this.showMode(1);var h=o.closest(".prev, .next");h.length>0&&(s=p.modes[this.viewMode].navStep*(h.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,s),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),o.hasClass("today")&&!o.hasClass("day")&&(this.showMode(-2),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),o.hasClass("clear")&&this.clearDates(),o.hasClass("disabled")||(o.hasClass("day")&&(a=parseInt(o.text(),10)||1,r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),o.hasClass("old")&&(0===l?(l=11,r-=1,u=!0,c=!0):(l-=1,u=!0)),o.hasClass("new")&&(11===l?(l=0,r+=1,u=!0,c=!0):(l+=1,u=!0)),this._setDate(n(r,l,a)),c&&this._trigger("changeYear",this.viewDate),u&&this._trigger("changeMonth",this.viewDate)),o.hasClass("month")&&(this.viewDate.setUTCDate(1),a=1,l=o.parent().find("span").index(o),r=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(n(r,l,a)),this.showMode()):this.showMode(-1),this.fill()),(o.hasClass("year")||o.hasClass("decade")||o.hasClass("century"))&&(this.viewDate.setUTCDate(1),a=1,l=0,r=parseInt(o.text(),10)||0,this.viewDate.setUTCFullYear(r),o.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(r,l,a))),o.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(n(r,l,a))),o.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(n(r,l,a))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!function(t){return t&&!isNaN(t.getTime())}(t))return this.o.defaultViewDate;if(!e)return t;var n,i,o=new Date(t.valueOf()),s=o.getUTCDate(),a=o.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1===r)i=-1===e?function(){return o.getUTCMonth()===a}:function(){return o.getUTCMonth()!==n},n=a+e,o.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var l=0;l<r;l++)o=this.moveMonth(o,e);n=o.getUTCMonth(),o.setUTCDate(s),i=function(){return n!==o.getUTCMonth()}}for(;i();)o.setUTCDate(--s),o.setUTCMonth(n);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,function(t){return function(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}(e,t)}).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,i=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(o,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(n=this.moveAvailableDate(o,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(o,e,"moveDay"):this.weekOfDateIsDisabled(o)||(n=this.moveAvailableDate(o,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(o,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(o,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+t))),this.picker.children("div").hide().filter(".datepicker-"+p.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var r=function(e,n){t(e).data("datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,function(t){return t.jquery?t[0]:t}),delete n.inputs,u.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};r.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,n){n.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var n=t(e.target).data("datepicker");if(void 0!==n){var i=n.getUTCDate(),o=t.inArray(e.target,this.inputs),s=o-1,a=o+1,r=this.inputs.length;if(-1!==o){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(i)}),i<this.dates[s])for(;s>=0&&i<this.dates[s];)this.pickers[s--].setUTCDate(i);else if(i>this.dates[a])for(;a<r&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var l=t.fn.datepicker,u=function(n){var i=Array.apply(null,arguments);i.shift();var o;if(this.each(function(){var e=t(this),s=e.data("datepicker"),l="object"==typeof n&&n;if(!s){var u=function(e,n){function i(t,e){return e.toLowerCase()}var o=t(e).data(),s={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var r in o)n.test(r)&&(s[r.replace(a,i)]=o[r]);return s}(this,"date"),p=function(e){var n={};if(d[e]||(e=e.split("-")[0],d[e])){var i=d[e];return t.each(h,function(t,e){e in i&&(n[e]=i[e])}),n}}(t.extend({},c,u,l).language),f=t.extend({},c,p,u,l);e.hasClass("input-daterange")||f.inputs?(t.extend(f,{inputs:f.inputs||e.find("input").toArray()}),s=new r(this,f)):s=new a(this,f),e.data("datepicker",s)}"string"==typeof n&&"function"==typeof s[n]&&(o=s[n].apply(s,i))}),o===e||o instanceof a||o instanceof r)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return o};t.fn.datepicker=u;var c=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},h=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=a;var d=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,p.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(o,s,r,l){function u(t,e){return!0===e&&(e=10),t<100&&(t+=2e3)>(new Date).getFullYear()+e&&(t-=100),t}function c(){var t=this.slice(0,y[g].length),e=y[g].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(!o)return e;if(o instanceof Date)return o;if("string"==typeof s&&(s=p.parseFormat(s)),s.toValue)return s.toValue(o,s,r);var h,f,g,m,v=/([\-+]\d+)([dmwy])/,y=o.match(/([\-+]\d+)([dmwy])/g),b={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},w={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(o)){for(o=new Date,g=0;g<y.length;g++)h=v.exec(y[g]),f=parseInt(h[1]),m=b[h[2]],o=a.prototype[m](o,f);return n(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate())}if(void 0!==w[o]&&(o=w[o],y=o.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(o))){for(o=new Date,g=0;g<y.length;g++)h=v.exec(y[g]),f=parseInt(h[1]),m=b[h[2]],o=a.prototype[m](o,f);return n(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate())}y=o&&o.match(this.nonpunctuation)||[],o=new Date;var _,x,k={},C=["yyyy","yy","M","MM","m","mm","d","dd"],F={yyyy:function(t,e){return t.setUTCFullYear(l?u(e,l):e)},yy:function(t,e){return t.setUTCFullYear(l?u(e,l):e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};F.M=F.MM=F.mm=F.m,F.dd=F.d,o=i();var S=s.parts.slice();if(y.length!==S.length&&(S=t(S).filter(function(e,n){return-1!==t.inArray(n,C)}).toArray()),y.length===S.length){var T;for(g=0,T=S.length;g<T;g++){if(_=parseInt(y[g],10),h=S[g],isNaN(_))switch(h){case"MM":x=t(d[r].months).filter(c),_=t.inArray(x[0],d[r].months)+1;break;case"M":x=t(d[r].monthsShort).filter(c),_=t.inArray(x[0],d[r].monthsShort)+1}k[h]=_}var D,A;for(g=0;g<C.length;g++)(A=C[g])in k&&!isNaN(k[A])&&(D=new Date(o),F[A](D,k[A]),isNaN(D)||(o=D))}return o},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=p.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var o={d:e.getUTCDate(),D:d[i].daysShort[e.getUTCDay()],DD:d[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:d[i].monthsShort[e.getUTCMonth()],MM:d[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var s=t.extend([],n.separators),a=0,r=n.parts.length;a<=r;a++)s.length&&e.push(s.shift()),e.push(o[n.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=p,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=l,this},t.fn.datepicker.version="1.6.4",t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),u.call(n,"show"))}),t(function(){u.call(t('[data-provide="datepicker-inline"]'))})}),jQuery.fn.datepicker.dates.es={days:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],daysShort:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",monthsTitle:"Meses",clear:"Borrar",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.fr={days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],daysShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],daysMin:["d","l","ma","me","j","v","s"],months:["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"],monthsShort:["janv.","f\xe9vr.","mars","avril","mai","juin","juil.","ao\xfbt","sept.","oct.","nov.","d\xe9c."],today:"Aujourd'hui",monthsTitle:"Mois",clear:"Effacer",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.it={days:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],daysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],daysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",monthsTitle:"Mesi",clear:"Cancella",weekStart:1,format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates.pt={days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",monthsTitle:"Meses",clear:"Limpar",format:"dd/mm/yyyy"},jQuery.fn.datepicker.dates["pt-BR"]={days:["Domingo","Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"],daysShort:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"],daysMin:["Do","Se","Te","Qu","Qu","Se","Sa"],months:["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],today:"Hoje",monthsTitle:"Meses",clear:"Limpar",format:"dd/mm/yyyy"},jQuery(function(t){t("#header").wrap('<div id="header-wrapper"></div>'),t("#header-wrapper").css("height",t("#header").css("height"))}),function(t){"use strict";window.AddToAlbum={_initialized:!1,_container_id:"album-selector-container",init:function(){this._initialized||(this.container=void 0,$("body").delegate('a[rel="album-add"]',"click",this._onClick.bind(this)),this._initialized=!0)},_onClick:function(t){t.preventDefault();var e=$(t.target).data("id"),n=$(t.target).data("source-page");void 0===n&&void 0===(n=$(t.target).parent().data("source-page"))&&(n=""),this.container=this._getContainer(),this.container.load("/do_ajax/user/albums?image="+e+"&source_page="+n,this._onAlbumSelectorLoaded.bind(this))},_onAlbumSelectorLoaded:function(){angular.bootstrap(this.container)},_getContainer:function(){var t=$("#"+this._container_id);return t.length>0&&t.remove(),$("body").append('<div id="'+this._container_id+'" ng-controller="AlbumController"></div>'),t=$("#"+this._container_id)}}}(),$(document).ready(function(){AddToAlbum.init()}),function(t){"use strict";window.History={historyAPISupported:function(){return!(!window.history||!history.pushState)},pushState:function(t,e,n){History.trackPageView(n);try{history.pushState(t,e,n)}catch(t){}},replaceState:function(t,e,n){History.trackPageView(n);try{history.replaceState(t,e,n)}catch(t){}},trackPageView:function(t){var e=t.replace(/(http[s]?:\/\/[^/]+\/)?/,"/");"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&_gaq.push(["_trackPageview",e]),"undefined"!=typeof ga&&"function"==typeof ga&&ga("send","pageview",e)}}}(),function(t){"use strict";window.SocialHub={_initialized:!1,init:function(){SocialHub._initialized||(SocialHub._initialized=!0,$("body").delegate('[rel="social-hub"]',"click",this._onClick))},_onClick:function(){var t=$(this),e=t.parents(t.data("wrapper"));return 1!==e.length||($("#social-hub").remove(),t.toggleClass("active").hasClass("active")&&(t.after('<div id="social-hub""></div>'),e.on("mouseleave",SocialHub._onMouseLeave),SocialHub._createHubPopover(t,e)),!1)},_onMouseLeave:function(){$(this).find('[rel="social-hub"]').removeClass("active"),$("#social-hub").remove(),$(this).off("mouseleave",SocialHub._onMouseLeave)},_getFacebookUrl:function(t){return"//www.facebook.com/sharer.php?u="+t},_getTwitterUrl:function(t){var e=__("Ideas para decorar tu hogar en Habitissimo");return"//twitter.com/share?url="+t+"&text="+encodeURIComponent(e)},_getPinterestUrl:function(t,e){var n=__("Ideas para decorar tu hogar en Habitissimo");return"//pinterest.com/pin/create/button/?url="+t+"&media="+e+"&description="+encodeURIComponent(n)},_createHubPopover:function(t,e){var n=$("#social-hub");t.hasClass("top")?n.addClass("top"):t.hasClass("bottom")&&n.addClass("bottom"),n.append('<div class="arrow"></div>'),n.append('<a href="#" class="btn btn-secondary" rel="export-facebook" target="_blank"><i class="icon icon-facebook-o"></i> Facebook</a>'),n.find('[rel="export-facebook"]').attr("href",SocialHub._getFacebookUrl(t.data("url"))),n.append('<a href="#" class="btn btn-secondary" rel="export-twitter" target="_blank"><i class="icon icon-twitter-o"></i> Twitter</a>'),n.find('[rel="export-twitter"]').attr("href",SocialHub._getTwitterUrl(t.data("url")));var i=t.data("media");i||(i=1===(i=e.find("img")).length&&i.attr("src")),i&&(n.append('<a href="#" class="btn btn-secondary" rel="export-pinterest" target="_blank"><i class="icon icon-pinterest-o"></i> Pinterest</a>'),n.find('[rel="export-pinterest"]').attr("href",SocialHub._getPinterestUrl(t.data("url"),i)));var o=SocialHub._getHubPosition(t,n);n.css({top:o.top,left:o.left})},_getHubPosition:function(t,e){var n=t.position();return n.left-=t.outerWidth()/2,t.hasClass("top")?n.top-=e.outerHeight()+22:t.hasClass("bottom")&&(n.top+=t.outerHeight()+22),n}}}(),function(t){"use strict";var e=null;t.slideshow=function(n,i,o){return e||(e=new t.slideshowClass(n,i,o)),e},t.slideshow.defaults={preload:5,onLastReached:void 0},t.slideshowClass=function(e,n){this.selector=e,this.opts=t.extend({},t.slideshow.defaults,n),this.state=this._getCleanState(),this._buildOverlay(),this._bindEvents(),this._debug("slideshow instance created")},t.slideshowClass.prototype={open:function(e){var n=t(e);if(!1!==this.state.duringAjax)return this;if(0===n.length)return this._debug("I don't know how to open this",e),this;n.attr("rel")||console.error("Opened element has no rel attribute, this is unsupported"),this.getContext()!=n.attr("rel")&&this._newContext(n);var i=n.attr("href");this._onOpen(i);var o={},s=this;return this.state.duringAjax=i,this.state.stack.length>1&&(o.hideThumbs=1),t.ajax({url:n.attr("href"),data:o,type:"GET",cache:!0,xhrFields:{withCredentials:!0},headers:{"X-Requested-With":"XMLHttpRequest"},success:function(){s._ajaxSuccess.apply(s,arguments)},error:function(){document.location.href=i},complete:function(){s._ajaxComplete.apply(s,arguments)}}),this},close:function(){return!0===this.state.open&&(t("body").css("overflow",this.state.bodyOverflow),this.state=this._getCleanState(),this._hideBack(),this.overlay.find(".overlay-content").empty(),this.overlay.css("display","none"),this._restoreHistory()),this},next:function(){return this.open(this._getNextElement()),this},prev:function(){return this.open(this._getPrevElement()),this},back:function(){var t=this.getContext();delete this.state.stackPages[t],this.state.stack.pop();var e=this.state.stackPages[this.getContext()];return this.open(e[this.state.stackLast[t]]),delete this.state.stackLast[t],this.state.stack.length<2&&this._hideBack(),this},reload:function(){var e=this,n=this.getContext();return t(this.selector).filter('[rel="'+n+'"]').each(function(){var i=t(this).attr("href");e.state.stackPages[n][i]={preload:t(this).data("preload"),rel:t(this).attr("rel"),href:t(this).attr("href")}}),this.state.open&&(this._toggleNavigationMarks(),this._preload()),this},getContext:function(){return this.state.stack[this.state.stack.length-1]},_newContext:function(t){var e=t.attr("rel");if(this.state.stack.length>=1){var n=this.overlay.find("img.subject");this._showBack(n.attr("src"))}this.state.stack.push(e),this.state.stackLast[e]=this.state.currPage,this.state.stackPages[e]=[],this.reload()},_onOpen:function(t){if("function"==typeof this.opts.onOpen){var e=this.state.stackPages[this.getContext()],n=_(e).keys(),i=_(n).indexOf(t);this.opts.onOpen.apply(this,[i,n.length])}},_onLastReached:function(){return"function"!=typeof this.opts.onLastReached||this.opts.onLastReached.apply(this)},_getNextElement:function(){var t=this._getElementByOffset(1);return void 0===t&&this._onLastReached(),t},_getPrevElement:function(){return this._getElementByOffset(-1)},_getElementByOffset:function(t){var e=this.state.stackPages[this.getContext()],n=_(e).keys();return e[n[_(n).indexOf(this.state.currPage)+t]]},_ajaxSuccess:function(e){this.state.open=!0,this.state.currPage=this.state.duringAjax,this.state.duringAjax=!1,this.overlay.css("display","block"),this.overlay.find(".overlay-content").html(e),this.state.stack.length>1&&this.overlay.find(".overlay-back").css("display","block"),this._updateHistory(),0==this.state.bodyOverflow&&(this.state.bodyOverflow=t("body").css("overflow"),t("body").css("overflow","hidden")),this._toggleNavigationMarks(),this._preload()},_toggleNavigationMarks:function(){this.overlay.find(".navigation.prev").toggleClass("visible",void 0!==this._getPrevElement()),this.overlay.find(".navigation.next").toggleClass("visible",void 0!==this._getNextElement()),this.overlay.find(".overlay-back").toggleClass("highlight",void 0===this._getNextElement())},_preload:function(){var t=this,e=_.range(-1*this.opts.preload,this.opts.preload);_(e).each(function(e){var n=t._getElementByOffset(e);void 0!==n&&n.preload&&t._preloadImg(n.preload)})},_preloadImg:function(t){if(void 0===this.state.cache[t]){(new Image).src=t,this.state.cache[t]=!0}},_ajaxComplete:function(){this.state.duringAjax=!1,this._trigger("pageLoaded")},_bindEvents:function(){var e=this;t(document).on("keyup",function(t){return e._onKeyUp(t)}),t(window).on("popstate",this._onPopState);var n=new Hammer(document);n.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),n.on("swipeleft swiperight",function(t){return e._onSwipe(t.type)}),t("body").delegate(this.selector,"click",function(t){return e._onClick(t)}),this._debug("events set")},_onClick:function(t){return this.open(t.currentTarget),!1},_onSwipe:function(t){return"swipeleft"==t?(this.next(),!1):"swiperight"!=t||(this.prev(),!1)},_onKeyUp:function(t){return!this.state.open||(37===t.which?(this.prev(),!1):39===t.which?(this.next(),!1):27!==t.which||(this.close(),!1))},_onPopState:function(e){var n=e.originalEvent.state,i=t.slideshow();if(n&&n.open){i.state=n;var o=i.state.stackPages[i.getContext()][i.state.currPage];i.open(o)}else i.close()},_buildOverlay:function(){var e=this;t("body").append(this._getOverlayHtml()),this.overlay=t("#photo-overlay").css({display:"none"}),this.overlay.delegate(".navigation.prev","click",function(){return e.prev(),!1}),this.overlay.delegate(".navigation.next","click",function(){return e.next(),!1}),this.overlay.delegate(".close","click",function(){return e.close(),!1}),this.overlay.delegate(".close-xs","click",function(){return e.close(),!1}),this.overlay.delegate(".overlay-back","click",function(){return e.back(),!1}),this.overlay.delegate(".navigation-area","mouseenter",function(){e.overlay.find(".overlay-back").addClass("visible")}),this.overlay.delegate(".navigation-area","mouseleave",function(){setTimeout(function(){e.overlay.find(".overlay-back").removeClass("visible")},1e3)}),this.overlay.on("click",function(n){t(n.target).is("#page-photo *, #page-photo")||e.close()})},_getOverlayHtml:function(){return'             <div id="photo-overlay">                 <div class="overlay-back noclose">                     <span class="back-img"></span>                    <span class="back-img"></span>                    <img src="" alt="'+__("volver")+'">                    <span class="title">'+__("Volver")+'</span>                 </div>                 <div class="overlay-content"></div>             </div>'},_pushStateSupported:function(){return!(!history||!history.pushState)},_updateHistory:function(){if(History.trackPageView(this.state.currPage),this._pushStateSupported())if(history.state&&1==history.state.open){this._debug("updating history, replaceState");try{history.replaceState(this.state,"",this.state.currPage)}catch(t){}}else{this._debug("updating history, pushState");try{history.pushState(this.state,"",this.state.currPage)}catch(t){}}},_getThumbnailUrl:function(t){return t.replace(/\/(medium|big|hd|original|small|thumbnail|mini_square)\//,"/square/")},_debug:function(){if(this.opts.debug&&"undefined"!=typeof console){var t=Array.prototype.slice.call(arguments);t.push(this.state),console.log.apply(console,t)}},_trigger:function(e){this._debug("trigger event",e),t(window).trigger("slideshow."+e),t(this).trigger(e)},_getCleanState:function(){return{slideShow:!0,open:!1,duringAjax:!1,currPage:void 0,rootPage:window.location.href,bodyOverflow:!1,stack:[],stackPages:{},stackLast:{},cache:{}}},_hideBack:function(){this.overlay.find(".overlay-back").hide()},_showBack:function(t){var e=this.overlay.find(".overlay-back");t&&e.find("img").attr("src",this._getThumbnailUrl(t)),e.show()},_restoreHistory:function(){this._pushStateSupported()&&history.state&&!0===history.state.slideShow&&setImmediate(function(){history.back()})}}}(jQuery),function(t,e){"use strict";e.moebius=function(t,n,i){this.element=e(i),this._create(t,n)},e.moebius.defaults={distance:100,loaderClass:"moebius-loader",loaderContent:'<hr/><span class="moebius-spinner"><i class="icon-spinner-o icon-spin"></i></span>',endClass:"moebius-end",endContent:"You have reached the last page",contentSelector:void 0,useGC:!0,pagerSelector:".pagination",pagerNext:'.pagination a[rel="next"]',pagerprev:'.pagination a[rel="prev"]',debug:!1,contentElements:".gallery-container",history:t.history},e.moebius.prototype={_create:function(t){this.opts=e.extend({},e.moebius.defaults,t),this.state={currPage:1,duringAjax:!1,nextPage:e(this.opts.pagerNext).attr("href"),pixelsToTarget:void 0,nextCallBack:void 0},this._debug("moebius instance created",this.element),this._removePagination(),this._bindEvents()},_removePagination:function(){e(this.opts.pagerSelector).remove()},_bindEvents:function(){var n=this;e(t).smartscroll(function(t){n._onScroll(t)}),e(document).keydown(function(t){35==t.which&&(n.state.pixelsToTarget=1e3*Math.random())}),this._debug("events set")},_onScroll:function(){var n=this.element.offset().top+this.element.height()-(e(t).scrollTop()+e(t).height());n<this.opts.distance&&n!==this.state.pixelsToTarget&&this.next(),this.state.pixelsToTarget=n},_updateHistory:function(){this.opts.history&&this.opts.history.pushState&&this.opts.history.replaceState({},void 0,this.state.nextPage)},_debug:function(){if(this.opts.debug&&"undefined"!=typeof console){var t=Array.prototype.slice.call(arguments);t.push(this.state),console.log.apply(console,t)}},_ajaxSuccess:function(n){var i=e("<div/>");i[0].innerHTML=n,this._updateHistory(),this.state.nextPage=i.find(this.opts.pagerNext).attr("href");var o=this;i.find(this.opts.contentElements).each(function(){o.element.append(this.outerHTML)}),i.remove(),i=null,o=null,this._debug("AJAX success"),"bLazy"in t&&bLazy.revalidate()},_ajaxError:function(){this._debug("AJAX error")},_ajaxComplete:function(){this.state.duringAjax=!1,"function"==typeof this.state.nextCallBack&&(this._debug("executing callback"),this.state.nextCallBack()),this.state.nextCallBack=void 0,this.element.find("."+this.opts.loaderClass).remove(),this._trigger("pageLoaded")},_rcvCommand:function(){var t=arguments[0],e=Array.prototype.splice.call(arguments,1);switch(t){case"next":this.state.nextCallBack=e[0],this.next();break;default:this._debug("unknown command",t)}},_trigger:function(n){this._debug("trigger event",n),e(t).trigger("moebius."+n),e(this).trigger(n)},next:function(){if(this.state.duringAjax||void 0===this.state.nextPage)this._debug("skipping next page event");else{this.state.duringAjax=!0,this.element.append('<div class="'+this.opts.loaderClass+'">'+this.opts.loaderContent+"</div>"),this._debug("next fired");var t=this;e.ajax({type:"GET",url:this.state.nextPage,cache:!0,dataType:"html",error:function(e,n,i){t._ajaxError(e,n,i)},success:function(e,n,i){t._ajaxSuccess(e,n,i)},complete:function(){t._ajaxComplete()}})}}},e.fn.moebius=function(t,n){var i=arguments;return this.each(function(){var o=e.data(this,"moebius");if(o)switch(o._debug("instance exists"),typeof t){case"object":break;case"string":o._rcvCommand.apply(o,i)}else o=new e.moebius(t,n,this),e.data(this,"moebius",o)}),this};var n,i=e.event;i.special.smartscroll={setup:function(){e(this).bind("scroll",i.special.smartscroll.handler)},teardown:function(){e(this).unbind("scroll",i.special.smartscroll.handler)},handler:function(t,i){var o=this,s=arguments;t.type="smartscroll",n&&clearTimeout(n),n=setTimeout(function(){e(o).trigger("smartscroll",s)},"execAsap"===i?0:100)}},e.fn.smartscroll=function(t){return t?this.bind("smartscroll",t):this.trigger("smartscroll",["execAsap"])}}(window,jQuery),function(t){"use strict";t.__=function(t,e){var n=t;if("undefined"!=typeof hab_i18n)try{void 0!==hab_i18n[t]&&hab_i18n[t]&&(n=hab_i18n[t])}catch(t){}return void 0!==e&&(n=nano(n,e)),n},jQuery.substitute=nano,jQuery.defined=function(t){return void 0!=t},t.trunk8=function(t,e){var n,i=__("ver m\xe1s"),o=__("ver menos");switch(typeof e){case"object":(n=e).less_text&&(o=n.less_text),n.less_text&&(i=n.more_text);break;case"number":n={lines:e};break;default:n={}}n.tooltip=!1,n.fill='&hellip; <a class="trunk8-more" href="#">{more}</a>',n.fill=nano(n.fill,{more:i}),jQuery(t).trunk8(n),jQuery(t).delegate(".trunk8-more","click",function(){var e=' <a class="trunk8-less" href="#">{less}</a>';return e=nano(e,{less:o}),jQuery(this).closest(t).trunk8("revert").append(e),!1}),jQuery(t).delegate(".trunk8-less","click",function(){return jQuery(this).closest(t).trunk8(),!1})},t.trunk8html=function(t,e){return trunk8(t,$.extend({parseHTML:!0},e))},t.trunk_overflow=function(t,e,n,i,o){i=i||"slow",o=o||"",$(t).each(function(){var t=$(this);if(t.css({"max-height":n,overflow:"hidden"}),t.height()<t.prop("scrollHeight")){var s='<div class="show-more">';s+='<a class="show-more-link {classes}" title="{more}" href="#">{more}</a>',s=nano(s+="</div>",{more:e,classes:o}),t.append(s),t.css("height",t.height()),t.addClass("overflowed")}t.find(".show-more-link").bind("click",function(e){t.css("max-height","100%"),t.find(".show-more").hide(),t.animate({height:"auto"},i),e.preventDefault()})})},t.trunkOverflow=function(t,e){function n(t){t.preventDefault();var e=t.data.$element,n=t.data.options;e.css("max-height","100%"),e.find(n.more.action).toggleClass("hidden"),n.less&&Object.keys(n.less).length&&e.find(n.less.action).toggleClass("hidden"),e.animate({height:"auto"},n.animate)}function i(t){t.preventDefault();var e=t.data.$element,n=t.data.options;e.find(n.less.action).toggleClass("hidden"),e.find(n.more.action).toggleClass("hidden"),e.css({"max-height":n.height})}var o={more:{action:$("<div>",{class:"show-more"}).append($("<a>",{text:__("Leer m\xe1s"),class:"show-more-link raquo",href:"#"})),triggerSelector:".show-more-link"},less:void 0,height:"100px",animate:"slow"};e.showLess&&(o.less={action:$("<div>",{class:"show-less"}).append($("<a>",{text:__("Leer menos"),class:"show-less-link link-secondary raquo",href:"#"})),triggerSelector:".show-less-link"}),e.more=Object.assign({},o.more,e.more),e.less=Object.assign({},o.less,e.less),e=Object.assign(o,e),$(t).each(function(t,o){var s=$(o);!function(t,e){t.css({"max-height":e,overflow:"hidden",position:"relative"})}(s,e.height),s.height()<s.prop("scrollHeight")&&function(t,e){t.append(e.more.action),e.less&&Object.keys(e.less).length&&(e.less.action.addClass("hidden"),t.append(e.less.action)),t.css("height",t.height()),t.addClass("overflowed")}(s,e),s.find(e.more.triggerSelector).bind("click",{$element:s,options:e},n),e.less&&s.find(e.less.triggerSelector).bind("click",{$element:s,options:e},i)})},t.truncateString=function(t,e,n){return e=e||30,n=n||"&hellip;",t.length>e&&(t=t.substr(0,e-n.length),t+=n),t},t.sumarizeList=function(t,e,n){n=n||",";var i=$(t).addClass("sumarized"),o=i.text().split(n);if(0!=o.length){var s=o.slice(0,e),a=o.slice(e+1);i.text(s.join(n)+n),i.append('<a href="javascript:void(0)" class="show_hidden">'+__("ver todos")+"</a>"),i.append('<span class="hidden_elements">'+a.join(n)+"</span>"),i.find(".show_hidden").bind("click",function(){$(this).hide(),i.find(".hidden_elements").show()})}},t.scrollToAnimate=function(t,e,n,i){n=n||0,n+=$(t).offset().top,e=e||400,$("html, body").stop().animate({scrollTop:n},e,void 0,i)},t.validateField=function(t,e,n,i){var o=$(t);$.defined(i)||(i=o.parent("p")),$.defined(n)||(n={}),$.get("/do_ajax/utils/validate_field",{field:o.attr("name"),value:o.val(),validator:e,validator_params:$.toJSON(n)},function(t){var e=o.attr("name")+"_live_error";$("#"+e).remove(),$("#"+o.attr("name")+"_error").remove(),"ok"!=t&&i.before('<span class="form_error" id="'+e+'">&darr; '+t+"</span>")})},t.typeaheadAutocomplete=function(t,e){e=$.extend({source:"",prepare_request:null,prepare_response:null,highlight:!0,display_key:"name",id_key:"id",input:"#service",no_selected_error:"",autoselect:!1,hint:!0,limit:120,delay:1e3,error_class:"has-error",open_default:!1,always_select_one:!0,select_on_submit:!0,on_select:null,minLength:0,suggestion_template:null},e||{});var n=$(t),i=$(e.input);e.remote={url:e.source+"?search=%QUERY",wildcard:"%QUERY"},e.prepare_request&&(e.remote.prepare=e.prepare_request),e.prepare_response&&(e.remote.transform=e.prepare_response);var o=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(e.display_key),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:e.remote,rateLimitBy:e.delay,dupDetector:function(t,n){return t[e.id_key]===n[e.id_key]}});o.initialize();var s={highlight:e.highlight,minLength:e.minLength,hint:e.hint,autoselect:e.autoselect},a={displayKey:e.display_key,valueKey:e.id_key,limit:e.limit,source:o};e.suggestion_template&&(a.templates={},a.templates.suggestion=e.suggestion_template),e.templates&&(a.templates=$.extend({},a.templates||{},e.templates)),n.typeahead(s,a).bind("typeahead:selected",function(t,o){n.removeClass(e.error_class),i.val(o[e.id_key]),e.on_select&&e.on_select()}).on("typeahead:autocompleted",function(t,o){n.removeClass(e.error_class),i.val(o[e.id_key]),e.on_select&&e.on_select()}),e.always_select_one&&n.on("change",function(){var t=$(this).val();if(""==i.val()&&""!=t){var s=o.search(t,"",function(t){t.length>0?(n.removeClass(e.error_class),i.val(t[0][e.id_key]),n.typeahead("val",t[0][e.display_key]),e.on_select&&e.on_select()):(n.typeahead("val",""),i.val("")),e.error_class&&""==i.val()&&n.addClass(e.error_class)});"[object Array]"!==Object.prototype.toString.call(s)||s.length||n.addClass(e.error_class)}else n.removeClass(e.error_class)}),e.open_default&&n.on("focus",function(){""==$(this).val()&&$(".tt-hint").hide();var t=$.Event("keydown");return t.keyCode=t.which=40,$(this).trigger(t),!0}),t!=e.input&&n.on("input",function(){i.val("")}),n.on("keyup",function(t){38!=(t=t||window.event).keyCode&&40!=t.keyCode&&n.siblings(".tt-menu").scrollTop(0),""==n.val()?$(".tt-hint").hide():$(".tt-hint").show()}),e.select_on_submit&&n.on("keypress",function(t){if(13==(t=t||window.event).keyCode){var s=$(this).val();""==i.val()&&""!=s&&s.length>2?(o.get(s,function(t){t.length>0&&(n.removeClass(e.error_class),i.val(t[0][e.id_key]),e.on_select&&e.on_select()),e.error_class&&""==i.val()?n.addClass(e.error_class):n.parents("form:first").submit()}),t.preventDefault()):n.removeClass(e.error_class)}})},t.districtAutocomplete=function(t,e){var n={source:"/p/api/autocomplete/district?search=%QUERY",replace:function(t,n){var i=t.replace("%QUERY",n);return $(e.zip).val()&&(i+="&zip="+$(e.zip).val()),$(e.city).val()&&(i+="&location_id="+$(e.city).val()),i},id_key:"name",highlight:!0,display_key:"name",input:t,no_selected_error:"",hint:(e=$.extend({zip:"#zip",city:"#city",open_default:!0,hint:!0},e||{})).hint,autoselect:"first",minLength:3,limit:120,delay:1e3,error_class:"has-error",open_default:e.open_default,always_select_one:!1,select_on_submit:!1};typeaheadAutocomplete(t,n)},t.lightBox=function(t,e){t=t||'[rel="lightbox"]',e=e||{cyclic:!0,helpers:{title:{type:"inside"}}},$(t).fancybox(e)},t.mobileAlbumLightBox=function(t,e){t=t||'[rel="lightbox"]',e=e||{cyclic:!0,helpers:{title:{type:"outside"},overlay:{opacity:.8,css:{"background-color":"#000000"}}},width:"100%",padding:0,autoSize:!1,autoResize:!1,margin:0,maxWidth:"100%",closeBtn:!0,nextClick:!0,beforeLoad:function(){this.title=$("<div>").append($('<div class="text-center">').append($('[rel="album-add"][data-id="'+$(this.element).data("id")+'"]').clone())).html(),$("#fancybox-content").find("img").addClass("newClass")},beforeShow:function(){$(".fancybox-wrap").addClass("mobile-album-lightbox")}},$(t).fancybox(e),$("body").delegate('a[rel="album-add"]',"click",function(){jQuery.fancybox.close()})},t.stateCity=function(t,e,n,i){i=$.defined(i)?i:"";var o=$('select[name="'+t+'"]'),s=$('select[name="'+e+'"]');$.defined(n)&&""!=n&&$.defined(o.children("option[value='"+n+"']")[0])&&(o.children("option[value="+n+"]")[0].selected=!0,_loadCities(n,e,i)),void 0==n&&""!=o.val()&&""==s.val()&&_loadCities(o.val(),e,i),o.bind("change",function(t){_loadCities(t.target.value,e,"")}.bind(this))},t._loadCities=function(t,e,n){var i=_setSelectLoading(e);$.getJSON("/do_ajax/autocomplete_cities",{use_key:"id",state:t},function(t){i.empty(),$.each(t.cities,function(t,e){i[0].options[i[0].options.length]=new Option(e.name,e.id)});var e=i.children("option[value="+n+"]")[0];i.trigger("options_changed"),i.removeAttr("disabled"),e&&(e.selected=!0)})},t._setSelectLoading=function(t){var e=$('select[name="'+t+'"]').empty().attr("disabled",!0);return e[0].options[e[0].options.length]=new Option(__("Cargando..."),""),e},t.categorySubcategory=function(t,e,n,i){i=$.defined(i)?i:"";var o=$('select[name="'+t+'"]');$.defined(n)&&""!=n&&(o.children("option[value="+n+"]")[0].selected=!0,_loadSubCategories(n,e,i)),o.bind("change",function(t){_loadSubCategories(t.target.value,e,"")}.bind(this))},t._loadSubCategories=function(t,e,n){var i=_setSelectLoading(e);$.getJSON("/do_ajax/autocomplete_subcategories",{category:t},function(t){i.empty(),$.each(t.subcategories,function(t,e){i[0].options[i[0].options.length]=new Option(e.name,e.id)}),i.children("option[value="+n+"]")[0].selected=!0,i.trigger("options_changed"),i.removeAttr("disabled")})},Function.prototype.scope=Function.prototype.bind,Function.prototype._bind=Function.prototype.scope,t.subcategorySubSubcategory=function(e,n,i,o){o=$.defined(o)?o:"";var s=$('select[name="'+e+'"]');$.defined(i)&&""!=i&&t._loadSubSubCategories(i,n,o),s.bind("change",function(e){t._loadSubSubCategories(e.target.value,n,"")}._bind(t))},t._loadSubSubCategories=function(e,n,i){var o=t._setSelectLoading(n);$.getJSON("/do_ajax/autocomplete_subsubcategories?subcategory="+e,function(t){o.empty(),$.each(t.subsubcategories,function(t,e){o[0].options[o[0].options.length]=new Option(e.name,e.id)}),o.children("option[value="+i+"]")[0].selected=!0,o.attr("size")&&o.attr("size",t.subsubcategories.length),1==o[0].options.length?(o.empty(),o[0].options[o[0].options.length]=new Option(__("Todas"),0),$("#subsubcategory_selector").addClass("hidden")):($("#subsubcategory_selector").removeClass("hidden"),o.removeAttr("disabled")),o.trigger("options_changed")})},t.tokenize=function(t,e,n){n=n||{};var i=$.extend({hintText:"",noResultsText:"",searchingText:"",contentType:"text",prePopulateFromInput:!0,allowNewValues:!0},n),o=$(t);if(!o.attr("tokenized"))if($.defined(o.tokenInput)){try{var s=o.position()}catch(i){return void o.focus(function(){tokenize(t,e,n)})}o.tokenInput(e,i);var a=o.next(),r=a.find("input");r.addClass("form-control");var l=r.outerWidth()+"px",u=a.next().css("width",l);u.next().css("width",l);var c=o.parents("form");c.hasClass("newform")?(u=a.next().css("margin-left",s.left)).next().css("margin-left",s.left):c.hasClass("stunning")&&u.next().css("width","auto"),$(t).attr("tokenized",!0)}else $.getScript("/js/jq/jquery.tokeninput.js",function(){tokenize(t,e,n)})},t.checkEmail=function(t,e){var n=t.val();$.defined(e)||(e=t.parent("p")),$.get("/do_ajax/user/check_email",{email:n},function(t){$("#email_live_error").remove(),"ok"!=t&&e.before('<span class="form_error" id="email_live_error">&darr; '+t+"</span>")})},t.formSubmitFeedback=function(t){var e=function(){if($(this).hasClass("disabled"))return!1;var t=__("Procesando...");$(this).addClass("disabled");try{$(this).text(t)}catch(t){}return $(this).attr("name")||$(this).attr("value",t),!0};"string"==typeof t?$(document).on("click",t,e):$(t).on("click",e)},t.FormHelper=function(){function t(t,e){this.$form=$(t),this.settings={position:"right",offset_h:0,offset_w:0,class:""},"string"==typeof e?this.settings.position=e:this.settings=$.extend(this.settings,e||{}),this.settings.template||(this.settings.template='<div id="form-hint" class="popover '+this.settings.position+'"><div class="arrow"></div><div class="popover-content"><p></p></div></div>'),this.buildUI(),this.getSpacialLimits(),this.setEvents()}return $.extend(t.prototype,{buildUI:function(){this.$floater=$(this.settings.template).hide(),$("#"+this.$floater.attr("id")).remove(),this.$floater.addClass(this.settings.position).addClass(this.settings.class).appendTo($("body"))},setEvents:function(){this.$form.delegate(":input","focus",this.onFieldFocus.bind(this)),this.$form.delegate(":input","blur",this.onFieldBlur.bind(this))},onFieldFocus:function(t){var e=this.getFieldHelp(t.target);e&&(this.$floater.find("p").html(e),this.setFloaterPosition(t.target),this.$floater.show())},onFieldBlur:function(){this.hideFloater()},getFieldHelp:function(t){return $(t).nextAll(".help").html()},setFloaterPosition:function(t){var e={top:this.getFloaterPositionTop,left:this.getFloaterPositionLeft,right:this.getFloaterPositionRight},n=$(t).attr("positioning")||this.settings.position,i=e[n].bind(this)(t);this.$floater.removeClass(this.settings.position).addClass(n);i.top<this.limits.top&&(i.top=this.limits.top+6),i.left<this.limits.left&&(i.left=this.limits.left+6),i.right>this.limits.right&&(i.left=this.limits.right-this.$floater.outerWidth()-6),this.$floater.show(),this.$floater.offset(i)},hideFloater:function(){this.$floater.hide()},getFloaterPositionTop:function(t){var e=$(t).offset(),n={top:e.top-this.$floater.innerHeight()+this.settings.offset_h,left:e.left+this.settings.offset_w};return n.bottom=n.top+this.$floater.outerHeight(),n.right=n.left+this.$floater.outerWidth(),n},getFloaterPositionLeft:function(t){var e=$(t).offset(),n={top:e.top-this.$floater.outerHeight()/2+$(t).outerHeight()/2+this.settings.offset_h,left:e.left-this.$floater.outerWidth()+this.settings.offset_w};return n.bottom=n.top+this.$floater.outerHeight(),n.right=n.left+this.$floater.outerWidth(),n},getFloaterPositionRight:function(t){var e=$(t).offset(),n={top:e.top-this.$floater.outerHeight()/2+$(t).outerHeight()/2+this.settings.offset_h,left:e.left+$(t).outerWidth()+this.settings.offset_w};return n.bottom=n.top+this.$floater.outerHeight(),n.right=n.left+this.$floater.outerWidth(),n},getSpacialLimits:function(){var t,e=this.$floater.parents().filter(function(t,e){return"hidden"==$(e).css("overflow")});e.length?(t=$(e[0]),this.limits={top:t.offset().top,left:t.offset().left,bottom:t.offset().top+t.outerHeight(),right:t.offset().left+t.outerWidth()}):(t=$(window),this.limits={top:0,left:0,bottom:t.height(),right:t.width()})}}),t.prototype.hide=t.prototype.hideFloater,t}(),t.PhotoEditor=function(){function t(t){t?(this.$container=t,this.$container.sortable({items:".polaroid",helper:"clone",distance:5,stop:function(t,e){var n=e.item.next(".polaroid"),i=e.item.attr("id").split("-").pop(),o=n.length?n.attr("id").split("-").pop():null,s="/do_ajax/sort_photo/"+i+(null===o?"/last":"/before/"+o);$.ajax({url:s})}})):this.$container=null,this.configure(),this.buildUploader(),this.setEvents()}return $.extend(t.prototype,{configure:function(){this.form=void 0,this.uploader=void 0,this.attachment_type=void 0,this.url=void 0},getEditLinks:function(){return $(".polaroid .edit-link")},setEvents:function(){this.setUploaderEvents(),this.getEditLinks().bind("click",function(t){this.active_photo=$(t.target).parents(".polaroid")}.bind(this)),this.getEditLinks().fancybox({helpers:{title:{type:"inside"}},type:"ajax"})},setUploaderEvents:function(){this.uploader.bind("FileUploaded",this.onFileUploaded.bind(this)),this.uploader.bind("UploadComplete",this.onUploadSuccess.bind(this))},setModalEvents:function(){$("#floating_edit_photo form").unbind("submit").bind("submit",this.saveImageData.bind(this)),$("#floating_edit_photo .delete").bind("click",this.deletePhoto.bind(this)),new BeautyCheckbox(".click_tags input")},buildUploader:function(){var t=this.url||"/upload/new_image";this.attachment_type&&(t=t+"?attachment_type="+this.attachment_type),$("#uploader").pluploadQueue({runtimes:this.getRuntimes(),max_file_size:Hab.config.plupload.max_file_size,unique_names:!1,url:t,multipart:!0,flash_swf_url:"http://static.habitissimo.es/components/plupload/js/Moxie.swf",filters:[Hab.config.plupload.filters.img],setup:this.setUploaderUIEvents}),this.uploader=$(this.uploader).pluploadQueue()},getRuntimes:function(){return"html5,html4"},setUploaderUIEvents:function(t){$(".plupload_start").css({opacity:.6}),t.bind("QueueChanged",function(t){t.files.length>0?$(".plupload_start").css({opacity:1}):$(".plupload_start").css({opacity:.6})}.bind(this)),t.refresh()},saveImageData:function(t){var e=$(t.target),n=e.serializeArray();return this.last_query=this.serialToObject(n),this.editing_photo=e.attr("action").split("/").pop(),$.post(e.attr("action"),n,this.onSaveSuccess.bind(this)),!1},onSaveSuccess:function(t){if("success"==(t=$.parseJSON(t)).status){$.fancybox.close();var e=$("#polaroid-"+this.editing_photo);return e.fadeOut("fast",function(){try{$(".title",e).text(truncateString(this.last_query.title,38)),$(".description",e).text(truncateString(this.last_query.description,85)),e.fadeIn("slow")}catch(t){e.show()}}.bind(this)),!0}return alert(t.msg),!1},onUploadSuccess:function(){this.form.submit()},onFileUploaded:function(t,e,n){n=$.parseJSON(n.response),this.form.append($.substitute('<input type="hidden" name="photos[{id}][title]" value=""/>',n)),this.form.append($.substitute('<input type="hidden" name="photos[{id}][desc]" value=""/>',n))},serialToObject:function(t){for(var e={},n=0;n<t.length;n++)e[t[n].name]=t[n].value;return e},deletePhoto:function(t){t.preventDefault(),confirm(__("\xbfEst\xe1s seguro que quieres eliminar la foto? Esta operaci\xf3n es irreversible"))&&$.getJSON($(t.target).attr("href"),{},this.onDeleteSuccess.bind(this))},onDeleteSuccess:function(t){"success"==t.status?($.fancybox.close(),this.active_photo.fadeOut()):$.defined(t.msg)&&alert(t.msg)}}),t}(),t.BeautyCheckbox=function(){return function(t){var e=$(t).addClass("beauty_check_input");e.closest("label").addClass("beauty_check_label"),e.filter(":checked").closest("label").addClass("beauty_check_label_active"),e.on("change",function(t){var e=$(t.target);e.closest("label").toggleClass("beauty_check_label_active",e.is(":checked"))})}}(),t.StateCitySelector=function(){function t(t,e,n){this.state=$(t),this.city=$(e),this.zip=$(n),this.setEvents()}return $.extend(t.prototype,{setEvents:function(){this.state.bind("change",this.updateCities.bind(this)),this.zip.bind("change",this.selectByZip.bind(this))},updateCities:function(){this.city.empty().attr("disabled",!0),this.city[0].options[0]=new Option(__("Cargando"),""),$.getJSON("/do_ajax/autocomplete_cities",{use_key:"id",state:this.state.val()},function(t){this.city.empty(),$.each(t.cities,function(t,e){this.city[0].options[this.city[0].options.length]=new Option(e.name,e.id)}.bind(this)),this.city.removeAttr("disabled").trigger("options_changed")}.bind(this))},selectByZip:function(){var t=this.zip.val().trim();""!==t&&$.getJSON("/do_ajax/autocomplete_zip/"+t,{},function(t){t&&"normalized_state"in t?(this.city.one("options_changed",function(){$(this).val(t.city_id),$(this).trigger("change")}),this.state.val(t.normalized_state).trigger("change")):this.zip.trigger("not_found")}.bind(this))}}),t}(window),t.CategorySubcategorySelector=function(){function t(t,e,n){this.category=$(t),this.subcategory=$(e),this.worktype=$(n),this.setEvents()}return $.extend(t.prototype,{setEvents:function(){this.category.length&&this.category.bind("change",this.updateSubcategories.bind(this)),this.subcategory.length&&this.worktype.length&&this.subcategory.bind("change",this.updateWorkTypes.bind(this))},updateSubcategories:function(){this.subcategory.empty().attr("disabled",!0),this.subcategory[0].options[0]=new Option(__("Cargando"),""),$.getJSON("/do_ajax/autocomplete_subcategories",{category:this.category.val()},function(t){this.subcategory.empty(),$.each(t.subcategories,function(t,e){this.subcategory[0].options[this.subcategory[0].options.length]=new Option(e.name,e.id)}.bind(this)),this.subcategory.removeAttr("disabled").trigger("options_changed")}.bind(this))},updateWorkTypes:function(){0!=this.worktype.length&&(this.worktype.empty().attr("disabled",!0),this.worktype[0].options[0]=new Option(__("Cargando"),""),$.getJSON("/do_ajax/autocomplete_subsubcategories",{subcategory:this.subcategory.val()},function(t){this.worktype.empty(),1==t.subsubcategories.length?this.worktype[0].options[0]=new Option(__("Sin opciones"),""):($.each(t.subsubcategories,function(t,e){this.worktype[0].options[this.worktype[0].options.length]=new Option(e.name,e.id)}.bind(this)),this.worktype.removeAttr("disabled")),this.worktype.trigger("options_changed")}.bind(this)))}}),t}(),t.FieldCounter=function(){function t(t,e){this.field=$(t),this.settings=$.extend({count:"down",goal:"140",allow_negative:!1,msg:__('<span class="text-bold">{count}</span> caracteres para terminar'),template:'<span id="{field_id}_counter" class="field-counter"></span>',show_msg:!0,hide_on_empty:!0},e||{}),this.buildCounterMsg(),this.setEvents(),this.refresh()}return $.extend(t.prototype,{buildCounterMsg:function(){this.field.after($.substitute(this.settings.template,{field_id:this.field.attr("id")})),this.message_element=$("#"+this.field.attr("id")+"_counter")},setEvents:function(){this.field.bind("keyup",this.refresh.bind(this)),this.field.bind("refresh",this.onRefresh.bind(this))},getStrVars:function(){var t={};return t.goal=this.settings.goal,t.count=this.length,"down"==this.settings.count&&(t.count=this.settings.goal-this.length),!this.settings.allow_negative&&t.count<0&&(t.count=0),t},refresh:function(){this.field.trigger("refresh")},onRefresh:function(){this.length=this.field.val().length,this.settings.show_msg=this.length<this.settings.goal,this.settings.hide_on_empty&&0==this.length&&(this.settings.show_msg=!1),this.settings.show_msg?this.message_element.html($.substitute(this.settings.msg,this.getStrVars())):this.message_element.empty()}}),t}(),t.Mask={phone:function(t){if(window.mask_phone)return $(t).mask(window.mask_phone,{translation:{8:{pattern:/[1-9]/},"?":{pattern:/9/,optional:!0},r:{pattern:/[9]/,fallback:"9"}}})},mobile:function(t){if(window.mask_mobile)return $(t).mask(window.mask_mobile,{translation:{8:{pattern:/[1-9]/},"?":{pattern:/9/,optional:!0},r:{pattern:/[9]/,fallback:"9"}}})},zip:function(t){if(window.mask_zip)return $(t).mask(window.mask_zip)},iban:function(t){if(window.mask_iban)return $(t).mask(window.mask_iban)},creditCard:function(t){$(t).mask("9999 9999 9999 9999")},year:function(t){$(t).mask("9999")},mobileCode:function(t,e){$(t).mask(Array(e+1).join("9"))}},t.fancyboxProfiles={gallery:{cyclic:!0,helpers:{title:{type:"inside"}}},thickbox:{helpers:{title:{type:"over"}}},form:{helpers:{title:null}},modalForm:{helpers:{title:null},modal:!0}},t.openNewTab=function(t){window.open(atob(t),"_blank").location},t.go=function(t){window.location=atob(t)},t.base64_decode=function(t){var e,n,i,o,s,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,u=0,c=[];if(!t)return t;t+="";do{e=(a=r.indexOf(t.charAt(l++))<<18|r.indexOf(t.charAt(l++))<<12|(o=r.indexOf(t.charAt(l++)))<<6|(s=r.indexOf(t.charAt(l++))))>>16&255,n=a>>8&255,i=255&a,c[u++]=64==o?String.fromCharCode(e):64==s?String.fromCharCode(e,n):String.fromCharCode(e,n,i)}while(l<t.length);return c.join("")},t.currencyFormat=function(t,e){if(isNaN(t))return"";void 0===e&&(e=!0);var n,i=Number(t),o=e?2:0,s=window.currency_format.replace("%1%","{value}");return n=i.toFixed(o),n=localeFormatNumber(n),nano(s,{value:n})},t.localeFormatNumber=function(t){if(isNaN(t))return"";var e=t.toString(),n=window.decimal_separator,i=window.thousands_separator;return e=e.replace(".",n),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,i)},t.trackAnalyticsEvent=function(t,e,n){"undefined"!=typeof dataLayer&&dataLayer.push({category:t,action:e,label:n,event:"eventga"})},t.hideContentByInputRadios=function(t){var e="";t.each(function(){var t=$(this).val();$(this).prop("checked")?e=t:$('[name~="'+t+'"]').hide()}),$('[name~="'+e+'"]').show().addClass("fadeIn animated").removeClass("hidden")}}(window),function(t,e){function n(t,n,i){var o=function(t){var n=t.filter(function(t){return t.value});return e.param(n)}(n),s=0<=t.indexOf("?");if(i&&(t=function(t,e,n){if(n){var i=t.split("?");t=i[0]+"/"+e+"?"+i[1]}else t+="/"+e;return t}(t,i,s)),o.length>0){t+=(s?"&":"?")+o}return t}t.fbAsyncInit=function(){"undefined"!=typeof FB&&FB.init({appId:window.facebook_appid,status:!1,xfbml:!1,cookie:!0})},"undefined"==typeof FB&&function(t,e,n){var i,o=t.getElementsByTagName(e)[0];t.getElementById(n)||((i=t.createElement(e)).id=n,i.async=!0,i.src="//connect.facebook.net/en_US/all.js",o.parentNode.insertBefore(i,o))}(document,"script","facebook-jssdk"),"Login"in t||(t.Login={}),function(){var i=!1;t.Login.pop=function(t){if(!i){var o="habitissimo";"function"==typeof window.get_brand_name&&(o=get_brand_name());var s='<div data-title="signin"> <h1>'+__("Iniciar sesi\xf3n")+"</h1><small> <strong>"+__("\xbfNo est\xe1s registrado en {brand_name}?",{brand_name:o})+'</strong><div class="p-t-xs"> <a class="brand-color" data-action="show-signup-popup">'+__("Crear cuenta")+"</a> </div> </small> </div>",a='<div data-title="signup"> <h1>'+__("Crear cuenta")+"</h1><small> <span>"+__("\xbfEres aut\xf3nomo o empresa?")+'</span><div class="p-t-xs"> <a href="'+Hab.config.signup_business_url+'" class="brand-color">'+__("Crea una cuenta como profesional")+"</div> </a> </small> </div>";(t=e.extend({back:document.location.href,title:a+s,onsuccess:null,beforeopen:null,default_action:"register",container:null,template_url:Hab.config.ajax_signin_url,active_selector_class:"hidden"},t)).back=t.back.replace(document.location.href,"");var r=t.template_url,l=[{name:"back",value:encodeURIComponent(t.back)},{name:"source_page",value:t.source_page},{name:"source_action",value:t.source_action}];e.ajax({type:"GET",url:n(r,l,t.user_type),success:function(o,s,a){function r(){e('[data-form="signin-popup"]').hide().addClass("hidden"),e('[data-block="signin-popup"]').show().removeClass("hidden"),e('[data-form="signup-popup"]').show().removeClass("hidden"),e('[data-title="signin"]').hide().addClass("hidden"),e('[data-title="signup"]').show().removeClass("hidden"),e("#signin-popup .facebook-text").text(__("Reg\xedstrate con Facebook")),e("#signin-popup .google-text").text(__("Reg\xedstrate con Google"))}function l(){e('[data-form="signup-popup"]').hide().addClass("hidden"),e('[data-block="signin-popup"]').hide().addClass("hidden"),e('[data-form="signin-popup"]').show().removeClass("hidden"),e('[data-title="signup"]').show().hide().addClass("hidden"),e('[data-title="signin"]').show().removeClass("hidden"),e('[data-block="social-buttons"] .facebook-text').text(__("Entra con Facebook")),e('[data-block="social-buttons"] .google-text').text(__("Entra con Google"))}if(t.onsuccess||(t.onsuccess=function(){document.location.href=t.back}),204!=a.status){var u;t.container?((u=e(t.container)).html(o),u.addClass("login-modal")):(u=bootbox.dialog({width:800,message:o,className:"login-modal",title:t.title,onEscape:function(){return!0},show:!1})).attr("id","login-modal"),e('[data-action="show-signup-popup"]').bind("click",r),e('[data-action="show-signin-popup"]').bind("click",l),"login"===t.default_action?l():r(),t.beforeopen&&t.beforeopen.call(this),t.container?u.show():(u.modal("show"),i=!0,u.on("hidden.bs.modal",function(){i=!1})),u.find("#login_customer_form_pop").on("submit",function(i){var o=e(this).closest("form");o.find("[type=submit]").attr("disabled","disabled");var s=Hab.config.api_root+"/user/signin",a=[{name:"source_page",value:t.source_page},{name:"source_action",value:t.source_action}];e.ajax({type:"POST",url:n(s,a,t.user_type),data:o.serialize(),success:function(){"function"==typeof t.onsuccess&&setTimeout(function(){t.onsuccess.call(this)},0),t.container||u.modal("hide")},error:function(t){try{o.find(".form-group").removeClass("has-error").find(".error").remove();var n=e.parseJSON(t.responseText);if(n){var i,s;for(i in n)if((s=o.find("[name="+i+"]")).length>0){var a=s.closest(".form-group");a.addClass("has-error"),e('<small class="help-block error"/>').html(n[i]).hide().appendTo(a).fadeIn("fast");break}}}catch(i){}o.find("[type=submit]").removeAttr("disabled")}}),i.preventDefault()}),u.find("#register-customer-form-pop").on("submit",function(n){var i=e(this).closest("form");i.find("[type=submit]").attr("disabled","disabled"),e.ajax({type:"POST",url:Hab.config.api_root+"/user/signup?source_page="+t.source_page+"&source_action="+t.source_action,data:i.serialize(),success:function(){"function"==typeof t.onsuccess&&setTimeout(function(){t.onsuccess.call(this)},0),t.container||u.modal("hide")},error:function(t){try{i.find(".form-group").removeClass("has-error").find(".error").remove();var n=e.parseJSON(t.responseText);if(n){var o,s;for(o in n)if((s=i.find("[id="+o+"]")).length>0){var a=s.closest(".form-group");a.addClass("has-error"),e('<small class="help-block error"/>').html(n[o]).hide().appendTo(a).fadeIn("fast");break}}}catch(o){}i.find("[type=submit]").removeAttr("disabled")}}),n.preventDefault()})}else"function"==typeof t.onsuccess&&setTimeout(function(){t.onsuccess.call(this)},0)},error:function(){null!==t.href&&(document.location.href=Hab.config.signin_url)}})}},t.Login.container=function(n){var i="habitissimo";return"function"==typeof window.get_brand_name&&(i=get_brand_name()),n=e.extend({back:document.location.href,title:"<h1>"+__("\xa1Bienvenido a {brand_name}!",{brand_name:i})+"</h1><small>"+__("Reg\xedstrate y podr\xe1s inspirarte, resolver tus dudas, encontrar profesionales para tu hogar...")+"</small>",onsuccess:null,default_action:"register",container:"",template_url:Hab.config.ajax_signin_url,active_selector_class:"active"},n),t.Login.pop(n)}}(),t.Login.autoPop=function(){if(!e(".modal.in").length&&!e.cookie("login_prompt")){t.Login.pop.apply(this,[{source_page:"pop_up_register",source_action:"pop_up_register"}]),e.cookie("login_prompt","prompted",{path:"/",domain:window.cookie_domain})}},t.Login.listen=function(){var t=0,n=0;e(window).on("moebius.pageLoaded",function(){++t>2&&Login.autoPop()}),e(window).on("slideshow.pageLoaded",function(){++n>12&&Login.autoPop()}),e.cookie("login_prompt")||setTimeout(function(){Login.autoPop()},3e4)}}(window,jQuery),function(t){"use strict";window.rfq={subcategorySubSubcategory:function(t,e,n,i){i=void 0!=i?i:"";var o=$('select[name="'+t+'"]');void 0!=n&&""!=n&&this._loadSubSubCategories(n,e,i),o.bind("change",function(t){this._loadSubSubCategories(t.target.value,e,"")}.bind(this))},_loadSubSubCategories:function(t,e,n){var i=this._setSelectLoading(e);$.getJSON("/do_ajax/autocomplete_subsubcategories?subcategory="+t,function(t){i.empty(),$.each(t.subsubcategories,function(t,e){i[0].options[i[0].options.length]=new Option(e.name,e.id)}),i.children("option[value="+n+"]")[0].selected=!0,i.attr("size")&&i.attr("size",t.subsubcategories.length),1==i[0].options.length?(i.empty(),i[0].options[i[0].options.length]=new Option(__("Todas"),0),$("#subsubcategory_selector").hide()):($("#subsubcategory_selector").show(),i.removeAttr("disabled")),i.trigger("options_changed")})},_setSelectLoading:function(t){var e=$('select[name="'+t+'"]').empty().attr("disabled",!0);return e[0].options[e[0].options.length]=new Option(__("Cargando..."),""),e},stateCity:function(t,e,n,i){i=void 0!=i?i:"";var o=$('select[name="'+t+'"]'),s=$('select[name="'+e+'"]');void 0!=n&&""!=n&&void 0!=o.children("option[value='"+n+"']")[0]&&(o.children("option[value="+n+"]")[0].selected=!0,this._loadCities(n,e,i)),void 0==n&&""!=o.val()&&""==s.val()&&this._loadCities(o.val(),e,i),o.bind("change",function(t){this._loadCities(t.target.value,e,"")}.bind(this))},_loadCities:function(t,e,n){var i=this._setSelectLoading(e);$.getJSON("/do_ajax/autocomplete_cities",{use_key:"id",state:t},function(t){i.empty(),$.each(t.cities,function(t,e){i[0].options[i[0].options.length]=new Option(e.name,e.id)});var e=i.children("option[value="+n+"]")[0];i.removeAttr("disabled"),e&&(e.selected=!0),i.trigger("options_changed")})}}}(),jQuery(function(t){window.LANG_CODE=t('meta[http-equiv="content-language"]').attr("content"),t.validator&&t.extend(t.validator,{messages:{required:__("Este campo es obligatorio"),email:__("Introduce una direcci\xf3n v\xe1lida"),url:__("Introduce una URL v\xe1lida"),date:__("Introduce una fecha v\xe1lida"),dateISO:__("Introduce una fecha ISO v\xe1lida"),number:__("Introduce un n\xfamero v\xe1lido"),digits:__("Solo se permiten d\xedgitos"),creditcard:__("Introduce un n\xfamero de tarjeta v\xe1lida"),maxlength:t.validator.format(__("No introduzcas m\xe1s de {0} caracteres.")),minlength:t.validator.format(__("Introduce al menos {0} caracteres"))}}),t.datepicker&&(t.datepicker.regional.es_ES={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.regional.it_IT={closeText:"Chiudi",prevText:"&#x3c;Prec",nextText:"Succ&#x3e;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.regional.pt_BR={closeText:"Fechar",prevText:"&#x3c;Anterior",nextText:"Pr&oacute;ximo&#x3e;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},t.datepicker.setDefaults(t.datepicker.regional[window.LANG_CODE]))});var gmaps,MapInputWidget;!function(){function t(t){return void 0!=t}gmaps={maps:{},points:[],createPoint:function(t,e){return new google.maps.LatLng(t,e)},createMap:function(t,e){e=e||{};var n=$.extend(gmaps.settings.mapOptions(),e),i=new google.maps.Map(document.getElementById(t),n);return gmaps.maps[t]=i,i},centerMap:function(t,e,n){e=e||gmaps.points;for(var i=new google.maps.LatLngBounds,o=0;o<e.length;o++)i.extend(e[o]);t.fitBounds(i),n&&t.getZoom()>n&&t.setZoom(n)},addMarker:function(e,n){(n=n||{}).position=n.position||e.getCenter(),n.map=e;var i=$.extend(gmaps.settings.markerOptions(),n);gmaps.points.push(i.position);var o=new google.maps.Marker(i);return t(i.info)&&(o.setClickable(!0),google.maps.event.addListener(o,"click",function(t){return function(){gmaps.addInfoWindow(e,{position:t.position,content:t.info})}}(i))),t(i.url)&&(o.setClickable(!0),google.maps.event.addListener(o,"click",function(t){return function(){window.location.href=t}}(i.url))),o},addInfoWindow:function(t,e){return e=e||{},e.position=e.position||t.getCenter(),e.map=t,gmaps.points.push(e.position),new google.maps.InfoWindow(e)},addDraggableMarker:function(e,n,i,o){(n=n||{}).draggable=!0;var s=gmaps.addMarker(e,n);return t(o)&&google.maps.event.addDomListener(s,"drag",o),t(i)&&google.maps.event.addDomListener(s,"dragend",i),s},geocoderRequest:function(t,e,n,i){(n=n||{}).address=t;var o=$.extend(gmaps.settings.geocoderRequest(),n);(new google.maps.Geocoder).geocode(o,function(t,n){n==google.maps.GeocoderStatus.OK?e(gmaps._enchaceGeocoderResult(t),i):e([],i)})},showGeocoderItem:function(e,n){if(t(n.geometry.bounds)){var i=new google.maps.LatLngBounds;i.extend(gmaps.createPoint(n.geometry.bounds.getNorthEast().lat(),n.geometry.bounds.getNorthEast().lng())),i.extend(gmaps.createPoint(n.geometry.bounds.getSouthWest().lat(),n.geometry.bounds.getSouthWest().lng())),e.fitBounds(i)}else e.setCenter(n.position),e.getZoom()<8&&e.setZoom(8)},isApiLoaded:function(){try{return google.maps.Map,!0}catch(t){return!1}},_enchaceGeocoderResult:function(t){return $(t).map(function(t,e){var n=gmaps.createPoint(e.geometry.location.lat(),e.geometry.location.lng());return e.position=n,e})},settings:{mapOptions:function(){return{center:new google.maps.LatLng(Hab.config.country_lat,Hab.config.country_lng),dragable:!0,keyboardShortcuts:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID]},scaleControl:!1,scrollwheel:!1,zoom:Hab.config.country_map_zoom,zoomControl:!0,streetViewControl:!1,minZoom:3}},markerOptions:function(){return{clickable:!1,draggable:!1,flat:!1,raiseOnDrag:!0,title:void 0,visible:!0,zIndex:1}},geocoderRequest:function(){return{}}}},(MapInputWidget=function(t){this.configure(t||{}),this.buildMap(),this.buildGeocoderResultsList(),this.setEvents()}).prototype.configure=function(t){this.map=void 0,this.marker=void 0,this.canvas=$(t.canvas||"#map_canvas"),this.address=$(t.address_field||"#address"),this.lat=$(t.lat_field||"#geo_lat"),this.lng=$(t.lng_field||"#geo_lng"),this.zip=$(t.zip_field||"#zip"),this.search=$(t.search||"#geo_search"),this.form=this.address.parents("form"),this.events_set=!1},MapInputWidget.prototype.buildMap=function(){var t={};this.lat.val()&&this.lng.val()&&(t.center=gmaps.createPoint(this.lat.val(),this.lng.val())),this.map=gmaps.createMap(this.canvas.attr("id"),t),this.marker=gmaps.addDraggableMarker(this.map,{},function(t){this.onMapCursorMove(t.latLng)}.bind(this))},MapInputWidget.prototype.buildGeocoderResultsList=function(){$("body").append('<div id="geocoder_results" style="display: none"><ul></ul></div>')},MapInputWidget.prototype.setEvents=function(){this.events_set||(this.address.bind("change",function(){this.removeEvents(),this.zip.val(""),gmaps.geocoderRequest(this.address.val(),this.onGeocoderSuccess.bind(this))}.bind(this)),this.address.keypress(function(t){13==t.which&&(t.preventDefault(),this.address.trigger("change"))}.bind(this)),this.search.bind("click",function(){this.address.trigger("change")}.bind(this)),this.events_set=!0)},MapInputWidget.prototype.removeEvents=function(){this.address.unbind("change"),this.address.unbind("keypress"),this.search.unbind("click"),this.events_set=!1},MapInputWidget.prototype.onGeocoderSuccess=function(t){0!=t.length?1!=t.length?($("#geocoder_results ul").empty(),$(t).each(function(t,e){var n='<li class="result_'+t+'"><a>'+e.formatted_address+"</a></li>";$("#geocoder_results ul").append(n)}),$.fancybox({hideOnContentClick:!1,content:$("#geocoder_results").html(),onClosed:this.setEvents.bind(this)}),$(t).each(function(t,e){$(".fancybox-inner .result_"+t).unbind("click").bind("click",function(t){return t.preventDefault(),this.onGeocoderResultClick(e),!1}.bind(this))}.bind(this))):this.focusGeocoderItem(t[0]):this.setEvents()},MapInputWidget.prototype.onMapCursorMove=function(t){if(this.lat.val(t.lat()),this.lng.val(t.lng()),this.zip){var e={location:this.marker.position};(new google.maps.Geocoder).geocode(e,function(t){var e=void 0;void 0!==t&&t.length&&(e=this.extractItemZip(t[0])),e&&this.zip[0]&&this.zip.val(e.long_name)}.bind(this))}},MapInputWidget.prototype.onGeocoderResultClick=function(t){this.focusGeocoderItem(t),$.fancybox.close()},MapInputWidget.prototype.focusGeocoderItem=function(t){var e=this.extractItemStreet(t);e&&this.address.val(e.long_name),gmaps.showGeocoderItem(this.map,t),this.marker.setPosition(t.position),this.onMapCursorMove(t.position),this.setEvents()},MapInputWidget.prototype.extractItemStreet=function(t){var e=$(t.address_components).filter(function(t,e){var n=$.inArray("route",e.types)>=0,i=$.inArray("establishment",e.types)>=0;return n||i});return e[0]?e[0]:void 0},MapInputWidget.prototype.extractItemZip=function(t){var e=$(t.address_components).filter(function(t,e){return $.inArray("postal_code",e.types)>=0});return e[0]?e[0]:void 0}}(),function(t,e){window.Quotation={recomendBusiness:{init:function(){this.form=t("#search-professional-form"),this.form_full=t("#recommend-professional-form"),this.spinner=t("#spinner"),this.setEvents()},setEvents:function(){this.form.bind("submit",this.formSubmit.bind(this))},formSubmit:function(e){return!!this.formIsValid()&&(e.preventDefault(),this.spinner.show(),t.get("/do_ajax/recommend/search/business",this.getFormData(),function(e){0==t("#results_wrapper").length&&t("body").append("<div class='hide'><div id='results_wrapper'></div></div>"),t("#results_wrapper").html(e),0!=t("#results li.business").length?(t("#results li.no").bind("click",this.openFullForm.bind(this)),t.fancybox({modal:!0,href:"#results_wrapper"})):this.openFullForm(),this.spinner.hide()}.bind(this)),!1)},getFormData:function(){return{name:this.form.find("#s_name").val(),phone:this.form.find("#s_phone").val(),state:this.form.find("#s_state").val()}},formIsValid:function(){return this.form.find("#s_name").addClass("required"),this.form.find("#s_state").addClass("required"),this.form.valid()},openFullForm:function(){t.fancybox.close(),this.form_full.find("#id_name").val(this.form.find("#s_name").val()),this.form_full.find("#id_phone").val(this.form.find("#s_phone").val()),this.form_full.find("#state").val(this.form.find("#s_state").val()).change(),this.form.hide(),this.form_full.show()}},add:{init:function(){},setEvents:function(){t("#zip").bind("change","actualiza_provincia"),t("#city_personal").bind("change","checkOtherCityPersonal"),t("#type_of_place").bind("change","checkOtherType"),t("#status_of_place").bind("change","checkOtherType")}}}}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.Blazy=e()}(this,function(){"use strict";function t(t){var n=t._util;n.elements=function(t){for(var e=[],n=t.root.querySelectorAll(t.selector),i=n.length;i--;e.unshift(n[i]));return e}(t.options),n.count=n.elements.length,n.destroyed&&(n.destroyed=!1,t.options.container&&m(t.options.container,function(t){f(t,"scroll",n.validateT)}),f(window,"resize",n.saveViewportOffsetT),f(window,"resize",n.validateT),f(window,"scroll",n.validateT)),e(t)}function e(t){for(var e=t._util,i=0;i<e.count;i++){var o=e.elements[i];((function(t,e){var i=t.getBoundingClientRect();if(e.container&&_){var o=t.closest(e.containerClass);if(o){var s=o.getBoundingClientRect();if(n(s,b)){var a=s.top-e.offset,r=s.right+e.offset,l=s.bottom+e.offset,u=s.left-e.offset,c={top:a>b.top?a:b.top,right:r<b.right?r:b.right,bottom:l<b.bottom?l:b.bottom,left:u>b.left?u:b.left};return n(i,c)}return!1}}return n(i,b)})(o,t.options)||h(o,t.options.successClass))&&(t.load(o),e.elements.splice(i,1),e.count--,i--)}0===e.count&&t.destroy()}function n(t,e){return t.right>=e.left&&t.bottom>=e.top&&t.left<=e.right&&t.top<=e.bottom}function i(t,e,n){if(!h(t,n.successClass)&&(e||n.loadInvisible||t.offsetWidth>0&&t.offsetHeight>0)){var i=l(t,y)||l(t,n.src);if(i){var r=i.split(n.separator),u=r[w&&r.length>1?1:0],p=l(t,n.srcset),v=c(t,"img"),b=t.parentNode,_=b&&c(b,"picture");if(v||void 0===t.src){var C=new Image,F=function(){n.error&&n.error(t,"invalid"),d(t,n.errorClass),g(C,"error",F),g(C,"load",S)},S=function(){v?_||a(t,u,p):t.style.backgroundImage='url("'+u+'")',o(t,n),g(C,"load",S),g(C,"error",F)};_&&(C=t,m(b.getElementsByTagName("source"),function(t){s(t,k,n.srcset)})),f(C,"error",F),f(C,"load",S),a(C,u,p)}else t.src=u,o(t,n)}else c(t,"video")?(m(t.getElementsByTagName("source"),function(t){s(t,x,n.src)}),t.load(),o(t,n)):(n.error&&n.error(t,"missing"),d(t,n.errorClass))}}function o(t,e){d(t,e.successClass),e.success&&e.success(t),u(t,e.src),u(t,e.srcset),m(e.breakpoints,function(e){u(t,e.src)})}function s(t,e,n){var i=l(t,n);i&&(r(t,e,i),u(t,n))}function a(t,e,n){n&&r(t,k,n),t.src=e}function r(t,e,n){t.setAttribute(e,n)}function l(t,e){return t.getAttribute(e)}function u(t,e){t.removeAttribute(e)}function c(t,e){return t.nodeName.toLowerCase()===e}function h(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")}function d(t,e){h(t,e)||(t.className+=" "+e)}function p(t){b.bottom=(window.innerHeight||document.documentElement.clientHeight)+t,b.right=(window.innerWidth||document.documentElement.clientWidth)+t}function f(t,e,n){t.attachEvent?t.attachEvent&&t.attachEvent("on"+e,n):t.addEventListener(e,n,{capture:!1,passive:!0})}function g(t,e,n){t.detachEvent?t.detachEvent&&t.detachEvent("on"+e,n):t.removeEventListener(e,n,{capture:!1,passive:!0})}function m(t,e){if(t&&e)for(var n=t.length,i=0;i<n&&!1!==e(t[i],i);i++);}function v(t,e,n){var i=0;return function(){var o=+new Date;o-i<e||(i=o,t.apply(n,arguments))}}var y,b,w,_,x="src",k="srcset";return function(n){if(!document.querySelectorAll){var o=document.createStyleSheet();document.querySelectorAll=function(t,e,n,i,s){for(s=document.all,e=[],n=(t=t.replace(/\[for\b/gi,"[htmlFor").split(",")).length;n--;){for(o.addRule(t[n],"k:v"),i=s.length;i--;)s[i].currentStyle.k&&e.push(s[i]);o.removeRule(0)}return e}}var s=this,a=s._util={};a.elements=[],a.destroyed=!0,s.options=n||{},s.options.error=s.options.error||!1,s.options.offset=s.options.offset||100,s.options.root=s.options.root||document,s.options.success=s.options.success||!1,s.options.selector=s.options.selector||".b-lazy",s.options.separator=s.options.separator||"|",s.options.containerClass=s.options.container,s.options.container=!!s.options.containerClass&&document.querySelectorAll(s.options.containerClass),s.options.errorClass=s.options.errorClass||"b-error",s.options.breakpoints=s.options.breakpoints||!1,s.options.loadInvisible=s.options.loadInvisible||!1,s.options.successClass=s.options.successClass||"b-loaded",s.options.validateDelay=s.options.validateDelay||25,s.options.saveViewportOffsetDelay=s.options.saveViewportOffsetDelay||50,s.options.srcset=s.options.srcset||"data-srcset",s.options.src=y=s.options.src||"data-src",_=Element.prototype.closest,w=window.devicePixelRatio>1,(b={}).top=0-s.options.offset,b.left=0-s.options.offset,s.revalidate=function(){t(s)},s.load=function(t,e){var n=this.options;t&&void 0===t.length?i(t,e,n):m(t,function(t){i(t,e,n)})},s.destroy=function(){var t=s._util;s.options.container&&m(s.options.container,function(e){g(e,"scroll",t.validateT)}),g(window,"scroll",t.validateT),g(window,"resize",t.validateT),g(window,"resize",t.saveViewportOffsetT),t.count=0,t.elements.length=0,t.destroyed=!0},a.validateT=v(function(){e(s)},s.options.validateDelay,s),a.saveViewportOffsetT=v(function(){p(s.options.offset)},s.options.saveViewportOffsetDelay,s),p(s.options.offset),m(s.options.breakpoints,function(t){if(t.width>=window.screen.width)return y=t.src,!1}),setTimeout(function(){t(s)})}}),jQuery(function(){window.bLazy=new Blazy({selector:"img.lazy",successClass:"loaded",loadInvisible:!0,success:function(t){1==t.getAttribute("data-bg")&&(t.style.backgroundImage="url('"+t.src+"')")}})});var QuotationManager=function(t,e,n){this.element=$(t),this.id=this.element.attr("data-id"),this.business_id=this.element.attr("data-business-id"),this.urls=n,this.setFields(e),this.setEvents()};$.extend(QuotationManager.prototype,{setEvents:function(){this.fields.statusInput.on("change",this.saveStatus.bind(this)),this.fields.statusJobAcquired.on("change",this.updateStatus.bind(this)),this.fields.priceLink.on("click",this.openPriceInput.bind(this)),this.fields.priceText.on("dblclick",this.openPriceInput.bind(this)),this.fields.priceSave.on("click",this.savePrice.bind(this)),this.fields.priceInput.on("keyup",this.formatPrice.bind(this)),this.fields.descEdit.on("click",this.openDescriptionInput.bind(this)),this.fields.descNew.on("click",this.openDescriptionInput.bind(this)),this.fields.descText.on("dblclick",this.openDescriptionInput.bind(this)),this.fields.descCancel.on("click",this.cancelDescriptionEdition.bind(this)),this.fields.descSave.on("click",this.saveDescription.bind(this))},getDefaultFields:function(){return{statusInput:this.element.find(".select-qbstatus"),statusShow:this.element.find(".show-qbstatus"),statusShowEdit:this.element.find(".select-qbstatus"),statusJobAcquired:this.element.find(".job-acquired"),priceLink:this.element.find(".edit.price_button"),priceText:this.element.find(".theprice"),priceInput:this.element.find(".price_input"),priceSave:this.element.find(".saveprice_button"),priceShow:this.element.find(".showprice"),priceShowEdit:this.element.find(".showeditprice"),descText:this.element.find(".showdescription"),descEdit:this.element.find(".editdescription"),descNew:this.element.find(".newdescription"),descCancel:this.element.find(".canceltextedition"),descSave:this.element.find(".savetext_button"),descShowEdit:this.element.find(".showeditdescription"),descTextArea:this.element.find(".description_textarea")}},setFields:function(t){this.fields=jQuery.extend(this.getDefaultFields(),t)},openPriceInput:function(){this.fields.priceShow.hide(),this.fields.priceShowEdit.show()},openDescriptionInput:function(){this.fields.descNew.hide(),this.fields.descText.hide(),this.fields.descShowEdit.show()},closePriceInput:function(){this.fields.priceShowEdit.hide(),this.fields.priceShow.show()},closeDescriptionInput:function(){this.fields.descShowEdit.hide(),this.fields.descText.find("p:not(:empty)").length>0?(this.fields.descEdit.removeClass("hidden").show(),this.fields.descText.removeClass("hidden").show()):this.fields.descNew.removeClass("hidden").show()},cancelDescriptionEdition:function(){this.fields.descTextArea.val(this.fields.descTextArea.text()),this.closeDescriptionInput()},saveDescription:function(){$.ajax({url:this.urls.updateDescURL,type:"POST",data:{description:this.fields.descTextArea.val(),quotation_id:this.id},success:function(t){this.fields.descText.find("p").remove(),this.fields.descText.append(t),this.fields.descTextArea.text(this.fields.descTextArea.val()),this.closeDescriptionInput()}.bind(this)})},savePrice:function(){$.ajax({url:this.urls.updatePriceURL,type:"POST",data:{quotation_amount:this.fields.priceInput.val().replace(",","."),quotation_id:this.id},success:function(t){var e=t.split("#")[0],n=t.split("#")[1];this.fields.priceInput.val(e),this.fields.priceText.html(n),0!=e?this.fields.priceLink.html(this.fields.priceLink.html().replace(__("Introducir presupuesto"),__("Editar"))):this.fields.priceLink.html(this.fields.priceLink.html().replace(__("Editar"),__("Introducir presupuesto"))),this.closePriceInput()}.bind(this)})},saveStatus:function(t){$.ajax({url:this.urls.updateStatusURL,type:"POST",data:{status:$(t.target).val(),quotation_id:this.id,business_id:this.business_id},success:function(){Utilities.showNoticeByName("success_toast_qb_change_status")},error:function(){Utilities.showNoticeByName("error_toast_qb_change_status")}})},formatPrice:function(){var t=this.fields.priceInput;t.val(t.val().replace(/[^0-9.,]/g,"")),t.val(t.val().replace(/[.,]/g,window.decimal_separator));var e=t.val().split(window.decimal_separator);e.length>1&&t.val(e[0]+window.decimal_separator+e[1].substr(0,2))},updateStatus:function(t){var e=$(t.target).is(":checked"),n=$(t.target).data("accepted");e||(n=$(t.target).data("unclassified")),this.fields.statusInput.val(n).trigger("change")}}),function(t,e){"use strict";"Chat"in t||(t.Chat={}),function(){var n;t.Chat.clearChatCounterTimers=function(){void 0!==n&&clearInterval(n)},t.Chat.updateUnreadMessages=function(){e.ajax({url:"/do_ajax/chat/chat_count_unread",method:"GET"}).done(function(t){var n=e('*[data-chat="unread-counter"]'),i=e(".chat-tooltip .tooltip-content");if(n)if(t.unread_count>0){n.removeClass("inactive");var o="";e.each(t.unread_messages,function(t,e){o+='<div class="msg-block" data-trackevent="'+e.tracking_category+'.click-message-noread" data-conversation="open-inbox-unread" data-chat="'+e.chat_id+'">              <span class="msg-title">'+e.user_name+'</span>              <div class="msg-content"><div class="arrow"><i class="icon icon-reply-o"></i></div>              <div class="text">'+e.body+'</div><div class="chat-date">'+e.date+"</div></div></div>"}),i.html(o),n.html(t.unread_count)}else i.html(__('<p class="text-center no-messages">No hay mensajes nuevos</p>')),n.addClass("inactive")})},t.Chat.checkIfChatIsOpen=function(){return e("body").hasClass("chat-open")},t.Chat.addOpenChatClass=function(){var t=e("body");t.hasClass("chat-open")||t.addClass("chat-open")},t.Chat.removeOpenChatClass=function(){var t=e("body");t.hasClass("chat-open")&&t.removeClass("chat-open")},t.Chat.updateTimer=function(){n=setInterval(this.updateUnreadMessages,3e5)},t.Chat.checkNavbarNotifierAndUpdate=function(){e(".chat-navbar-notifier").length&&(Chat.unreadMessagesPolling(),this.updateTimer())},t.Chat.unreadMessagesPolling=function(){e(document).idle({onIdle:function(){Chat.clearChatCounterTimers()},onActive:function(){Chat.updateTimer()},idle:6e4})},t.Chat.createNewConversation=function(t){t.preventDefault();var n=e(this),i=n.data("business"),o=n.data("quotation");if(n.hasClass("disabled"))return!1;n.addClass("disabled"),e.ajax({method:"POST",url:"/do_ajax/chat/chat_create_new_conversation",data:{quotation:o,business:i}}).done(function(t){n.removeClass("disabled"),Chat.openConversationModal({title:__("Enviar mensaje privado a <span></span>"),message:t,className:"gray-modal"})}).fail(function(){n.removeClass("disabled"),bootbox.alert(__("No se ha podido abrir la conversaci\xf3n"))})},t.Chat.openChatModal=function(t){if(t.preventDefault(),!Chat.checkIfChatIsOpen()){Chat.addOpenChatClass();var n=e(this),i=n.data("quotation"),o=n.data("business");if(n.hasClass("disabled"))return!1;n.addClass("disabled"),e.ajax({url:"/do_ajax/chat/chat_open_conversation",method:"GET",data:{quotation:i,business:o}}).done(function(t){n.removeClass("disabled"),Chat.openConversationModal({title:'<span class="name"></span><small></small>',message:t,className:"modal-conversation"})})}},t.Chat.openConversationModal=function(t){bootbox.dialog({title:t.title,message:t.message,className:t.className,onEscape:Chat.removeOpenChatClass}).on("shown.bs.modal",function(){Chat.scrollToForm()})},t.Chat.setSelectedConversation=function(t){t.preventDefault();var n=e(this),i=e(".conversation-container"),o=e(".chat-user-summary"),s=e(".modal-chat");e.ajax({method:"GET",url:"/do_ajax/chat/chat_get_conversation",data:{chat:n.data("chat")}}).done(function(t){i.html(t),e.each(o,function(){o.hasClass("active")&&o.removeClass("active")}),n.addClass("active"),s.toggleClass("active-inbox active-conversation")})},t.Chat.setNewMessageModalClasses=function(){e(".gray-modal").find(".modal-dialog").addClass("modal-chat-new")},t.Chat.setChatModalTitle=function(t){e(".modal-chat").find(".modal-title").html(t)},t.Chat.setNewMessageModalTitle=function(t){var n=e(".gray-modal");n.length&&n.find(".modal-title").find("span").html(t)},t.Chat.setGenericTitle=function(){setTimeout(function(){Chat.setChatModalTitle(__("Bandeja de entrada"))},0)},t.Chat.setChatModalClasses=function(){var t=e(".modal-conversation");t.length&&t.find(".modal-content").addClass("modal-chat modal-lg active-inbox")},t.Chat.setActiveChatClasses=function(t){e('*[data-chat="'+t+'"]').addClass("active")},t.Chat.setInboxAsActive=function(){e(".modal-chat").toggleClass("active-conversation active-inbox"),Chat.setChatModalTitle(__("Bandeja de entrada"))},t.Chat.setConversationAsRead=function(t){e.ajax({url:"/do_ajax/chat/chat_mark_read",method:"POST",data:{chat:t}})},t.Chat.scrollToForm=function(){var t=e(".chat-right-col"),n=e("#chat-new-message");t.length&&n.length&&t.scrollTop(n.position().top)},t.Chat.scrollToScroller=function(){var t=e(".conversation-container"),n=e("#chat-new-message");t.length&&n.length&&setTimeout(function(){document.getElementById("chat-new-message").scrollIntoView()},800)},t.Chat.sendFirstMessage=function(t){t.preventDefault();var n=e(this),i=e('*[data-chat="msg-content"]'),o=i.data("business"),s=i.data("quotation"),a=i.val().trim();a?(n.addClass("disabled"),n.prop("disabled",!0),i.attr("readonly",!0),e.ajax({method:"POST",url:"/do_ajax/chat/chat_send_messsage",data:{business:o,quotation:s,body:a}}).done(function(){window.location.reload(!0)}).fail(function(){window.location.reload(!0)})):e(".no-message-error").removeClass("hidden")},t.Chat.sendNewMessage=function(t){t.preventDefault();var n=e(this),i=e('*[data-chat="msg-content"]'),o=i.val().trim(),s=i.data("conversation");o?(n.addClass("disabled"),n.prop("disabled",!0),i.attr("readonly",!0),e.ajax({method:"POST",url:"/do_ajax/chat/chat_new_messsage",data:{chat:s,body:o}}).done(function(){window.location.reload(!0)}).fail(function(){window.location.reload(!0)})):e(".no-message-error").removeClass("hidden")},t.Chat.openConversationFromParameter=function(t,n){e.ajax({url:"/do_ajax/chat/chat_open_conversation",method:"GET",data:{quotation:t,business:n}}).done(function(t){Chat.openConversationModal({title:'<span class="name"></span><small></small>',message:t,className:"modal-conversation"})})},t.Chat.openUnreadConversation=function(t){if(t.preventDefault(),!Chat.checkIfChatIsOpen()){Chat.addOpenChatClass();var n=e(this),i=n.data("chat");if(n.hasClass("disabled"))return!1;n.addClass("disabled"),e.ajax({url:"/do_ajax/chat/chat_get_unread_conversation",type:"GET",data:{chat:i}}).done(function(t){Chat.openConversationFromParameter(t.quotation,t.business),setTimeout(function(){n.removeClass("disabled")},200)})}}}()}(window,jQuery),function(t,e){"use strict";jQuery.fn.karuselo=function(t){t=t||{};var e=this.carousel(t);return new Hammer(this.get(0),{}).on("swipeleft swiperight",function(t){"swipeleft"==t.type?e.carousel("next"):"swiperight"==t.type&&e.carousel("prev")}),this}}(window),function(t,e){"FullScreenVideo"in t||(t.FullScreenVideo={}),t.FullScreenVideo.createVideoOverlay=function(){return this.videoOverlay=e('<div><i id="close-video-overlay" class="icon icon-close-o"></i>       <div id="fullscreen-video-content" class="embed-responsive embed-responsive-16by9"></div></div>').attr("id","fullscreen-video-overlay"),this.videoOverlay.find("#close-video-overlay").on("click",this.removeVideoOverlay.bind(this)),e(document).one("keypress",function(t){27===t.keyCode&&this.removeVideoOverlay()}.bind(this)),this.videoOverlay},t.FullScreenVideo.showVideo=function(t,e){this.video=t,this.videoProvider=e||"generic",this.insertVideoOverlay()},t.FullScreenVideo.insertVideoOverlay=function(){switch(this.videoOverlayExists()&&this.removeVideoOverlay(),e("body").append(this.createVideoOverlay()),this.videoProvider){case"youtube":this.insertYoutubeIframe(),void 0==t.YT?this.loadYoutubeApi():onYouTubePlayerAPIReady()}},t.FullScreenVideo.insertYoutubeIframe=function(){var t=e("<iframe allowfulscreen></iframe>").attr("id","fullscreen-video").attr("src",this.video).addClass("embed-responsive-item");this.videoOverlay.find("#fullscreen-video-content").html(t)},t.FullScreenVideo.videoOverlayExists=function(){return e("#fullscreen-video-overlay").length>0},t.FullScreenVideo.removeVideoOverlay=function(){this.videoOverlay.find("#close-video-overlay").off().remove(),this.videoOverlay.find("#fullscreen-video").off().remove(),this.videoOverlay.off().remove(),e(document).off("keypress"),this.videoOverlay=void 0},t.FullScreenVideo.loadYoutubeApi=function(){if(void 0===t.YT){var e=document.createElement("script");e.src="//www.youtube.com/player_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}},t.onYouTubePlayerAPIReady=function(){var t=new YT.Player("fullscreen-video",{events:{onReady:function(){t.playVideo()},onStateChange:function(t){0===t.data&&FullScreenVideo.removeVideoOverlay()}}})}}(window,jQuery),function(t,n,i,o){function a(e,n){this.element=e,this.options=t.extend(!0,{},l,n),this.options.share=n.share,this._defaults=l,this._name=r,this.init()}var r="sharrre",l={className:"sharrre",share:{googlePlus:!1,facebook:!1,twitter:!1,digg:!1,delicious:!1,stumbleupon:!1,linkedin:!1,pinterest:!1},shareTotal:0,template:"",title:"",url:i.location.href,text:i.title,urlCurl:"sharrre.php",count:{},total:0,shorterTotal:!0,enableHover:!0,enableCounter:!0,enableTracking:!1,hover:function(){},hide:function(){},click:function(){},render:function(){},buttons:{googlePlus:{url:"",urlCount:!1,size:"medium",lang:"en-US",annotation:""},facebook:{url:"",urlCount:!1,action:"like",layout:"button_count",width:"",send:"false",faces:"false",colorscheme:"",font:"",lang:"en_US"},twitter:{url:"",urlCount:!1,count:"horizontal",hashtags:"",via:"",related:"",lang:"en"},digg:{url:"",urlCount:!1,type:"DiggCompact"},delicious:{url:"",urlCount:!1,size:"medium"},stumbleupon:{url:"",urlCount:!1,layout:"1"},linkedin:{url:"",urlCount:!1,counter:""},pinterest:{url:"",media:"",description:"",layout:"horizontal"}}},u={googlePlus:"",facebook:"https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27{url}%27&callback=?",twitter:"http://cdn.api.twitter.com/1/urls/count.json?url={url}&callback=?",digg:"http://services.digg.com/2.0/story.getInfo?links={url}&type=javascript&callback=?",delicious:"http://feeds.delicious.com/v2/json/urlinfo/data?url={url}&callback=?",stumbleupon:"",linkedin:"http://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?",pinterest:"http://api.pinterest.com/v1/urls/count.json?url={url}&callback=?"},c={googlePlus:function(e){var o=e.options.buttons.googlePlus;t(e.element).find(".buttons").append('<div class="button googleplus"><div class="g-plusone" data-size="'+o.size+'" data-href="'+(""!==o.url?o.url:e.options.url)+'" data-annotation="'+o.annotation+'"></div></div>'),n.___gcfg={lang:e.options.buttons.googlePlus.lang};var s=0;"undefined"==typeof gapi&&0==s?(s=1,function(){var t=i.createElement("script");t.type="text/javascript",t.async=!0,t.src="//apis.google.com/js/plusone.js";var e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()):gapi.plusone.go()},facebook:function(e){var n=e.options.buttons.facebook;t(e.element).find(".buttons").append('<div class="button facebook"><div id="fb-root"></div><div class="fb-like" data-href="'+(""!==n.url?n.url:e.options.url)+'" data-send="'+n.send+'" data-layout="'+n.layout+'" data-width="'+n.width+'" data-show-faces="'+n.faces+'" data-action="'+n.action+'" data-colorscheme="'+n.colorscheme+'" data-font="'+n.font+'" data-via="'+n.via+'"></div></div>');var o=0;"undefined"==typeof FB&&0==o?(o=1,function(t,e,i){var o,s=t.getElementsByTagName(e)[0];t.getElementById(i)||((o=t.createElement(e)).id=i,o.src="//connect.facebook.net/"+n.lang+"/all.js#xfbml=1",s.parentNode.insertBefore(o,s))}(i,"script","facebook-jssdk")):FB.XFBML.parse()},twitter:function(e){var n=e.options.buttons.twitter;t(e.element).find(".buttons").append('<div class="button twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-url="'+(""!==n.url?n.url:e.options.url)+'" data-count="'+n.count+'" data-text="'+e.options.text+'" data-via="'+n.via+'" data-hashtags="'+n.hashtags+'" data-related="'+n.related+'" data-lang="'+n.lang+'">Tweet</a></div>');var o=0;"undefined"==typeof twttr&&0==o?(o=1,function(){var t=i.createElement("script");t.type="text/javascript",t.async=!0,t.src="//platform.twitter.com/widgets.js";var e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()):t.ajax({url:"//platform.twitter.com/widgets.js",dataType:"script",cache:!0})},digg:function(e){var n=e.options.buttons.digg;t(e.element).find(".buttons").append('<div class="button digg"><a class="DiggThisButton '+n.type+'" rel="nofollow external" href="http://digg.com/submit?url='+encodeURIComponent(""!==n.url?n.url:e.options.url)+'"></a></div>');var o=0;"undefined"==typeof __DBW&&0==o&&(o=1,function(){var t=i.createElement("SCRIPT"),e=i.getElementsByTagName("SCRIPT")[0];t.type="text/javascript",t.async=!0,t.src="//widgets.digg.com/buttons.js",e.parentNode.insertBefore(t,e)}())},delicious:function(e){if("tall"==e.options.buttons.delicious.size)var n="width:50px;",i="height:35px;width:50px;font-size:15px;line-height:35px;",o="height:18px;line-height:18px;margin-top:3px;";else var n="width:93px;",i="float:right;padding:0 3px;height:20px;width:26px;line-height:20px;",o="float:left;height:20px;line-height:20px;";var s=e.shorterTotal(e.options.count.delicious);void 0===s&&(s=0),t(e.element).find(".buttons").append('<div class="button delicious"><div style="'+n+'font:12px Arial,Helvetica,sans-serif;cursor:pointer;color:#666666;display:inline-block;float:none;height:20px;line-height:normal;margin:0;padding:0;text-indent:0;vertical-align:baseline;"><div style="'+i+'background-color:#fff;margin-bottom:5px;overflow:hidden;text-align:center;border:1px solid #ccc;border-radius:3px;">'+s+'</div><div style="'+o+'display:block;padding:0;text-align:center;text-decoration:none;width:50px;background-color:#7EACEE;border:1px solid #40679C;border-radius:3px;color:#fff;"><img src="http://www.delicious.com/static/img/delicious.small.gif" height="10" width="10" alt="Delicious" /> Add</div></div></div>'),t(e.element).find(".delicious").on("click",function(){e.openPopup("delicious")})},stumbleupon:function(e){var o=e.options.buttons.stumbleupon;t(e.element).find(".buttons").append('<div class="button stumbleupon"><su:badge layout="'+o.layout+'" location="'+(""!==o.url?o.url:e.options.url)+'"></su:badge></div>');var a=0;"undefined"==typeof STMBLPN&&0==a?(a=1,function(){var t=i.createElement("script");t.type="text/javascript",t.async=!0,t.src="//platform.stumbleupon.com/1/widgets.js";var e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),s=n.setTimeout(function(){"undefined"!=typeof STMBLPN&&(STMBLPN.processWidgets(),clearInterval(s))},500)):STMBLPN.processWidgets()},linkedin:function(e){var o=e.options.buttons.linkedin;t(e.element).find(".buttons").append('<div class="button linkedin"><script type="in/share" data-url="'+(""!==o.url?o.url:e.options.url)+'" data-counter="'+o.counter+'"><\/script></div>');var s=0;void 0===n.IN&&0==s?(s=1,function(){var t=i.createElement("script");t.type="text/javascript",t.async=!0,t.src="//platform.linkedin.com/in.js";var e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()):n.IN.init()},pinterest:function(e){var n=e.options.buttons.pinterest;t(e.element).find(".buttons").append('<div class="button pinterest"><a href="http://pinterest.com/pin/create/button/?url='+(""!==n.url?n.url:e.options.url)+"&media="+n.media+"&description="+n.description+'" class="pin-it-button" count-layout="'+n.layout+'">Pin It</a></div>'),function(){var t=i.createElement("script");t.type="text/javascript",t.async=!0,t.src="//assets.pinterest.com/js/pinit.js";var e=i.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}},h={googlePlus:function(){},facebook:function(){fb=n.setInterval(function(){"undefined"!=typeof FB&&(FB.Event.subscribe("edge.create",function(t){_gaq.push(["_trackSocial","facebook","like",t])}),FB.Event.subscribe("edge.remove",function(t){_gaq.push(["_trackSocial","facebook","unlike",t])}),FB.Event.subscribe("message.send",function(t){_gaq.push(["_trackSocial","facebook","send",t])}),clearInterval(fb))},1e3)},twitter:function(){tw=n.setInterval(function(){"undefined"!=typeof twttr&&(twttr.events.bind("tweet",function(t){t&&_gaq.push(["_trackSocial","twitter","tweet"])}),clearInterval(tw))},1e3)},digg:function(){},delicious:function(){},stumbleupon:function(){},linkedin:function(){},pinterest:function(){}},d={googlePlus:function(t){n.open("https://plus.google.com/share?hl="+t.buttons.googlePlus.lang+"&url="+encodeURIComponent(""!==t.buttons.googlePlus.url?t.buttons.googlePlus.url:t.url),"","toolbar=0, status=0, width=900, height=500")},facebook:function(t){n.open("http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(""!==t.buttons.facebook.url?t.buttons.facebook.url:t.url)+"&t="+t.text,"","toolbar=0, status=0, width=900, height=500")},twitter:function(t){n.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(t.text)+"&url="+encodeURIComponent(""!==t.buttons.twitter.url?t.buttons.twitter.url:t.url)+(""!==t.buttons.twitter.via?"&via="+t.buttons.twitter.via:""),"","toolbar=0, status=0, width=650, height=360")},digg:function(t){n.open("http://digg.com/tools/diggthis/submit?url="+encodeURIComponent(""!==t.buttons.digg.url?t.buttons.digg.url:t.url)+"&title="+t.text+"&related=true&style=true","","toolbar=0, status=0, width=650, height=360")},delicious:function(t){n.open("http://www.delicious.com/save?v=5&noui&jump=close&url="+encodeURIComponent(""!==t.buttons.delicious.url?t.buttons.delicious.url:t.url)+"&title="+t.text,"delicious","toolbar=no,width=550,height=550")},stumbleupon:function(t){n.open("http://www.stumbleupon.com/badge/?url="+encodeURIComponent(""!==t.buttons.delicious.url?t.buttons.delicious.url:t.url),"stumbleupon","toolbar=no,width=550,height=550")},linkedin:function(t){n.open("https://www.linkedin.com/cws/share?url="+encodeURIComponent(""!==t.buttons.delicious.url?t.buttons.delicious.url:t.url)+"&token=&isFramed=true","linkedin","toolbar=no,width=550,height=550")},pinterest:function(t){n.open("http://pinterest.com/pin/create/button/?url="+encodeURIComponent(""!==t.buttons.pinterest.url?t.buttons.pinterest.url:t.url)+"&media="+encodeURIComponent(t.buttons.pinterest.media)+"&description="+t.buttons.pinterest.description,"pinterest","toolbar=no,width=700,height=300")}};a.prototype.init=function(){var e=this;""!==this.options.urlCurl&&(u.googlePlus=this.options.urlCurl+"?url={url}&type=googlePlus",u.stumbleupon=this.options.urlCurl+"?url={url}&type=stumbleupon"),t(this.element).addClass(this.options.className),void 0!==t(this.element).data("title")&&(this.options.title=t(this.element).attr("data-title")),void 0!==t(this.element).data("url")&&(this.options.url=t(this.element).data("url")),void 0!==t(this.element).data("text")&&(this.options.text=t(this.element).data("text")),t.each(this.options.share,function(t,n){!0===n&&e.options.shareTotal++}),!0===e.options.enableCounter?t.each(this.options.share,function(t,n){if(!0===n)try{e.getSocialJson(t)}catch(t){}}):""!==e.options.template?this.options.render(this,this.options):this.loadButtons(),t(this.element).hover(function(){0===t(this).find(".buttons").length&&!0===e.options.enableHover&&e.loadButtons(),e.options.hover(e,e.options)},function(){e.options.hide(e,e.options)}),t(this.element).click(function(){return e.options.click(e,e.options),!1})},a.prototype.loadButtons=function(){var e=this;t(this.element).append('<div class="buttons"></div>'),t.each(e.options.share,function(t,n){1==n&&(c[t](e),!0===e.options.enableTracking&&h[t]())})},a.prototype.getSocialJson=function(e){var n=this,i=0,o=u[e].replace("{url}",encodeURIComponent(this.options.url));!0===this.options.buttons[e].urlCount&&""!==this.options.buttons[e].url&&(o=u[e].replace("{url}",this.options.buttons[e].url)),""!=o&&""!==n.options.urlCurl?t.getJSON(o,function(t){if(void 0!==t.count){var o=t.count+"";o=o.replace("\xc2\xa0",""),i+=parseInt(o,10)}else t.data&&t.data.length>0&&void 0!==t.data[0].total_count?i+=parseInt(t.data[0].total_count,10):void 0!==t[0]?i+=parseInt(t[0].total_posts,10):t[0];n.options.count[e]=i,n.options.total+=i,n.renderer(),n.rendererPerso()}).error(function(){n.options.count[e]=0,n.rendererPerso()}):(n.renderer(),n.options.count[e]=0,n.rendererPerso())},a.prototype.rendererPerso=function(){var t=0;for(e in this.options.count)t++;t===this.options.shareTotal&&this.options.render(this,this.options)},a.prototype.renderer=function(){var e=this.options.total,n=this.options.template;!0===this.options.shorterTotal&&(e=this.shorterTotal(e)),""!==n?(n=n.replace("{total}",e),t(this.element).html(n)):t(this.element).html('<div class="box"><a class="count" href="#">'+e+"</a>"+(""!==this.options.title?'<a class="share" href="#">'+this.options.title+"</a>":"")+"</div>")},a.prototype.shorterTotal=function(t){return t>=1e6?t=(t/1e6).toFixed(2)+"M":t>=1e3&&(t=(t/1e3).toFixed(1)+"k"),t},a.prototype.openPopup=function(t){if(d[t](this.options),!0===this.options.enableTracking){var e={googlePlus:{site:"Google",action:"+1"},facebook:{site:"facebook",action:"like"},twitter:{site:"twitter",action:"tweet"},digg:{site:"digg",action:"add"},delicious:{site:"delicious",action:"add"},stumbleupon:{site:"stumbleupon",action:"add"},linkedin:{site:"linkedin",action:"share"},pinterest:{site:"pinterest",action:"pin"}};_gaq.push(["_trackSocial",e[t].site,e[t].action])}},a.prototype.simulateClick=function(){var e=t(this.element).html();t(this.element).html(e.replace(this.options.total,this.options.total+1))},a.prototype.update=function(t,e){""!==t&&(this.options.url=t),""!==e&&(this.options.text=e)},t.fn[r]=function(e){var n=arguments;return void 0===e||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+r)||t.data(this,"plugin_"+r,new a(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var i=t.data(this,"plugin_"+r);i instanceof a&&"function"==typeof i[e]&&i[e].apply(i,Array.prototype.slice.call(n,1))}):void 0}}(jQuery,window,document),function(t,e){"use strict";function n(n,a){var r=this;r.$el=t(n),r.el=n,r.id=o++,r.$window=t(e),r.$document=t(document),r.$el.bind("destroyed",t.proxy(r.teardown,r)),r.$clonedHeader=null,r.$originalHeader=null,r.isSticky=!1,r.hasBeenSticky=!1,r.leftOffset=null,r.topOffset=null,r.init=function(){r.$el.each(function(){var e=t(this);e.css("padding",0),r.$originalHeader=t("thead:first",this),r.$clonedHeader=r.$originalHeader.clone(),e.trigger("clonedHeader."+i,[r.$clonedHeader]),r.$clonedHeader.addClass("tableFloatingHeader"),r.$clonedHeader.css("display","none"),r.$originalHeader.addClass("tableFloatingHeaderOriginal"),r.$originalHeader.after(r.$clonedHeader),r.$printStyle=t('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),t("head").append(r.$printStyle)}),r.setOptions(a),r.updateWidth(),r.toggleHeaders(),r.bind()},r.destroy=function(){r.$el.unbind("destroyed",r.teardown),r.teardown()},r.teardown=function(){r.isSticky&&r.$originalHeader.css("position","static"),t.removeData(r.el,"plugin_"+i),r.unbind(),r.$clonedHeader.remove(),r.$originalHeader.removeClass("tableFloatingHeaderOriginal"),r.$originalHeader.css("visibility","visible"),r.$printStyle.remove(),r.el=null,r.$el=null},r.bind=function(){r.$scrollableArea.on("scroll."+i,r.toggleHeaders),r.isWindowScrolling||(r.$window.on("scroll."+i+r.id,r.setPositionValues),r.$window.on("resize."+i+r.id,r.toggleHeaders)),r.$scrollableArea.on("resize."+i,r.toggleHeaders),r.$scrollableArea.on("resize."+i,r.updateWidth)},r.unbind=function(){r.$scrollableArea.off("."+i,r.toggleHeaders),r.isWindowScrolling||(r.$window.off("."+i+r.id,r.setPositionValues),r.$window.off("."+i+r.id,r.toggleHeaders)),r.$scrollableArea.off("."+i,r.updateWidth)},r.toggleHeaders=function(){r.$el&&r.$el.each(function(){var e,n=t(this),i=r.isWindowScrolling?isNaN(r.options.fixedOffset)?r.options.fixedOffset.outerHeight():r.options.fixedOffset:r.$scrollableArea.offset().top+(isNaN(r.options.fixedOffset)?0:r.options.fixedOffset),o=n.offset(),s=r.$scrollableArea.scrollTop()+i,a=r.$scrollableArea.scrollLeft(),l=r.isWindowScrolling?s>o.top:i>o.top,u=(r.isWindowScrolling?s:0)<o.top+n.height()-r.$clonedHeader.height()-(r.isWindowScrolling?0:i);l&&u?(e=o.left-a+r.options.leftOffset,r.$originalHeader.css({position:"fixed","margin-top":r.options.marginTop,left:e,"z-index":3}),r.leftOffset=e,r.topOffset=i,r.$clonedHeader.css("display",""),r.isSticky||(r.isSticky=!0,r.updateWidth()),r.setPositionValues()):r.isSticky&&(r.$originalHeader.css("position","static"),r.$clonedHeader.css("display","none"),r.isSticky=!1,r.resetWidth(t("td,th",r.$clonedHeader),t("td,th",r.$originalHeader)))})},r.setPositionValues=function(){var t=r.$window.scrollTop(),e=r.$window.scrollLeft();!r.isSticky||0>t||t+r.$window.height()>r.$document.height()||0>e||e+r.$window.width()>r.$document.width()||r.$originalHeader.css({top:r.topOffset-(r.isWindowScrolling?0:t),left:r.leftOffset-(r.isWindowScrolling?0:e)})},r.updateWidth=function(){if(r.isSticky){r.$originalHeaderCells||(r.$originalHeaderCells=t("th,td",r.$originalHeader)),r.$clonedHeaderCells||(r.$clonedHeaderCells=t("th,td",r.$clonedHeader));var e=r.getWidth(r.$clonedHeaderCells);r.setWidth(e,r.$clonedHeaderCells,r.$originalHeaderCells),r.$originalHeader.css("width",r.$clonedHeader.width())}},r.getWidth=function(n){var i=[];return n.each(function(n){var o,s=t(this);if("border-box"===s.css("box-sizing"))o=s[0].getBoundingClientRect().width;else{if("collapse"===t("th",r.$originalHeader).css("border-collapse"))if(e.getComputedStyle)o=parseFloat(e.getComputedStyle(this,null).width);else{var a=parseFloat(s.css("padding-left")),l=parseFloat(s.css("padding-right")),u=parseFloat(s.css("border-width"));o=s.outerWidth()-a-l-u}else o=s.width()}i[n]=o}),i},r.setWidth=function(t,e,n){e.each(function(e){var i=t[e];n.eq(e).css({"min-width":i,"max-width":i})})},r.resetWidth=function(e,n){e.each(function(e){var i=t(this);n.eq(e).css({"min-width":i.css("min-width"),"max-width":i.css("max-width")})})},r.setOptions=function(n){r.options=t.extend({},s,n),r.$scrollableArea=t(r.options.scrollableArea),r.isWindowScrolling=r.$scrollableArea[0]===e},r.updateOptions=function(t){r.setOptions(t),r.unbind(),r.bind(),r.updateWidth(),r.toggleHeaders()},r.init()}var i="stickyTableHeaders",o=0,s={fixedOffset:0,leftOffset:0,marginTop:0,scrollableArea:e};t.fn[i]=function(e){return this.each(function(){var o=t.data(this,"plugin_"+i);o?"string"==typeof e?o[e].apply(o):o.updateOptions(e):"destroy"!==e&&t.data(this,"plugin_"+i,new n(this,e))})}}(jQuery,window),function(t){function e(){var e,o=t(),u=0;if(t.each(s,function(t,e){var n=e.data.selector,i=e.$element;o=o.add(n?i.find(n):i)}),e=o.length)for(n=n||function(){var e,n,i={height:r.innerHeight,width:r.innerWidth};return i.height||!(e=a.compatMode)&&t.support.boxModel||(i={height:(n="CSS1Compat"===e?l:a.body).clientHeight,width:n.clientWidth}),i}(),i=i||{top:r.pageYOffset||l.scrollTop||a.body.scrollTop,left:r.pageXOffset||l.scrollLeft||a.body.scrollLeft};u<e;u++)if(t.contains(l,o[u])){var c,h,d,p=t(o[u]),f={height:p.height(),width:p.width()},g=p.offset(),m=p.data("inview");if(!i||!n)return;g.top+f.height>i.top&&g.top<i.top+n.height&&g.left+f.width>i.left&&g.left<i.left+n.width?(d=(c=i.left>g.left?"right":i.left+n.width<g.left+f.width?"left":"both")+"-"+(h=i.top>g.top?"bottom":i.top+n.height<g.top+f.height?"top":"both"),m&&m===d||p.data("inview",d).trigger("inview",[!0,c,h])):m&&p.data("inview",!1).trigger("inview",[!1])}}var n,i,o,s={},a=document,r=window,l=a.documentElement,u=t.expando;t.event.special.inview={add:function(n){s[n.guid+"-"+this[u]]={data:n,$element:t(this)},o||t.isEmptyObject(s)||(o=setInterval(e,250))},remove:function(e){try{delete s[e.guid+"-"+this[u]]}catch(t){}t.isEmptyObject(s)&&(clearInterval(o),o=null)}},t(r).bind("scroll resize",function(){n=i=null}),!l.addEventListener&&l.attachEvent&&l.attachEvent("onfocusin",function(){i=null})}(jQuery),function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.CountUp=e()}(this,function(t,e,n){return function(t,e,n,i,o,s){for(var a=0,r=["webkit","moz","ms","o"],l=0;l<r.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[r[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[l]+"CancelAnimationFrame"]||window[r[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),o=window.setTimeout(function(){t(n+i)},i);return a=n+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),this.options={useEasing:!0,useGrouping:!0,separator:",",decimal:"."};for(var u in s)s.hasOwnProperty(u)&&(this.options[u]=s[u]);""===this.options.separator&&(this.options.useGrouping=!1),this.options.prefix||(this.options.prefix=""),this.options.suffix||(this.options.suffix=""),this.d="string"==typeof t?document.getElementById(t):t,this.startVal=Number(e),isNaN(e)&&(this.startVal=Number(e.match(/[\d]+/g).join(""))),this.endVal=Number(n),isNaN(n)&&(this.endVal=Number(n.match(/[\d]+/g).join(""))),this.countDown=this.startVal>this.endVal,this.frameVal=this.startVal,this.decimals=Math.max(0,i||0),this.dec=Math.pow(10,this.decimals),this.duration=1e3*Number(o)||2e3;var c=this;this.version=function(){return"1.5.3"},this.printValue=function(t){var e=isNaN(t)?"--":c.formatNumber(t);"INPUT"==c.d.tagName?this.d.value=e:"text"==c.d.tagName?this.d.textContent=e:this.d.innerHTML=e},this.easeOutExpo=function(t,e,n,i){return n*(1-Math.pow(2,-10*t/i))*1024/1023+e},this.count=function(t){c.startTime||(c.startTime=t),c.timestamp=t;var e=t-c.startTime;c.remaining=c.duration-e,c.options.useEasing?c.countDown?c.frameVal=c.startVal-c.easeOutExpo(e,0,c.startVal-c.endVal,c.duration):c.frameVal=c.easeOutExpo(e,c.startVal,c.endVal-c.startVal,c.duration):c.countDown?c.frameVal=c.startVal-(c.startVal-c.endVal)*(e/c.duration):c.frameVal=c.startVal+(c.endVal-c.startVal)*(e/c.duration),c.countDown?c.frameVal=c.frameVal<c.endVal?c.endVal:c.frameVal:c.frameVal=c.frameVal>c.endVal?c.endVal:c.frameVal,c.frameVal=Math.round(c.frameVal*c.dec)/c.dec,c.printValue(c.frameVal),e<c.duration?c.rAF=requestAnimationFrame(c.count):c.callback&&c.callback()},this.start=function(t){return c.callback=t,isNaN(c.endVal)||isNaN(c.startVal)||c.startVal===c.endVal?(console.log("countUp error: startVal or endVal is not a number"),c.printValue(n)):c.rAF=requestAnimationFrame(c.count),!1},this.pauseResume=function(){c.paused?(c.paused=!1,delete c.startTime,c.duration=c.remaining,c.startVal=c.frameVal,requestAnimationFrame(c.count)):(c.paused=!0,cancelAnimationFrame(c.rAF))},this.reset=function(){c.paused=!1,delete c.startTime,c.startVal=e,cancelAnimationFrame(c.rAF),c.printValue(c.startVal)},this.update=function(t){cancelAnimationFrame(c.rAF),c.paused=!1,delete c.startTime,c.startVal=c.frameVal,c.endVal=Number(t),c.countDown=c.startVal>c.endVal,c.rAF=requestAnimationFrame(c.count)},this.formatNumber=function(t){t=t.toFixed(c.decimals);var e,n,i,o;if(e=(t+="").split("."),n=e[0],i=e.length>1?c.options.decimal+e[1]:"",o=/(\d+)(\d{3})/,c.options.useGrouping)for(;o.test(n);)n=n.replace(o,"$1"+c.options.separator+"$2");return c.options.prefix+n+i+c.options.suffix},c.printValue(c.startVal)}}),function(t){"use strict";t.fn.idle=function(e){var n,i,o=e.startAtIdle||!1,s=!e.startAtIdle||!0,a=t.extend({},{idle:6e4,events:"mousemove keydown mousedown touchstart",onIdle:function(){},onActive:function(){},onHide:function(){},onShow:function(){},keepTracking:!0,startAtIdle:!1,recurIdleCall:!1},e),r=null;return t(this).on("idle:stop",{},function(){t(this).off(a.events),a.keepTracking=!1,n(r,a)}),n=function(t,e){return o&&(e.onActive.call(),o=!1),clearTimeout(t),e.keepTracking?i(e):void 0},i=function(t){return(t.recurIdleCall?setInterval:setTimeout)(function(){o=!0,t.onIdle.call()},t.idle)},this.each(function(){r=i(a),t(this).on(a.events,function(){r=n(r,a)}),(a.onShow||a.onHide)&&t(document).on("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange",function(){document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?s&&(s=!1,a.onHide.call()):s||(s=!0,a.onShow.call())})})}}(jQuery),function(t,e,n,i){"use strict";function o(t,e,n){return setTimeout(u(t,n),e)}function s(t,e,n){return!!Array.isArray(t)&&(a(t,n[e],n),!0)}function a(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function r(e,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,o,i),e.apply(this,arguments)}}function l(t,e,n){var i,o=e.prototype;(i=t.prototype=Object.create(o)).constructor=t,i._super=o,n&&X(i,n)}function u(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==nt?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function d(t,e,n){a(m(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){a(m(e),function(e){t.removeEventListener(e,n,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function v(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var i=[],o=[],s=0;s<t.length;){var a=e?t[s][e]:t[s];v(o,a)<0&&i.push(t[s]),o[s]=a,s++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function w(t,e){for(var n,o,s=e[0].toUpperCase()+e.slice(1),a=0;a<tt.length;){if(n=tt[a],(o=n?n+s:e)in t)return o;a++}return i}function _(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function x(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&n.handler(e)},this.init()}function k(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,s=e&gt&&i-o==0,a=e&(vt|yt)&&i-o==0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=F(e)),o>1&&!n.firstMultiple?n.firstMultiple=F(e):1===o&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,r=a?a.center:s.center,l=e.center=S(i);e.timeStamp=st(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=E(r,l),e.distance=A(r,l),function(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},s=t.prevInput||{};e.eventType!==gt&&s.eventType!==vt||(o=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var u=T(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=ot(u.x)>ot(u.y)?u.x:u.y,e.scale=a?function(t,e){return A(e[0],e[1],Dt)/A(t[0],t[1],Dt)}(a.pointers,i):1,e.rotation=a?function(t,e){return E(e[1],e[0],Dt)+E(t[1],t[0],Dt)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,C(n,e);var c=t.element;f(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function C(t,e){var n,o,s,a,r=t.lastInterval||e,l=e.timeStamp-r.timeStamp;if(e.eventType!=yt&&(l>ft||r.velocity===i)){var u=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,h=T(l,u,c);o=h.x,s=h.y,n=ot(h.x)>ot(h.y)?h.x:h.y,a=D(u,c),t.lastInterval=e}else n=r.velocity,o=r.velocityX,s=r.velocityY,a=r.direction;e.velocity=n,e.velocityX=o,e.velocityY=s,e.direction=a}function F(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:it(t.pointers[n].clientX),clientY:it(t.pointers[n].clientY)},n++;return{timeStamp:st(),pointers:e,center:S(e),deltaX:t.deltaX,deltaY:t.deltaY}}function S(t){var e=t.length;if(1===e)return{x:it(t[0].clientX),y:it(t[0].clientY)};for(var n=0,i=0,o=0;e>o;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:it(n/e),y:it(i/e)}}function T(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?bt:ot(t)>=ot(e)?0>t?wt:_t:0>e?xt:kt}function A(t,e,n){n||(n=Tt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function E(t,e,n){n||(n=Tt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function $(){this.evEl=Et,this.evWin=$t,this.pressed=!1,x.apply(this,arguments)}function O(){this.evEl=Mt,this.evWin=Nt,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function I(){this.evTarget=Pt,this.evWin=Rt,this.started=!1,x.apply(this,arguments)}function M(){this.evTarget=Ht,this.targetIds={},x.apply(this,arguments)}function N(){x.apply(this,arguments);var t=u(this.handler,this);this.touch=new M(this.manager,t),this.mouse=new $(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function j(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},Ut)}}function P(t,e){this.manager=t,this.set(e)}function R(t){this.options=X({},this.defaults,t||{}),this.id=lt++,this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Gt,this.simultaneous={},this.requireFail=[]}function L(t){return t&ne?"cancel":t&te?"end":t&Xt?"move":t&Jt?"start":""}function H(t){return t==kt?"down":t==xt?"up":t==wt?"left":t==_t?"right":""}function U(t,e){var n=e.manager;return n?n.get(t):t}function z(){R.apply(this,arguments)}function V(){z.apply(this,arguments),this.pX=null,this.pY=null}function q(){z.apply(this,arguments)}function B(){R.apply(this,arguments),this._timer=null,this._input=null}function W(){z.apply(this,arguments)}function Q(){z.apply(this,arguments)}function K(){R.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Y(t,e){return e=e||{},e.recognizers=h(e.recognizers,Y.defaults.preset),new Z(t,e)}function Z(t,e){this.options=X({},Y.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=function(t){var e=t.options.inputClass;return new(e||(ct?O:ht?M:ut?N:$))(t,k)}(this),this.touchAction=new P(this,this.options.touchAction),G(this,!0),a(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function G(t,e){var n=t.element;n.style&&a(t.options.cssProps,function(t,i){n.style[w(n.style,i)]=e?t:""})}function J(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var X,tt=["","webkit","Moz","MS","ms","o"],et=e.createElement("div"),nt="function",it=Math.round,ot=Math.abs,st=Date.now;X="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==i&&null!==o)for(var s in o)o.hasOwnProperty(s)&&(e[s]=o[s])}return e}:Object.assign;var at=r(function(t,e,n){for(var o=Object.keys(e),s=0;s<o.length;)(!n||n&&t[o[s]]===i)&&(t[o[s]]=e[o[s]]),s++;return t},"extend","Use `assign`."),rt=r(function(t,e){return at(t,e,!0)},"merge","Use `assign`."),lt=1,ut="ontouchstart"in t,ct=w(t,"PointerEvent")!==i,ht=ut&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),dt="touch",pt="mouse",ft=25,gt=1,mt=2,vt=4,yt=8,bt=1,wt=2,_t=4,xt=8,kt=16,Ct=wt|_t,Ft=xt|kt,St=Ct|Ft,Tt=["x","y"],Dt=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(_(this.element),this.evWin,this.domHandler)}};var At={mousedown:gt,mousemove:mt,mouseup:vt},Et="mousedown",$t="mousemove mouseup";l($,x,{handler:function(t){var e=At[t.type];e&gt&&0===t.button&&(this.pressed=!0),e&mt&&1!==t.which&&(e=vt),this.pressed&&(e&vt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:pt,srcEvent:t}))}});var Ot={pointerdown:gt,pointermove:mt,pointerup:vt,pointercancel:yt,pointerout:yt},It={2:dt,3:"pen",4:pt,5:"kinect"},Mt="pointerdown",Nt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Mt="MSPointerDown",Nt="MSPointerMove MSPointerUp MSPointerCancel"),l(O,x,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Ot[i],s=It[t.pointerType]||t.pointerType,a=s==dt,r=v(e,t.pointerId,"pointerId");o&gt&&(0===t.button||a)?0>r&&(e.push(t),r=e.length-1):o&(vt|yt)&&(n=!0),0>r||(e[r]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),n&&e.splice(r,1))}});var jt={touchstart:gt,touchmove:mt,touchend:vt,touchcancel:yt},Pt="touchstart",Rt="touchstart touchmove touchend touchcancel";l(I,x,{handler:function(t){var e=jt[t.type];if(e===gt&&(this.started=!0),this.started){var n=function(t,e){var n=y(t.touches),i=y(t.changedTouches);return e&(vt|yt)&&(n=b(n.concat(i),"identifier",!0)),[n,i]}.call(this,t,e);e&(vt|yt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:dt,srcEvent:t})}}});var Lt={touchstart:gt,touchmove:mt,touchend:vt,touchcancel:yt},Ht="touchstart touchmove touchend touchcancel";l(M,x,{handler:function(t){var e=Lt[t.type],n=function(t,e){var n=y(t.touches),i=this.targetIds;if(e&(gt|mt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,s,a=y(t.changedTouches),r=[],l=this.target;if(s=n.filter(function(t){return f(t.target,l)}),e===gt)for(o=0;o<s.length;)i[s[o].identifier]=!0,o++;for(o=0;o<a.length;)i[a[o].identifier]&&r.push(a[o]),e&(vt|yt)&&delete i[a[o].identifier],o++;return r.length?[b(s.concat(r),"identifier",!0),r]:void 0}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:dt,srcEvent:t})}});var Ut=2500,zt=25;l(N,x,{handler:function(t,e,n){var i=n.pointerType==dt,o=n.pointerType==pt;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(t,e){t&gt?(this.primaryTouch=e.changedPointers[0].identifier,j.call(this,e)):t&(vt|yt)&&j.call(this,e)}).call(this,e,n);else if(o&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],s=Math.abs(e-o.x),a=Math.abs(n-o.y);if(zt>=s&&zt>=a)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Vt=w(et.style,"touchAction"),qt=Vt!==i,Bt="compute",Wt="auto",Qt="manipulation",Kt="none",Yt="pan-x",Zt="pan-y";P.prototype={set:function(t){t==Bt&&(t=this.compute()),qt&&this.manager.element.style&&(this.manager.element.style[Vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(g(t,Kt))return Kt;var e=g(t,Yt),n=g(t,Zt);return e&&n?Kt:e||n?e?Yt:Zt:g(t,Qt)?Qt:Wt}(t.join(" "))},preventDefaults:function(t){if(!qt){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=g(i,Kt),s=g(i,Zt),a=g(i,Yt);if(o){var r=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(r&&l&&u)return}if(!a||!s)return o||s&&n&Ct||a&&n&Ft?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Gt=1,Jt=2,Xt=4,te=8,ee=te,ne=16;R.prototype={defaults:{},set:function(t){return X(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(s(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=U(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return s(t,"dropRecognizeWith",this)?this:(t=U(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(s(t,"requireFailure",this))return this;var e=this.requireFail;return t=U(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(s(t,"dropRequireFailure",this))return this;t=U(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;te>i&&e(n.options.event+L(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=te&&e(n.options.event+L(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Gt)))return!1;t++}return!0},recognize:function(t){var e=X({},t);return c(this.options.enable,[this,e])?(this.state&(ee|ne|32)&&(this.state=Gt),this.state=this.process(e),void(this.state&(Jt|Xt|te|ne)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},l(z,R,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(Jt|Xt),o=this.attrTest(t);return i&&(n&yt||!o)?e|ne:i||o?n&vt?e|te:e&Jt?e|Xt:Jt:32}}),l(V,z,{defaults:{event:"pan",threshold:10,pointers:1,direction:St},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ct&&e.push(Zt),t&Ft&&e.push(Yt),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,s=t.deltaX,a=t.deltaY;return o&e.direction||(e.direction&Ct?(o=0===s?bt:0>s?wt:_t,n=s!=this.pX,i=Math.abs(t.deltaX)):(o=0===a?bt:0>a?xt:kt,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return z.prototype.attrTest.call(this,t)&&(this.state&Jt||!(this.state&Jt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=H(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(q,z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Jt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(B,R,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(vt|yt)&&!s)this.reset();else if(t.eventType&gt)this.reset(),this._timer=o(function(){this.state=ee,this.tryEmit()},e.time,this);else if(t.eventType&vt)return ee;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ee&&(t&&t.eventType&vt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=st(),this.manager.emit(this.options.event,this._input)))}}),l(W,z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Jt)}}),l(Q,z,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ct|Ft,pointers:1},getTouchAction:function(){return V.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ct|Ft)?e=t.overallVelocity:n&Ct?e=t.overallVelocityX:n&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&ot(e)>this.options.velocity&&t.eventType&vt},emit:function(t){var e=H(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(K,R,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Qt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&gt&&0===this.count)return this.failTimeout();if(i&&s&&n){if(t.eventType!=vt)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||A(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&a?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=o(function(){this.state=ee,this.tryEmit()},e.interval,this),Jt):ee}return 32},failTimeout:function(){return this._timer=o(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ee&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Y.VERSION="2.0.6",Y.defaults={domEvents:!1,touchAction:Bt,enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[q,{enable:!1},["rotate"]],[Q,{direction:Ct}],[V,{direction:Ct},["swipe"]],[K],[K,{event:"doubletap",taps:2},["tap"]],[B]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};Z.prototype={set:function(t){return X(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&ee)&&(o=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(Jt|Xt|te)&&(o=e.curRecognizer=n),s++}},get:function(t){if(t instanceof R)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(s(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(s(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=v(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){var n=this.handlers;return a(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return a(m(t),function(t){e?n[t]&&n[t].splice(v(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&J(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&G(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},X(Y,{INPUT_START:gt,INPUT_MOVE:mt,INPUT_END:vt,INPUT_CANCEL:yt,STATE_POSSIBLE:Gt,STATE_BEGAN:Jt,STATE_CHANGED:Xt,STATE_ENDED:te,STATE_RECOGNIZED:ee,STATE_CANCELLED:ne,STATE_FAILED:32,DIRECTION_NONE:bt,DIRECTION_LEFT:wt,DIRECTION_RIGHT:_t,DIRECTION_UP:xt,DIRECTION_DOWN:kt,DIRECTION_HORIZONTAL:Ct,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:St,Manager:Z,Input:x,TouchAction:P,TouchInput:M,MouseInput:$,PointerEventInput:O,TouchMouseInput:N,SingleTouchInput:I,Recognizer:R,AttrRecognizer:z,Tap:K,Pan:V,Swipe:Q,Pinch:q,Rotate:W,Press:B,on:d,off:p,each:a,merge:rt,extend:at,assign:X,inherit:l,bindFn:u,prefixed:w});(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=Y,"function"==typeof define&&define.amd?define(function(){return Y}):"undefined"!=typeof module&&module.exports?module.exports=Y:t.Hammer=Y}(window,document),function(t){t.fn.hoverIntent=function(e,n,i){var o={interval:100,sensitivity:6,timeout:0};o="object"==typeof e?t.extend(o,e):t.isFunction(n)?t.extend(o,{over:e,out:n,selector:i}):t.extend(o,{over:e,out:e,selector:n});var s,a,r,l,u=function(t){s=t.pageX,a=t.pageY},c=function(e,n){if(n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((r-s)*(r-s)+(l-a)*(l-a))<o.sensitivity)return t(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,o.over.apply(n,[e]);r=s,l=a,n.hoverIntent_t=setTimeout(function(){c(e,n)},o.interval)},h=function(e){var n=t.extend({},e),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"===e.type?(r=n.pageX,l=n.pageY,t(i).on("mousemove.hoverIntent",u),i.hoverIntent_s||(i.hoverIntent_t=setTimeout(function(){c(n,i)},o.interval))):(t(i).off("mousemove.hoverIntent",u),i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){!function(t,e){e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=!1,o.out.apply(e,[t])}(n,i)},o.timeout)))};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},o.selector)}}(jQuery);var bind=function(t,e){return function(){return t.apply(e,arguments)}};!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return t.Tour=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Tour=e(t.jQuery)}(window,function(t){var e;return e=window.document,function(){function n(e){this._showPopoverAndOverlay=bind(this._showPopoverAndOverlay,this);var n;try{n=window.localStorage}catch(t){n=!1}this._options=t.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:n,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){},onRedirectError:function(t){}},e),this._force=!1,this._inited=!1,this._current=null,this.backdrops=[]}return n.prototype.addSteps=function(t){var e,n,i;for(e=0,n=t.length;e<n;e++)i=t[e],this.addStep(i);return this},n.prototype.addStep=function(t){return this._options.steps.push(t),this},n.prototype.getStep=function(e){if(null!=this._options.steps[e])return t.extend({id:"step-"+e,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:e===this._options.steps.length-1?-1:e+1,prev:e-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[e].element,backdropElement:this._options.steps[e].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[e])},n.prototype.init=function(t){return this._force=t,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(t){return function(){return t.showStep(t._current)}}(this)),this._onScroll(function(t){return function(){return t._showPopoverAndOverlay(t._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},n.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},n.prototype.next=function(){var t;return t=this.hideStep(this._current,this._current+1),this._callOnPromiseDone(t,this._showNextStep)},n.prototype.prev=function(){var t;return t=this.hideStep(this._current,this._current-1),this._callOnPromiseDone(t,this._showPrevStep)},n.prototype.goTo=function(t){var e;return e=this.hideStep(this._current,t),this._callOnPromiseDone(e,this.showStep,t)},n.prototype.end=function(){var n,i;return n=function(n){return function(i){if(t(e).off("click.tour-"+n._options.name),t(e).off("keyup.tour-"+n._options.name),t(window).off("resize.tour-"+n._options.name),t(window).off("scroll.tour-"+n._options.name),n._setState("end","yes"),n._inited=!1,n._force=!1,n._clearTimer(),null!=n._options.onEnd)return n._options.onEnd(n)}}(this),i=this.hideStep(this._current),this._callOnPromiseDone(i,n)},n.prototype.ended=function(){return!this._force&&!!this._getState("end")},n.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},n.prototype.pause=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},n.prototype.resume=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=window.setTimeout(function(t){return function(){return t._isLast()?t.next():t.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},n.prototype.hideStep=function(e,n){var i,o,s,a;if(a=this.getStep(e))return this._clearTimer(),s=this._makePromise(null!=a.onHide?a.onHide(this,e):void 0),o=function(i){return function(o){var s,r;if((s=t(a.element)).data("bs.popover")||s.data("popover")||(s=t("body")),s.popover("destroy").removeClass("tour-"+i._options.name+"-element tour-"+i._options.name+"-"+e+"-element").removeData("bs.popover"),a.reflex&&t(a.reflexElement).removeClass("tour-step-element-reflex").off(i._reflexEvent(a.reflex)+".tour-"+i._options.name),a.backdrop&&((r=null!=n&&i.getStep(n))&&r.backdrop&&r.backdropElement===a.backdropElement||i._hideOverlayElement(a)),null!=a.onHidden)return a.onHidden(i)}}(this),i=a.delay.hide||a.delay,"[object Number]"==={}.toString.call(i)&&i>0?(this._debug("Wait "+i+" milliseconds to hide the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(s,o)}}(this),i)):this._callOnPromiseDone(s,o),s},n.prototype.showStep=function(t){var n,i,o,s,a,r;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(r=this.getStep(t))&&(a=t<this._current,i=this._makePromise(null!=r.onShow?r.onShow(this,t):void 0),this.setCurrentStep(t),n=function(){switch({}.toString.call(r.path)){case"[object Function]":return r.path();case"[object String]":return this._options.basePath+r.path;default:return r.path}}.call(this),!r.redirect||!this._isRedirect(r.host,n,e.location)||(this._redirect(r,t,n),this._isJustPathHashDifferent(r.host,n,e.location)))?(s=function(e){return function(n){if(e._isOrphan(r)){if(!1===r.orphan)return e._debug("Skip the orphan step "+(e._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(a?e._showPrevStep():e._showNextStep());e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}if(r.autoscroll?e._scrollIntoView(t):e._showPopoverAndOverlay(t),r.duration)return e.resume()}}(this),o=r.delay.show||r.delay,"[object Number]"==={}.toString.call(o)&&o>0?(this._debug("Wait "+o+" milliseconds to show the step "+(this._current+1)),window.setTimeout(function(t){return function(){return t._callOnPromiseDone(i,s)}}(this),o)):this._callOnPromiseDone(i,s),i):void 0},n.prototype.getCurrentStep=function(){return this._current},n.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},n.prototype.redraw=function(){return this._showOverlayElement(this.getStep(this.getCurrentStep()))},n.prototype._setState=function(t,e){var n;if(this._options.storage){n=this._options.name+"_"+t;try{this._options.storage.setItem(n,e)}catch(t){t.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(n,e)}return null==this._state&&(this._state={}),this._state[t]=e},n.prototype._removeState=function(t){var e;return this._options.storage?(e=this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},n.prototype._getState=function(t){var e,n;return this._options.storage?(e=this._options.name+"_"+t,n=this._options.storage.getItem(e)):null!=this._state&&(n=this._state[t]),void 0!==n&&"null"!==n||(n=null),this._options.afterGetState(t,n),n},n.prototype._showNextStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(e){return t.showStep(n.next)}}(this),t=this._makePromise(null!=n.onNext?n.onNext(this):void 0),this._callOnPromiseDone(t,e)},n.prototype._showPrevStep=function(){var t,e,n;return n=this.getStep(this._current),e=function(t){return function(e){return t.showStep(n.prev)}}(this),t=this._makePromise(null!=n.onPrev?n.onPrev(this):void 0),this._callOnPromiseDone(t,e)},n.prototype._debug=function(t){if(this._options.debug)return window.console.log("Bootstrap Tour '"+this._options.name+"' | "+t)},n.prototype._isRedirect=function(t,e,n){var i;return!(null==t||""===t||!("[object RegExp]"==={}.toString.call(t)&&!t.test(n.origin)||"[object String]"==={}.toString.call(t)&&this._isHostDifferent(t,n)))||(i=[n.pathname,n.search,n.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(i)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,i)))},n.prototype._isHostDifferent=function(t,e){switch({}.toString.call(t)){case"[object RegExp]":return!t.test(e.origin);case"[object String]":return this._getProtocol(t)!==this._getProtocol(e.href)||this._getHost(t)!==this._getHost(e.href);default:return!0}},n.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},n.prototype._isJustPathHashDifferent=function(t,e,n){var i;return(null==t||""===t||!this._isHostDifferent(t,n))&&(i=[n.pathname,n.search,n.hash].join(""),"[object String]"==={}.toString.call(e)&&(this._getPath(e)===this._getPath(i)&&this._equal(this._getQuery(e),this._getQuery(i))&&!this._equal(this._getHash(e),this._getHash(i))))},n.prototype._redirect=function(n,i,o){var s;return t.isFunction(n.redirect)?n.redirect.call(this,o):(s="[object String]"==={}.toString.call(n.host)?""+n.host+o:o,this._debug("Redirect to "+s),this._getState("redirect_to")!==""+i?(this._setState("redirect_to",""+i),e.location.href=s):(this._debug("Error redirection loop to "+o),this._removeState("redirect_to"),null!=n.onRedirectError?n.onRedirectError(this):void 0))},n.prototype._isOrphan=function(e){return null==e.element||!t(e.element).length||t(e.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==t(e.element)[0].namespaceURI},n.prototype._isLast=function(){return this._current<this._options.steps.length-1},n.prototype._showPopoverAndOverlay=function(t){var e;if(this.getCurrentStep()===t&&!this.ended())return(e=this.getStep(t)).backdrop&&this._showOverlayElement(e),this._showPopover(e,t),null!=e.onShown&&e.onShown(this),this._debug("Step "+(this._current+1)+" of "+this._options.steps.length)},n.prototype._showPopover=function(e,n){var i,o,s,a,r;if(t(".tour-"+this._options.name).remove(),a=t.extend({},this._options),s=this._isOrphan(e),e.template=this._template(e,n),s&&(e.element="body",e.placement="top"),(i=t(e.element)).addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+n+"-element"),e.options&&t.extend(a,e.options),e.reflex&&!s&&t(e.reflexElement).addClass("tour-step-element-reflex").off(this._reflexEvent(e.reflex)+".tour-"+this._options.name).on(this._reflexEvent(e.reflex)+".tour-"+this._options.name,function(t){return function(){return t._isLast()?t.next():t.end()}}(this)),r=!0===e.smartPlacement&&-1===e.placement.search(/auto/i),i.popover({placement:r?"auto "+e.placement:e.placement,trigger:"manual",title:e.title,content:e.content,html:!0,animation:e.animation,container:e.container,template:e.template,selector:e.element}).popover("show"),(o=i.data("bs.popover")?i.data("bs.popover").tip():i.data("popover").tip()).attr("id",e.id),"fixed"===i.css("position")&&o.css("position","fixed"),this._reposition(o,e),s)return this._center(o)},n.prototype._template=function(e,n){var i,o,s,a,r,l;return l=e.template,this._isOrphan(e)&&"[object Boolean]"!=={}.toString.call(e.orphan)&&(l=e.orphan),r=t(t.isFunction(l)?l(n,e):l),i=r.find(".popover-navigation"),s=i.find('[data-role="prev"]'),o=i.find('[data-role="next"]'),a=i.find('[data-role="pause-resume"]'),this._isOrphan(e)&&r.addClass("orphan"),r.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+n),e.reflex&&r.addClass("tour-"+this._options.name+"-reflex"),e.prev<0&&s.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.next<0&&o.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),e.duration||a.remove(),r.clone().wrap("<div>").parent().html()},n.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},n.prototype._reposition=function(n,i){var o,s,a,r,l,u,c;if(r=n[0].offsetWidth,s=n[0].offsetHeight,c=n.offset(),l=c.left,u=c.top,(o=t(e).outerHeight()-c.top-n.outerHeight())<0&&(c.top=c.top+o),(a=t("html").outerWidth()-c.left-n.outerWidth())<0&&(c.left=c.left+a),c.top<0&&(c.top=0),c.left<0&&(c.left=0),n.offset(c),"bottom"===i.placement||"top"===i.placement){if(l!==c.left)return this._replaceArrow(n,2*(c.left-l),r,"left")}else if(u!==c.top)return this._replaceArrow(n,2*(c.top-u),s,"top")},n.prototype._center=function(e){return e.css("top",t(window).outerHeight()/2-e.outerHeight()/2)},n.prototype._replaceArrow=function(t,e,n,i){return t.find(".arrow").css(i,e?50*(1-e/n)+"%":"")},n.prototype._scrollIntoView=function(e){var n,i,o,s,a,r,l,u;if(l=this.getStep(e),!(n=t(l.element)).length)return this._showPopoverAndOverlay(e);switch(i=t(window),a=n.offset().top,s=n.outerHeight(),u=i.height(),r=0,l.placement){case"top":r=Math.max(0,a-u/2);break;case"left":case"right":r=Math.max(0,a+s/2-u/2);break;case"bottom":r=Math.max(0,a+s-u/2)}return this._debug("Scroll into view. ScrollTop: "+r+". Element offset: "+a+". Window height: "+u+"."),o=0,t("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(r)},function(t){return function(){if(2==++o)return t._showPopoverAndOverlay(e),t._debug("Scroll into view.\nAnimation end element offset: "+n.offset().top+".\nWindow height: "+i.height()+".")}}(this))},n.prototype._onResize=function(e,n){return t(window).on("resize.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(e,100)})},n.prototype._onScroll=function(e,n){return t(window).on("scroll.tour-"+this._options.name,function(){return clearTimeout(n),n=setTimeout(e,100)})},n.prototype._initMouseNavigation=function(){var n;return n=this,t(e).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(t){return function(e){return e.preventDefault(),t.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(t){return function(e){if(e.preventDefault(),t._current>0)return t.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(t){return function(e){return e.preventDefault(),t.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(e){var i;return e.preventDefault(),(i=t(this)).text(n._paused?i.data("pause-text"):i.data("resume-text")),n._paused?n.resume():n.pause()})},n.prototype._initKeyboardNavigation=function(){if(this._options.keyboard)return t(e).on("keyup.tour-"+this._options.name,function(t){return function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),t._isLast()?t.next():t.end();case 37:if(e.preventDefault(),t._current>0)return t.prev()}}}(this))},n.prototype._makePromise=function(e){return e&&t.isFunction(e.then)?e:null},n.prototype._callOnPromiseDone=function(t,e,n){return t?t.then(function(t){return function(i){return e.call(t,n)}}(this)):e.call(this,n)},n.prototype._showBackground=function(n,i){var o,s,a,r,l,u,c,h,d;for(a=t(e).height(),d=t(e).width(),h=[],r=0,l=(c=["top","bottom","left","right"]).length;r<l;r++)switch(u=c[r],o=null!=(s=this.backdrops)[u]?s[u]:s[u]=t("<div>",{class:"tour-backdrop "+u}),t(n.backdropContainer).append(o),u){case"top":h.push(o.height(i.offset.top>0?i.offset.top:0).width(d).offset({top:0,left:0}));break;case"bottom":h.push(o.offset({top:i.offset.top+i.height,left:0}).height(a-(i.offset.top+i.height)).width(d));break;case"left":h.push(o.offset({top:i.offset.top,left:0}).height(i.height).width(i.offset.left>0?i.offset.left:0));break;case"right":h.push(o.offset({top:i.offset.top,left:i.offset.left+i.width}).height(i.height).width(d-(i.offset.left+i.width)));break;default:h.push(void 0)}return h},n.prototype._showOverlayElement=function(e){var n,i;return 0===(n=t(e.backdropElement)).length?i={width:0,height:0,offset:{top:0,left:0}}:(i={width:n.innerWidth(),height:n.innerHeight(),offset:n.offset()},n.addClass("tour-step-backdrop"),e.backdropPadding&&(i=this._applyBackdropPadding(e.backdropPadding,i))),this._showBackground(e,i)},n.prototype._hideOverlayElement=function(e){var n,i,o;t(e.backdropElement).removeClass("tour-step-backdrop"),o=this.backdrops;for(i in o)(n=o[i])&&void 0!==n.remove&&n.remove();return this.backdrops=[]},n.prototype._applyBackdropPadding=function(t,e){return"object"==typeof t?(null==t.top&&(t.top=0),null==t.right&&(t.right=0),null==t.bottom&&(t.bottom=0),null==t.left&&(t.left=0),e.offset.top=e.offset.top-t.top,e.offset.left=e.offset.left-t.left,e.width=e.width+t.left+t.right,e.height=e.height+t.top+t.bottom):(e.offset.top=e.offset.top-t,e.offset.left=e.offset.left-t,e.width=e.width+2*t,e.height=e.height+2*t),e},n.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},n.prototype._getProtocol=function(t){return(t=t.split("://")).length>1?t[0]:"http"},n.prototype._getHost=function(t){return t=t.split("//"),(t=t.length>1?t[1]:t[0]).split("/")[0]},n.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},n.prototype._getQuery=function(t){return this._getParams(t,"?")},n.prototype._getHash=function(t){return this._getParams(t,"#")},n.prototype._getParams=function(t,e){var n,i,o,s,a;if(1===(s=t.split(e)).length)return{};for(a={},n=0,i=(s=s[1].split("&")).length;n<i;n++)a[(o=(o=s[n]).split("="))[0]]=o[1]||"";return a},n.prototype._equal=function(t,e){var n,i,o,s,a,r;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){if(s=Object.keys(t),a=Object.keys(e),s.length!==a.length)return!1;for(i in t)if(r=t[i],!this._equal(e[i],r))return!1;return!0}if("[object Array]"==={}.toString.call(t)&&"[object Array]"==={}.toString.call(e)){if(t.length!==e.length)return!1;for(i=n=0,o=t.length;n<o;i=++n)if(r=t[i],!this._equal(r,e[i]))return!1;return!0}return t===e},n}()}),$.extend(Walkthrough.prototype,{start:function(){this.tour.start(),this.tour.init()},sendTrackEvent:function(t,e){var n=t.getStep(t.getCurrentStep()).trackEvent;dataLayer.push({category:n.category,action:n.action,label:n.tags[e],event:"eventga"})},handlePrevStepButton:function(t,e){t._options.isFirstStep=e.prev<0,$('button[data-role="prev"]').toggleClass("hidden",t._options.isFirstStep)},handleNextStepButton:function(t,e){t._options.isLastStep=e.next<0,$('button[data-role="next"]').toggleClass("hidden",t._options.isLastStep),$('button[data-role="end"]').toggleClass("hidden",!t._options.isLastStep)}}),function(t){"use strict";t.Placeholders={Utils:{addEventListener:function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):void 0},inArray:function(t,e){var n,i;for(n=0,i=t.length;n<i;n++)if(t[n]===e)return!0;return!1},moveCaret:function(t,e){var n;t.createTextRange?((n=t.createTextRange()).move("character",e),n.select()):t.selectionStart&&(t.focus(),t.setSelectionRange(e,e))},changeType:function(t,e){try{return t.type=e,!0}catch(t){return!1}}}}}(this),function(t){"use strict";function e(){}function n(){try{return document.activeElement}catch(t){}}function i(t,e){var n,i,o=!!e&&t.value!==e,s=t.value===t.getAttribute(F);return!(!o&&!s||"true"!==t.getAttribute(S))&&(t.removeAttribute(S),t.value=t.value.replace(t.getAttribute(F),""),t.className=t.className.replace(C,""),i=t.getAttribute(E),parseInt(i,10)>=0&&(t.setAttribute("maxLength",i),t.removeAttribute(E)),(n=t.getAttribute(T))&&(t.type=n),!0)}function o(t){var e=t.getAttribute(F);return!(""!==t.value||!e)&&(t.setAttribute(S,"true"),t.value=e,t.className+=" "+k,t.getAttribute(E)||(t.setAttribute(E,t.maxLength),t.removeAttribute("maxLength")),t.getAttribute(T)?t.type="text":"password"===t.type&&N.changeType(t,"text")&&t.setAttribute(T,"password"),!0)}function s(t,e){var n,i,o,s,a;if(t&&t.getAttribute(F))e(t);else for(i=t?t.getElementsByTagName("input"):l,o=t?t.getElementsByTagName("textarea"):u,a=0,s=(n=i?i.length:0)+(o?o.length:0);a<s;a++)e(a<n?i[a]:o[a-n])}function a(t){s(t,i)}function r(t){t.form&&("string"==typeof(v=t.form)&&(v=document.getElementById(v)),v.getAttribute(D)||(N.addEventListener(v,"submit",function(t){return function(){a(t)}}(v)),v.setAttribute(D,"true"))),N.addEventListener(t,"focus",function(t){return function(){c&&t.value===t.getAttribute(F)&&"true"===t.getAttribute(S)?N.moveCaret(t,0):i(t)}}(t)),N.addEventListener(t,"blur",function(t){return function(){o(t)}}(t)),c&&(N.addEventListener(t,"keydown",function(t){return function(e){if(d=t.value,"true"===t.getAttribute(S)&&d===t.getAttribute(F)&&N.inArray(x,e.keyCode))return e.preventDefault&&e.preventDefault(),!1}}(t)),N.addEventListener(t,"keyup",function(t){return function(){i(t,d),""===t.value&&(t.blur(),N.moveCaret(t,0))}}(t)),N.addEventListener(t,"click",function(t){return function(){t===n()&&t.value===t.getAttribute(F)&&"true"===t.getAttribute(S)&&N.moveCaret(t,0)}}(t))),t.setAttribute(A,"true"),t.setAttribute(F,g),(c||t!==n())&&o(t)}var l,u,c,h,d,p,f,g,m,v,y,b,w,_=["text","search","url","tel","email","password","number","textarea"],x=[27,33,34,35,36,37,38,39,40,8,46],k="placeholdersjs",C=new RegExp("(?:^|\\s)"+k+"(?!\\S)"),F="data-placeholder-value",S="data-placeholder-active",T="data-placeholder-type",D="data-placeholder-submit",A="data-placeholder-bound",E="data-placeholder-maxlength",$=document.createElement("input"),O=document.getElementsByTagName("head")[0],I=document.documentElement,M=t.Placeholders,N=M.Utils;if(M.nativeSupport=void 0!==$.placeholder,!M.nativeSupport){for(l=document.getElementsByTagName("input"),u=document.getElementsByTagName("textarea"),c="false"===I.getAttribute("data-placeholder-focus"),h="false"!==I.getAttribute("data-placeholder-live"),(p=document.createElement("style")).type="text/css",f=document.createTextNode("."+k+" { color:#ccc; }"),p.styleSheet?p.styleSheet.cssText=f.nodeValue:p.appendChild(f),O.insertBefore(p,O.firstChild),w=0,b=l.length+u.length;w<b;w++)y=w<l.length?l[w]:u[w-l.length],(g=y.attributes.placeholder)&&(g=g.nodeValue)&&N.inArray(_,y.type)&&r(y);m=setInterval(function(){for(w=0,b=l.length+u.length;w<b;w++)y=w<l.length?l[w]:u[w-l.length],(g=y.attributes.placeholder)?(g=g.nodeValue)&&N.inArray(_,y.type)&&(y.getAttribute(A)||r(y),(g!==y.getAttribute(F)||"password"===y.type&&!y.getAttribute(T))&&("password"===y.type&&!y.getAttribute(T)&&N.changeType(y,"text")&&y.setAttribute(T,"password"),y.value===y.getAttribute(F)&&(y.value=g),y.setAttribute(F,g))):y.getAttribute(S)&&(i(y),y.removeAttribute(F));h||clearInterval(m)},100)}N.addEventListener(t,"beforeunload",function(){M.disable()}),M.disable=M.nativeSupport?e:a,M.enable=M.nativeSupport?e:function(t){s(t,o)}}(this),jQuery(function(t){function e(e){var o=t(e.currentTarget),s=o.attr("data-href")||o.attr("href"),a=o.attr("data-trackevent-section")||"";o.attr("disabled",!0),t.ajax({url:s,data:{section:a}}).done(function(t){var e=t.html||t.content||t;bootbox.dialog(Object.assign({message:e},function(t){var e=t.data(),n={};return Object.keys(e).filter(function(t){return i.test(t)}).forEach(function(t){var o={},s=t.replace(i,"");s.length>0&&(s=s[0].toLowerCase()+s.substr(1)),o[s]=e[t],Object.assign(n,o)}),n}(o)))}).fail(function(){}).always(function(){o.attr("disabled",!1),n=!1})}var n=!1,i=/^bootbox/;t(".open-in-modal").on("click",function(t){t.preventDefault(),n||(n=!0,e(t))})}),function(t){t.fn.extend({autoHeight:function(){function e(e){return t(e).css({height:"auto",resize:"vertical"}).height(e.scrollHeight)}return this.each(function(){e(this).on("input",function(){e(this)})})}}),t(document).ready(function(){t("textarea.vertical-auto-resize").autoHeight()})}(jQuery),function(t,e){function n(){t("#secondary-navbar").find(".active").removeClass("active")}var i=t("#secondary-navbar"),o=t("#secondary-menu-blocks"),s=i.find("ul.secondary-navbar-list > li"),a=i.find(".category-block");jQuery().hoverIntent&&s.length&&i.length&&(s.hoverIntent(function(e){var n=t(this);s.removeClass("active"),n.addClass("active"),a.removeClass("active"),function(t){a.removeClass("active"),o.find("[data-category="+t.data("category")+"]").addClass("active"),o.addClass("active")}(n)},function(){}),i.hoverIntent(function(){},n));var r=0;t(window).on("scroll",function(){var e=t(this).scrollTop();r<e?(n(),i.hasClass("active")&&i.removeClass("active")):(n(),i.hasClass("active")||i.addClass("active")),r=e})}(jQuery,window),jQuery(function(t){function e(){n.hasClass("navbar-affix")&&t("#main-navbar-wrapper").css("height",parseInt(n.css("height"))-1+"px")}var n=t("#main-navbar");n.wrap('<div id="main-navbar-wrapper"></div>'),e(),window.onresize=function(){e()}}),jQuery(function(t){function e(){o.removeClass("active"),i.find("#main-menu").css("visibility","visible"),o.css({left:"",width:""})}function n(){s.hasClass("active")&&t(".navbar-notification.active").removeClass("active")}var i=t("#main-navbar"),o=i.find(".navbar-search"),s=t(".navbar-notification");i.on("mouseenter",".menu-content, #user-menu",n),i.on("touchstart",".menu .menu-toggle",function(){n()}),i.find("form.search").on("submit",function(e){var n=t(this).find("[name=q]");""===n.val().trim()&&(e.preventDefault(),n.focus())}),o.find(".search-toggle").on("click",function(){var n=t(this),o=n.closest(".navbar-search"),s=i.find(".navbar-header"),a=s.outerWidth()+s.position().left,r=n.position().left+n.outerWidth()-a;o.css({left:a,width:r}),i.find("#main-menu").css("visibility","hidden"),o.addClass("active"),o.find("[name=q]").focus(),t(window).one("resize",e)}),o.find("button.close").on("click",function(t){e(),t.preventDefault()}),o.find("[name=q]").on("keyup",function(t){27==t.which&&e()})}),jQuery(function(t){var e=t(document.body),n=t(".navbar-notifications");n.on("click","li.navbar-notification > a",function(n){n.preventDefault();var i=t(this),o=i.closest("li"),s=t(i.attr("href"));if(t("li.navbar-notification").not(o).removeClass("active"),o.toggleClass("active"),o.hasClass("active")){var a=function(n){s[0]===n.target||t.contains(s[0],n.target)||(o.removeClass("active"),e.off("mousedown",a))};setTimeout(function(){e.on("mousedown",a)},0)}}),n.on("touchstart",function(e){var n=function(e){t(e.target).closest(".navbar-notifications").length||(t(".navbar-notification.active").removeClass("active"),t(document.body).off("touchstart",n))};t(document.body).on("touchstart",n)})}),jQuery(function(t){var e=function(){return t(window).width()>992};[".menu .menu-toggle",".menu .accordion-menu-toggle"].forEach(function(n){var i=t("#main-navbar");i.on("click",n,function(e){e.stopPropagation();var n=t(this).closest(".menu"),o=n.hasClass("hover")&&!n.hasClass("active");t(this).parents(".menu.active.hover").length>0||t(".menu.active.hover").removeClass("active hover"),o?n.removeClass("hover"):n.add(n.parentsUntil(i,".menu")).siblings().removeClass("active hover"),n.toggleClass("active hover"),t(this).hasClass("noncollapsible")||e.preventDefault();var s=function(e){t(e.target).closest(".menu.active.hover").length||(i.find(".menu").removeClass("active hover"),t(document.body).off("click",s))};t(document.body).on("click",s)});var o=function(){i.on("mouseenter touchenter",n,s),i.on("mouseleave",".menu.hover",function(){t(this).removeClass("hover")})},s=function(){var e=t(this).closest(".menu");e.addClass("hover"),e.add(e.parentsUntil(i,".menu")).siblings(".menu").removeClass("hover")};e()&&o(),t(window).resize(function(){e()?o():(i.off("mouseenter touchenter",n,s),i.off("mouseleave",".menu.hover"))})})}),jQuery(function(t){"function"!=typeof signInClick&&(window.signInClick=function(e){var n=t(this),i={back:window.location.href,default_action:"register",source_action:"login_navbar"},o=function(t,e){var o,s=n.data(t);e&&(t=e+t),s&&(o=t.replace("-","_"),i[o]=s)};o("action","default_"),o("title"),o("source-page"),o("source-action");try{Login.pop(i),e.preventDefault()}catch(t){}},t(".user-signin").on("click",signInClick))}),jQuery(function(t){t("#footer .login").on("click",function(t){try{Login.pop({default_action:"login"}),t.preventDefault()}catch(t){}});var e=!1;t(window).on("load resize",function(){e!==(e=t(this).width()<=767)&&t("#footer .section.collapsible").each(function(n,i){var o=t(i);e?function(e){var n=e.find("ul").addClass("dropdown-menu").attr("role","menu"),i=e.find("span.title").remove(),o=t('<a data-toggle="dropdown">').text(i.text());e.addClass("dropdown").removeClass("links").append(o,n)}(o):function(e){var n=e.find("ul.dropdown-menu").removeClass("dropdown-menu").removeAttr("role"),i=e.find('a[data-toggle="dropdown"]').remove(),o=t("<span>").addClass("title").text(i.text());e.removeClass("dropdown").addClass("links").append(o,n)}(o)})})}),$(document).ready(function(){$(".rotate").click(function(){var t=$(this).find(".icon-rotate");$(this).find(".collapse").collapse("toggle"),t.toggleClass("opened"),t.toggleClass("icon-minus-circle-o"),t.toggleClass("icon-plus-circle-o")}),$(".btn[data-load-on-click]").on("click",function(){$(this).addClass("btn-spinner disabled")})});